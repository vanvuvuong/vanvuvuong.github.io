<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=vi><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu - Kaizen - tốt hơn mỗi ngày</title><meta name=author content="Kaizen Teams"><meta name=description content="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"><meta name=keywords content='ai generated post'><meta itemprop=name content="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"><meta itemprop=description content="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"><meta itemprop=datePublished content="2025-12-11T20:17:23+07:00"><meta itemprop=dateModified content="2025-12-11T05:02:01+07:00"><meta itemprop=wordCount content="7574"><meta itemprop=keywords content="Ai Generated Post"><meta property="og:url" content="https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/file-and-folder/"><meta property="og:site_name" content="Kaizen - tốt hơn mỗi ngày"><meta property="og:title" content="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"><meta property="og:description" content="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"><meta property="og:locale" content="vi"><meta property="og:type" content="article"><meta property="article:section" content="bai-viet"><meta property="article:published_time" content="2025-12-11T20:17:23+07:00"><meta property="article:modified_time" content="2025-12-11T05:02:01+07:00"><meta property="article:tag" content="Ai Generated Post"><meta name=twitter:card content="summary"><meta name=twitter:title content="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"><meta name=twitter:description content="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"><meta name=application-name content="Kaizen - tốt hơn mỗi ngày"><meta name=apple-mobile-web-app-title content="Kaizen - tốt hơn mỗi ngày"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#2d89ef"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#FF7359><link rel=manifest href=/site.webmanifest><link rel=canonical type=text/html href=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/file-and-folder/ title="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu - Kaizen - tốt hơn mỗi ngày"><link rel=prev type=text/html href=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/selinux/ title="Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc"><link rel=stylesheet href=/css/config.min.css><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu","inLanguage":"vi","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/vanvuvuong.github.io\/bai-viet\/khoa-hoc-may-tinh\/linux-cli\/file-and-folder\/"},"image":[{"@type":"ImageObject","url":"https:\/\/vanvuvuong.github.io\/images\/avatar.jpeg","width":330,"height":330}],"genre":"posts","keywords":"ai generated post","wordcount":7574,"url":"https:\/\/vanvuvuong.github.io\/bai-viet\/khoa-hoc-may-tinh\/linux-cli\/file-and-folder\/","datePublished":"2025-12-11T20:17:23+07:00","dateModified":"2025-12-11T05:02:01+07:00","publisher":{"@type":"Organization","name":"Kaizen","logo":{"@type":"ImageObject","url":"https:\/\/vanvuvuong.github.io\/images\/avatar.jpeg","width":330,"height":330}},"author":{"@type":"Person","name":"Kaizen Teams"},"description":"Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"}</script><script src=/js/head/color-scheme.min.js></script></head><body data-instant-intensity=viewport data-header-desktop=sticky data-header-mobile=auto><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Kaizen - tốt hơn mỗi ngày"><img class=logo src=/images/kaizen-logo.png alt="Kaizen - tốt hơn mỗi ngày" height=32 width=32><span class=header-title-text>Kaizen</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/gioi-thieu><i class="fa-solid fa-comments fa-fw fa-sm" aria-hidden=true></i> Giới thiệu</a></li><li class="menu-item has-children"><a class=menu-link href=/bai-viet><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Bài viết</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/bai-viet/khoa-hoc-may-tinh><i class="fa-solid fa-laptop fa-fw fa-sm" aria-hidden=true></i> Khoa học máy tính</a></li><li class=menu-item><a class=menu-link href=/bai-viet/cuoc-song><i class="fa-solid fa-life-ring fa-fw fa-sm" aria-hidden=true></i> Cuộc sống</a></li><li class=menu-item><a class=menu-link href=/bai-viet/hoc-vien-luat-tu-nhien><i class="fa-solid fa-dragon fa-fw fa-sm" aria-hidden=true></i> Học viện luật tự nhiên</a></li><li class=menu-item><a class=menu-link href=/collections><i class="fa-solid fa-layer-group fa-fw fa-sm" aria-hidden=true></i> Bộ sưu tập</a></li><li class=menu-item><a class=menu-link href=/tags><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li></ul></li><li class=menu-item><a class=menu-link href=/sach-hay><i class="fa-solid fa-book fa-fw fa-sm" aria-hidden=true></i> Sách hay</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Tìm tiêu đề hoặc nội dung..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title="Tìm kiếm"><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Xoá><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Đổi chủ đề"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Kaizen - tốt hơn mỗi ngày"><img class=logo src=/images/kaizen-logo.png alt="Kaizen - tốt hơn mỗi ngày" height=26 width=26><span class=header-title-text>Kaizen</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Tìm tiêu đề hoặc nội dung..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title="Tìm kiếm"><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Xoá><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Huỷ</a></li><li class=menu-item><a class=menu-link href=/gioi-thieu><i class="fa-solid fa-comments fa-fw fa-sm" aria-hidden=true></i> Giới thiệu</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/bai-viet><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Bài viết</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/bai-viet/khoa-hoc-may-tinh><i class="fa-solid fa-laptop fa-fw fa-sm" aria-hidden=true></i> Khoa học máy tính</a></li><li class=menu-item><a class=menu-link href=/bai-viet/cuoc-song><i class="fa-solid fa-life-ring fa-fw fa-sm" aria-hidden=true></i> Cuộc sống</a></li><li class=menu-item><a class=menu-link href=/bai-viet/hoc-vien-luat-tu-nhien><i class="fa-solid fa-dragon fa-fw fa-sm" aria-hidden=true></i> Học viện luật tự nhiên</a></li><li class=menu-item><a class=menu-link href=/collections><i class="fa-solid fa-layer-group fa-fw fa-sm" aria-hidden=true></i> Bộ sưu tập</a></li><li class=menu-item><a class=menu-link href=/tags><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li></ul></li><li class=menu-item><a class=menu-link href=/sach-hay><i class="fa-solid fa-book fa-fw fa-sm" aria-hidden=true></i> Sách hay</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Đổi chủ đề"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=fi-container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="Bộ sưu tập"><div class="details collection-details open"><div class="details-summary collection-summary"><i class="fa-solid fa-layer-group fa-fw" aria-hidden=true></i>
<span class=collection-name title="Bộ sưu tập">Linux Cli</span>
<span class=collection-count>11</span><i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class="details-content collection-content"><nav><ul class=collection-list><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/shell-co-ban/ title="Những Điều Cơ Bản Về Bash & Fish Shell Trong Linux">Những Điều Cơ Bản Về Bash & Fish Shell Trong Linux</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/grep-diff-sort/ title="Grep, Sort, Diff - Hướng Dẫn Chuyên Sâu">Grep, Sort, Diff - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/network/ title="Linux Network Commands - Hướng Dẫn Chuyên Sâu">Linux Network Commands - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/process-service-log/ title="Process Management, Systemd & Logging - Hướng Dẫn Chuyên Sâu">Process Management, Systemd & Logging - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/regex-awk-sed/ title="Awk, Sed & Regex - Hướng Dẫn Chuyên Sâu Cho System Engineer">Awk, Sed & Regex - Hướng Dẫn Chuyên Sâu Cho System Engineer</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/storage/ title="Disk, Storage & Filesystem - Hướng Dẫn Chuyên Sâu">Disk, Storage & Filesystem - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/user-group/ title="Linux User & Group Management - Hướng Dẫn Chuyên Sâu">Linux User & Group Management - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/encryption-and-security/ title="Linux Cryptography & Security Tools - Hướng Dẫn Chuyên Sâu">Linux Cryptography & Security Tools - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/package-manager/ title="Linux Package Management - Hướng Dẫn Chuyên Sâu">Linux Package Management - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/selinux/ title="Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc">Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc</a></li><li class=collection-item><span class=active title="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu">Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu</span></li></ul><div class=collection-nav-simple><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/selinux/ class=collection-nav-item rel=prev title="Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i></a><span class=text-secondary>11/11</span><i class="fa-solid fa-angle-right fa-fw collection-nav-item text-secondary" aria-hidden=true></i></div></nav></div></div><div class="details related-details open"><div class="details-summary related-summary"><i class="fa-solid fa-fire fa-fade text-danger fa-fw" aria-hidden=true></i>
<span class=related-title>Nội dung liên quan</span><i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class="details-content related-content"><ul class=related-list><li class=related-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/selinux/ title="Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc">Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc</a></li><li class=related-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/encryption-and-security/ title="Linux Cryptography & Security Tools - Hướng Dẫn Chuyên Sâu">Linux Cryptography & Security Tools - Hướng Dẫn Chuyên Sâu</a></li><li class=related-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/package-manager/ title="Linux Package Management - Hướng Dẫn Chuyên Sâu">Linux Package Management - Hướng Dẫn Chuyên Sâu</a></li><li class=related-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/user-group/ title="Linux User & Group Management - Hướng Dẫn Chuyên Sâu">Linux User & Group Management - Hướng Dẫn Chuyên Sâu</a></li><li class=related-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/storage/ title="Disk, Storage & Filesystem - Hướng Dẫn Chuyên Sâu">Disk, Storage & Filesystem - Hướng Dẫn Chuyên Sâu</a></li></ul></div></div></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://vanvuvuong.github.io title="Tác giả" target=_blank rel="external nofollow noopener noreferrer author" class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Kaizen Teams</a></span><span class=post-included-in>&nbsp;trong <a href=/collections/linux-cli/ class=post-collection title="Bộ sưu tập - Linux Cli"><i class="fa-solid fa-layer-group fa-fw" aria-hidden=true></i> Linux Cli</a></span></div><div class=post-meta-line><span title="đăng ngày 2025-12-11 20:17:23"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=2025-12-11>2025-12-11</time></span>&nbsp;<span title="Cập nhật ngày 2025-12-11 05:02:01"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden=true></i><time datetime=2025-12-11>2025-12-11</time></span>&nbsp;<span title="7574 từ"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>Khoảng 7600 từ</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>36 phút</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Nội dung</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#phần-1-find---tìm-kiếm-file>PHẦN 1: FIND - TÌM KIẾM FILE</a><ul><li><a href=#11-thuật-toán-duyệt-cây>1.1 Thuật Toán Duyệt Cây</a></li><li><a href=#12-cú-pháp-cơ-bản>1.2 Cú Pháp Cơ Bản</a></li><li><a href=#13-các-test-hay-dùng>1.3 Các Test Hay Dùng</a></li><li><a href=#14-operators---kết-hợp-điều-kiện>1.4 Operators - Kết Hợp Điều Kiện</a></li><li><a href=#15-actions---hành-động>1.5 Actions - Hành Động</a></li><li><a href=#16-find--xargs---combo-mạnh-nhất>1.6 find + xargs - Combo Mạnh Nhất</a></li><li><a href=#17-tối-ưu-hiệu-năng>1.7 Tối Ưu Hiệu Năng</a></li><li><a href=#18-ví-dụ-thực-tế>1.8 Ví Dụ Thực Tế</a></li></ul></li><li><a href=#phần-2-ln---liên-kết-file>PHẦN 2: LN - LIÊN KẾT FILE</a><ul><li><a href=#21-inode-và-cấu-trúc-filesystem>2.1 Inode và Cấu Trúc Filesystem</a></li><li><a href=#22-hard-link-vs-symbolic-link>2.2 Hard Link vs Symbolic Link</a></li><li><a href=#23-cú-pháp-và-options>2.3 Cú Pháp và Options</a></li><li><a href=#24-khi-nào-dùng-cái-nào>2.4 Khi Nào Dùng Cái Nào</a></li><li><a href=#25-troubleshooting>2.5 Troubleshooting</a></li><li><a href=#26-ví-dụ-thực-tế>2.6 Ví Dụ Thực Tế</a></li></ul></li><li><a href=#phần-3-lsof---liệt-kê-file-đang-mở>PHẦN 3: LSOF - LIỆT KÊ FILE ĐANG MỞ</a><ul><li><a href=#31-file-descriptor-và-proc>3.1 File Descriptor và /proc</a></li><li><a href=#32-cú-pháp-cơ-bản>3.2 Cú Pháp Cơ Bản</a></li><li><a href=#33-lọc-theo-các-tiêu-chí>3.3 Lọc Theo Các Tiêu Chí</a></li><li><a href=#34-output-format>3.4 Output Format</a></li><li><a href=#35-kết-hợp-điều-kiện>3.5 Kết Hợp Điều Kiện</a></li><li><a href=#36-use-cases-thực-tế>3.6 Use Cases Thực Tế</a></li><li><a href=#37-repeat-mode>3.7 Repeat Mode</a></li></ul></li><li><a href=#phần-4-tar---archive-và-nén>PHẦN 4: TAR - ARCHIVE VÀ NÉN</a><ul><li><a href=#41-cấu-trúc-tar-archive>4.1 Cấu Trúc TAR Archive</a></li><li><a href=#42-các-thuật-toán-nén>4.2 Các Thuật Toán Nén</a></li><li><a href=#43-cú-pháp-và-operations>4.3 Cú Pháp và Operations</a></li><li><a href=#44-tạo-archive>4.4 Tạo Archive</a></li><li><a href=#45-giải-nén-archive>4.5 Giải Nén Archive</a></li><li><a href=#46-liệt-kê-nội-dung>4.6 Liệt Kê Nội Dung</a></li><li><a href=#47-tính-năng-nâng-cao>4.7 Tính Năng Nâng Cao</a></li><li><a href=#48-ví-dụ-thực-tế>4.8 Ví Dụ Thực Tế</a></li></ul></li><li><a href=#phần-5-chmod---quản-lý-quyền>PHẦN 5: CHMOD - QUẢN LÝ QUYỀN</a><ul><li><a href=#51-mô-hình-permission-unix>5.1 Mô Hình Permission Unix</a></li><li><a href=#52-special-permissions-setuid-setgid-sticky>5.2 Special Permissions (setuid, setgid, sticky)</a></li><li><a href=#53-cú-pháp-chmod>5.3 Cú Pháp chmod</a></li><li><a href=#54-umask---default-permissions>5.4 umask - Default Permissions</a></li><li><a href=#55-acl-access-control-list>5.5 ACL (Access Control List)</a></li><li><a href=#56-ví-dụ-thực-tế>5.6 Ví Dụ Thực Tế</a></li></ul></li><li><a href=#tóm-tắt-nhanh>TÓM TẮT NHANH</a><ul><li><a href=#find>find</a></li><li><a href=#ln>ln</a></li><li><a href=#lsof>lsof</a></li><li><a href=#tar>tar</a></li><li><a href=#chmod>chmod</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h2 class=heading-element id=phần-1-find---tìm-kiếm-file><span>PHẦN 1: FIND - TÌM KIẾM FILE</span>
<a href=#ph%e1%ba%a7n-1-find---t%c3%acm-ki%e1%ba%bfm-file class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=11-thuật-toán-duyệt-cây><span>1.1 Thuật Toán Duyệt Cây</span>
<a href=#11-thu%e1%ba%adt-to%c3%a1n-duy%e1%bb%87t-c%c3%a2y class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────────────────────────────────────────────────────────┐
</span></span><span class=line><span class=cl>│              THUẬT TOÁN DUYỆT CÂY THƯ MỤC                   │
</span></span><span class=line><span class=cl>└─────────────────────────────────────────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>find mặc định dùng DFS (Depth-First Search):
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    /home
</span></span><span class=line><span class=cl>                   /     \
</span></span><span class=line><span class=cl>               user1     user2
</span></span><span class=line><span class=cl>              /    \        \
</span></span><span class=line><span class=cl>           docs   pics     docs
</span></span><span class=line><span class=cl>           /
</span></span><span class=line><span class=cl>        file.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Thứ tự duyệt DFS: /home → user1 → docs → file.txt → pics → user2 → docs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Độ phức tạp:
</span></span><span class=line><span class=cl>- Thời gian: O(n) với n = tổng số file + thư mục
</span></span><span class=line><span class=cl>- Bộ nhớ: O(d) với d = độ sâu tối đa (stack cho đệ quy)
</span></span><span class=line><span class=cl>- I/O: Mỗi file/thư mục cần ít nhất 1 syscall stat()</span></span></code></pre></td></tr></table></div></div><p><strong>Tối ưu với -maxdepth:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Không giới hạn - duyệt toàn bộ</span>
</span></span><span class=line><span class=cl>find /home -name <span class=s2>&#34;*.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giới hạn độ sâu - nhanh hơn nhiều</span>
</span></span><span class=line><span class=cl>find /home -maxdepth <span class=m>3</span> -name <span class=s2>&#34;*.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Chỉ ở mức hiện tại</span>
</span></span><span class=line><span class=cl>find . -maxdepth <span class=m>1</span> -type f</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=12-cú-pháp-cơ-bản><span>1.2 Cú Pháp Cơ Bản</span>
<a href=#12-c%c3%ba-ph%c3%a1p-c%c6%a1-b%e1%ba%a3n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find <span class=o>[</span>đường_dẫn...<span class=o>]</span> <span class=o>[</span>biểu_thức<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Biểu thức gồm:</span>
</span></span><span class=line><span class=cl><span class=c1># - Tests: -name, -type, -size, -mtime... (trả về true/false)</span>
</span></span><span class=line><span class=cl><span class=c1># - Actions: -print, -exec, -delete... (thực hiện hành động)</span>
</span></span><span class=line><span class=cl><span class=c1># - Operators: -and, -or, -not, ()... (kết hợp điều kiện)</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=13-các-test-hay-dùng><span>1.3 Các Test Hay Dùng</span>
<a href=#13-c%c3%a1c-test-hay-d%c3%b9ng class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Theo tên:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-name <span class=s2>&#34;mẫu&#34;</span>         <span class=c1># Khớp tên file (case-sensitive)</span>
</span></span><span class=line><span class=cl>-iname <span class=s2>&#34;mẫu&#34;</span>        <span class=c1># Khớp tên file (không phân biệt hoa thường)</span>
</span></span><span class=line><span class=cl>-path <span class=s2>&#34;mẫu&#34;</span>         <span class=c1># Khớp đường dẫn đầy đủ</span>
</span></span><span class=line><span class=cl>-ipath <span class=s2>&#34;mẫu&#34;</span>        <span class=c1># Khớp đường dẫn (không phân biệt hoa thường)</span>
</span></span><span class=line><span class=cl>-regex <span class=s2>&#34;mẫu&#34;</span>        <span class=c1># Khớp đường dẫn bằng regex</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span>                    <span class=c1># File .txt</span>
</span></span><span class=line><span class=cl>find . -iname <span class=s2>&#34;*.JPG&#34;</span>                   <span class=c1># File .jpg, .JPG, .Jpg...</span>
</span></span><span class=line><span class=cl>find . -path <span class=s2>&#34;**/test/*.py&#34;</span>             <span class=c1># File .py trong thư mục test</span>
</span></span><span class=line><span class=cl>find . -regex <span class=s1>&#39;.*\.\(jpg\|png\|gif\)&#39;</span>   <span class=c1># File ảnh (regex)</span></span></span></code></pre></td></tr></table></div></div><p><strong>Theo loại:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-type f     <span class=c1># File thường</span>
</span></span><span class=line><span class=cl>-type d     <span class=c1># Thư mục</span>
</span></span><span class=line><span class=cl>-type l     <span class=c1># Symbolic link</span>
</span></span><span class=line><span class=cl>-type b     <span class=c1># Block device</span>
</span></span><span class=line><span class=cl>-type c     <span class=c1># Character device</span>
</span></span><span class=line><span class=cl>-type p     <span class=c1># Named pipe (FIFO)</span>
</span></span><span class=line><span class=cl>-type s     <span class=c1># Socket</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>find /dev -type b                <span class=c1># Liệt kê block devices</span>
</span></span><span class=line><span class=cl>find . -type l -xtype f          <span class=c1># Symlink trỏ đến file thường</span>
</span></span><span class=line><span class=cl>find . -type l ! -xtype l        <span class=c1># Symlink bị hỏng (broken)</span></span></span></code></pre></td></tr></table></div></div><p><strong>Theo kích thước:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-size n<span class=o>[</span>cwbkMG<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=c1># c = bytes</span>
</span></span><span class=line><span class=cl><span class=c1># w = 2-byte words</span>
</span></span><span class=line><span class=cl><span class=c1># b = 512-byte blocks (mặc định)</span>
</span></span><span class=line><span class=cl><span class=c1># k = kilobytes</span>
</span></span><span class=line><span class=cl><span class=c1># M = megabytes</span>
</span></span><span class=line><span class=cl><span class=c1># G = gigabytes</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ký hiệu:</span>
</span></span><span class=line><span class=cl><span class=c1># +n = lớn hơn n</span>
</span></span><span class=line><span class=cl><span class=c1># -n = nhỏ hơn n</span>
</span></span><span class=line><span class=cl><span class=c1># n  = chính xác n</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>find . -size +100M              <span class=c1># File &gt; 100MB</span>
</span></span><span class=line><span class=cl>find . -size -1k                <span class=c1># File &lt; 1KB</span>
</span></span><span class=line><span class=cl>find . -size <span class=m>0</span>                  <span class=c1># File rỗng</span>
</span></span><span class=line><span class=cl>find . -type f -empty           <span class=c1># File rỗng (cách khác)</span>
</span></span><span class=line><span class=cl>find . -type d -empty           <span class=c1># Thư mục rỗng</span></span></span></code></pre></td></tr></table></div></div><p><strong>Theo thời gian:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Thời gian tính bằng NGÀY (24 giờ):</span>
</span></span><span class=line><span class=cl>-mtime n    <span class=c1># Modified time - nội dung file thay đổi</span>
</span></span><span class=line><span class=cl>-atime n    <span class=c1># Access time - file được đọc</span>
</span></span><span class=line><span class=cl>-ctime n    <span class=c1># Change time - metadata thay đổi (permission, owner...)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Thời gian tính bằng PHÚT:</span>
</span></span><span class=line><span class=cl>-mmin n
</span></span><span class=line><span class=cl>-amin n
</span></span><span class=line><span class=cl>-cmin n
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ký hiệu:</span>
</span></span><span class=line><span class=cl><span class=c1># +n = hơn n ngày/phút trước</span>
</span></span><span class=line><span class=cl><span class=c1># -n = trong vòng n ngày/phút</span>
</span></span><span class=line><span class=cl><span class=c1># n  = chính xác n ngày/phút trước</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>find . -mtime -7                <span class=c1># Sửa trong 7 ngày qua</span>
</span></span><span class=line><span class=cl>find . -mtime +30               <span class=c1># Sửa hơn 30 ngày trước</span>
</span></span><span class=line><span class=cl>find . -mmin -60                <span class=c1># Sửa trong 60 phút qua</span>
</span></span><span class=line><span class=cl>find . -atime +365              <span class=c1># Không truy cập hơn 1 năm</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># So sánh với file tham chiếu:</span>
</span></span><span class=line><span class=cl>find . -newer file_tham_chieu   <span class=c1># Mới hơn file này</span>
</span></span><span class=line><span class=cl>find . -anewer file_tham_chieu  <span class=c1># Truy cập sau file này</span></span></span></code></pre></td></tr></table></div></div><p><strong>Theo quyền và owner:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-perm mode      <span class=c1># Chính xác mode</span>
</span></span><span class=line><span class=cl>-perm -mode     <span class=c1># Có TẤT CẢ các bit này</span>
</span></span><span class=line><span class=cl>-perm /mode     <span class=c1># Có BẤT KỲ bit nào</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-user tên       <span class=c1># Thuộc user</span>
</span></span><span class=line><span class=cl>-group tên      <span class=c1># Thuộc group</span>
</span></span><span class=line><span class=cl>-uid n          <span class=c1># Theo UID</span>
</span></span><span class=line><span class=cl>-gid n          <span class=c1># Theo GID</span>
</span></span><span class=line><span class=cl>-nouser         <span class=c1># Không có owner (orphan)</span>
</span></span><span class=line><span class=cl>-nogroup        <span class=c1># Không có group</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>find . -perm <span class=m>755</span>                <span class=c1># Chính xác 755</span>
</span></span><span class=line><span class=cl>find . -perm -u+x               <span class=c1># User có quyền execute</span>
</span></span><span class=line><span class=cl>find . -perm /u+x,g+x,o+x       <span class=c1># Bất kỳ ai có quyền execute</span>
</span></span><span class=line><span class=cl>find . -perm -4000              <span class=c1># Có setuid bit</span>
</span></span><span class=line><span class=cl>find /home -user nobody         <span class=c1># File của user nobody</span>
</span></span><span class=line><span class=cl>find / -nouser -nogroup         <span class=c1># File mồ côi</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=14-operators---kết-hợp-điều-kiện><span>1.4 Operators - Kết Hợp Điều Kiện</span>
<a href=#14-operators---k%e1%ba%bft-h%e1%bb%a3p-%c4%91i%e1%bb%81u-ki%e1%bb%87n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># AND (mặc định)</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -size +1M
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -and -size +1M    <span class=c1># Tường minh</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># OR</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.jpg&#34;</span> -or -name <span class=s2>&#34;*.png&#34;</span>
</span></span><span class=line><span class=cl>find . <span class=se>\(</span> -name <span class=s2>&#34;*.jpg&#34;</span> -o -name <span class=s2>&#34;*.png&#34;</span> <span class=se>\)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># NOT</span>
</span></span><span class=line><span class=cl>find . -not -name <span class=s2>&#34;*.txt&#34;</span>
</span></span><span class=line><span class=cl>find . ! -name <span class=s2>&#34;*.txt&#34;</span>                  <span class=c1># Cách khác</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Nhóm với ngoặc (phải escape)</span>
</span></span><span class=line><span class=cl>find . <span class=se>\(</span> -name <span class=s2>&#34;*.txt&#34;</span> -o -name <span class=s2>&#34;*.md&#34;</span> <span class=se>\)</span> -mtime -7
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ phức tạp:</span>
</span></span><span class=line><span class=cl><span class=c1># Tìm file .log hoặc .txt, lớn hơn 1MB, sửa trong 7 ngày</span>
</span></span><span class=line><span class=cl>find . <span class=se>\(</span> -name <span class=s2>&#34;*.log&#34;</span> -o -name <span class=s2>&#34;*.txt&#34;</span> <span class=se>\)</span> -size +1M -mtime -7</span></span></code></pre></td></tr></table></div></div><p><strong>Thứ tự ưu tiên (từ cao đến thấp):</strong></p><ol><li><code>()</code> - Nhóm</li><li><code>!</code>, <code>-not</code> - Phủ định</li><li><code>-and</code>, mặc định - AND</li><li><code>-or</code>, <code>-o</code> - OR</li></ol><h3 class=heading-element id=15-actions---hành-động><span>1.5 Actions - Hành Động</span>
<a href=#15-actions---h%c3%a0nh-%c4%91%e1%bb%99ng class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>In kết quả:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-print          <span class=c1># In đường dẫn, xuống dòng (mặc định)</span>
</span></span><span class=line><span class=cl>-print0         <span class=c1># In đường dẫn, kết thúc bằng null (cho xargs -0)</span>
</span></span><span class=line><span class=cl>-printf <span class=s2>&#34;fmt&#34;</span>   <span class=c1># In theo format tùy chỉnh</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Format của -printf:</span>
</span></span><span class=line><span class=cl>%p      <span class=c1># Đường dẫn đầy đủ</span>
</span></span><span class=line><span class=cl>%f      <span class=c1># Tên file</span>
</span></span><span class=line><span class=cl>%h      <span class=c1># Thư mục chứa</span>
</span></span><span class=line><span class=cl>%s      <span class=c1># Kích thước (bytes)</span>
</span></span><span class=line><span class=cl>%m      <span class=c1># Permission (octal)</span>
</span></span><span class=line><span class=cl>%M      <span class=c1># Permission (symbolic, như ls -l)</span>
</span></span><span class=line><span class=cl>%u      <span class=c1># Username</span>
</span></span><span class=line><span class=cl>%g      <span class=c1># Group name</span>
</span></span><span class=line><span class=cl>%T+     <span class=c1># Thời gian sửa đổi (YYYY-MM-DD+HH:MM:SS)</span>
</span></span><span class=line><span class=cl>%Tc     <span class=c1># Thời gian sửa đổi (locale format)</span>
</span></span><span class=line><span class=cl><span class=se>\n</span>      <span class=c1># Xuống dòng</span>
</span></span><span class=line><span class=cl><span class=se>\t</span>      <span class=c1># Tab</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>find . -type f -printf <span class=s2>&#34;%s\t%p\n&#34;</span>           <span class=c1># Kích thước + đường dẫn</span>
</span></span><span class=line><span class=cl>find . -type f -printf <span class=s2>&#34;%M %u %s %T+ %p\n&#34;</span>  <span class=c1># Như ls -l</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.sh&#34;</span> -printf <span class=s2>&#34;%m %p\n&#34;</span>       <span class=c1># Permission + file</span></span></span></code></pre></td></tr></table></div></div><p><strong>Thực thi lệnh:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-exec lệnh <span class=o>{}</span> <span class=se>\;</span>        <span class=c1># Chạy lệnh cho MỖI file</span>
</span></span><span class=line><span class=cl>-exec lệnh <span class=o>{}</span> +         <span class=c1># Gom nhiều file vào 1 lệnh (nhanh hơn)</span>
</span></span><span class=line><span class=cl>-execdir lệnh <span class=o>{}</span> <span class=se>\;</span>     <span class=c1># Chạy trong thư mục chứa file</span>
</span></span><span class=line><span class=cl>-ok lệnh <span class=o>{}</span> <span class=se>\;</span>          <span class=c1># Như -exec nhưng hỏi xác nhận</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># {} = placeholder cho tên file</span>
</span></span><span class=line><span class=cl><span class=c1># \; = kết thúc lệnh (cho mỗi file)</span>
</span></span><span class=line><span class=cl><span class=c1># +  = kết thúc lệnh (gom nhiều file)</span></span></span></code></pre></td></tr></table></div></div><p><strong>So sánh -exec với ; và +:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Giả sử tìm thấy: file1.txt, file2.txt, file3.txt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Với \; - chạy 3 lần:</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -exec <span class=nb>echo</span> <span class=o>{}</span> <span class=se>\;</span>
</span></span><span class=line><span class=cl><span class=c1># echo file1.txt</span>
</span></span><span class=line><span class=cl><span class=c1># echo file2.txt</span>
</span></span><span class=line><span class=cl><span class=c1># echo file3.txt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Với + - chạy 1 lần (hoặc ít lần):</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -exec <span class=nb>echo</span> <span class=o>{}</span> +
</span></span><span class=line><span class=cl><span class=c1># echo file1.txt file2.txt file3.txt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># + NHANH hơn nhiều khi có nhiều file!</span></span></span></code></pre></td></tr></table></div></div><p><strong>Xóa file:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-delete         <span class=c1># Xóa file/thư mục rỗng</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.tmp&#34;</span> -delete
</span></span><span class=line><span class=cl>find . -type d -empty -delete       <span class=c1># Xóa thư mục rỗng</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CẢNH BÁO: -delete bật -depth tự động (xử lý file trước thư mục)</span>
</span></span><span class=line><span class=cl><span class=c1># Luôn test trước với -print:</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.tmp&#34;</span> -print         <span class=c1># Xem trước</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.tmp&#34;</span> -delete        <span class=c1># Xóa thật</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=16-find--xargs---combo-mạnh-nhất><span>1.6 find + xargs - Combo Mạnh Nhất</span>
<a href=#16-find--xargs---combo-m%e1%ba%a1nh-nh%e1%ba%a5t class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Vấn đề với tên file có ký tự đặc biệt:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># SAI - hỏng với tên file có khoảng trắng hoặc ký tự đặc biệt</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> <span class=p>|</span> xargs rm
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ĐÚNG - dùng null delimiter</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -print0 <span class=p>|</span> xargs -0 rm
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -print0: Kết thúc mỗi kết quả bằng null thay vì newline</span>
</span></span><span class=line><span class=cl><span class=c1># xargs -0: Đọc input phân cách bằng null</span></span></span></code></pre></td></tr></table></div></div><p><strong>Tại sao xargs nhanh hơn -exec ;:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># -exec \; fork process cho MỖI file</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -exec grep <span class=s2>&#34;pattern&#34;</span> <span class=o>{}</span> <span class=se>\;</span>
</span></span><span class=line><span class=cl><span class=c1># 1000 files = 1000 lần fork grep</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># xargs gom nhiều file vào 1 lệnh</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -print0 <span class=p>|</span> xargs -0 grep <span class=s2>&#34;pattern&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 1000 files ≈ vài lần fork grep (phụ thuộc ARG_MAX)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -exec + cũng gom như xargs</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -exec grep <span class=s2>&#34;pattern&#34;</span> <span class=o>{}</span> +</span></span></code></pre></td></tr></table></div></div><p><strong>Các option hay dùng của xargs:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-0              <span class=c1># Đọc input null-terminated</span>
</span></span><span class=line><span class=cl>-n NUM          <span class=c1># Tối đa NUM argument mỗi lệnh</span>
</span></span><span class=line><span class=cl>-P NUM          <span class=c1># Song song NUM process</span>
</span></span><span class=line><span class=cl>-I <span class=o>{}</span>           <span class=c1># Thay thế {} bằng input (chạy 1 input/lệnh)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl><span class=c1># Song song 4 process</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.gz&#34;</span> -print0 <span class=p>|</span> xargs -0 -P <span class=m>4</span> gunzip
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đặt argument ở vị trí tùy ý</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.txt&#34;</span> -print0 <span class=p>|</span> xargs -0 -I <span class=o>{}</span> cp <span class=o>{}</span> /backup/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giới hạn số file mỗi lệnh</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.log&#34;</span> -print0 <span class=p>|</span> xargs -0 -n <span class=m>100</span> tar -cvf logs.tar</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=17-tối-ưu-hiệu-năng><span>1.7 Tối Ưu Hiệu Năng</span>
<a href=#17-t%e1%bb%91i-%c6%b0u-hi%e1%bb%87u-n%c4%83ng class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Thứ tự test quan trọng:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># find đánh giá từ trái sang phải và short-circuit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CHẬM - stat() tất cả file trước khi lọc tên</span>
</span></span><span class=line><span class=cl>find . -size +1M -name <span class=s2>&#34;*.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># NHANH - lọc tên trước (chỉ cần readdir), sau đó mới stat()</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.log&#34;</span> -size +1M
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Nguyên tắc: Đặt test RẺ trước, test ĐẮT sau</span>
</span></span><span class=line><span class=cl><span class=c1># Rẻ: -name, -path, -type (chỉ cần readdir)</span>
</span></span><span class=line><span class=cl><span class=c1># Đắt: -size, -mtime, -perm (cần stat())</span></span></span></code></pre></td></tr></table></div></div><p><strong>Prune - Bỏ qua thư mục:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Bỏ qua thư mục .git</span>
</span></span><span class=line><span class=cl>find . -path <span class=s1>&#39;*/.git&#39;</span> -prune -o -name <span class=s2>&#34;*.py&#34;</span> -print
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giải thích:</span>
</span></span><span class=line><span class=cl><span class=c1># -path &#39;*/.git&#39; -prune  : Nếu là .git thì prune (bỏ qua)</span>
</span></span><span class=line><span class=cl><span class=c1># -o                     : Nếu không (OR)</span>
</span></span><span class=line><span class=cl><span class=c1># -name &#34;*.py&#34; -print    : Tìm file .py và in</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bỏ qua nhiều thư mục</span>
</span></span><span class=line><span class=cl>find . <span class=se>\(</span> -path <span class=s1>&#39;*/.git&#39;</span> -o -path <span class=s1>&#39;*/node_modules&#39;</span> -o -path <span class=s1>&#39;*/__pycache__&#39;</span> <span class=se>\)</span> -prune <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>       -o -name <span class=s2>&#34;*.py&#34;</span> -print
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cách đơn giản hơn với -not</span>
</span></span><span class=line><span class=cl>find . -not -path <span class=s1>&#39;*/.git/*&#39;</span> -name <span class=s2>&#34;*.py&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Nhưng CHẬM hơn vì vẫn duyệt vào .git rồi mới lọc</span></span></span></code></pre></td></tr></table></div></div><p><strong>Giới hạn filesystem:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-xdev           <span class=c1># Không đi qua filesystem khác</span>
</span></span><span class=line><span class=cl>-mount          <span class=c1># Tương tự -xdev</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ: Tìm trong / nhưng không đi vào mount point khác</span>
</span></span><span class=line><span class=cl>find / -xdev -name <span class=s2>&#34;*.conf&#34;</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=18-ví-dụ-thực-tế><span>1.8 Ví Dụ Thực Tế</span>
<a href=#18-v%c3%ad-d%e1%bb%a5-th%e1%bb%b1c-t%e1%ba%bf class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Tìm file lớn nhất trong hệ thống</span>
</span></span><span class=line><span class=cl>find / -type f -printf <span class=s1>&#39;%s %p\n&#39;</span> 2&gt;/dev/null <span class=p>|</span> sort -rn <span class=p>|</span> head -20
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm và xóa file cũ hơn 30 ngày</span>
</span></span><span class=line><span class=cl>find /var/log -name <span class=s2>&#34;*.log&#34;</span> -mtime +30 -delete
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm file sửa đổi trong 24h</span>
</span></span><span class=line><span class=cl>find /etc -mtime -1 -type f
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm file có permission lạ</span>
</span></span><span class=line><span class=cl>find /home -type f -perm /go+w          <span class=c1># Group hoặc other có write</span>
</span></span><span class=line><span class=cl>find / -type f -perm -4000 2&gt;/dev/null  <span class=c1># Setuid files</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đổi permission hàng loạt</span>
</span></span><span class=line><span class=cl>find . -type f -exec chmod <span class=m>644</span> <span class=o>{}</span> +
</span></span><span class=line><span class=cl>find . -type d -exec chmod <span class=m>755</span> <span class=o>{}</span> +
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm và nén log cũ</span>
</span></span><span class=line><span class=cl>find /var/log -name <span class=s2>&#34;*.log&#34;</span> -mtime +7 -exec gzip <span class=o>{}</span> <span class=se>\;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đếm số file theo extension</span>
</span></span><span class=line><span class=cl>find . -type f -name <span class=s1>&#39;*.*&#39;</span> <span class=p>|</span> sed <span class=s1>&#39;s/.*\.//&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -rn
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm file trùng lặp theo tên</span>
</span></span><span class=line><span class=cl>find . -type f -printf <span class=s1>&#39;%f\n&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -d
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm symlink bị hỏng</span>
</span></span><span class=line><span class=cl>find . -xtype l
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tính tổng dung lượng file .log</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.log&#34;</span> -printf <span class=s1>&#39;%s\n&#39;</span> <span class=p>|</span> awk <span class=s1>&#39;{sum+=$1} END {print sum}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Sao chép cấu trúc thư mục (không có file)</span>
</span></span><span class=line><span class=cl>find . -type d -exec mkdir -p /backup/<span class=o>{}</span> <span class=se>\;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm file theo nội dung (kết hợp grep)</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.py&#34;</span> -exec grep -l <span class=s2>&#34;import pandas&#34;</span> <span class=o>{}</span> +</span></span></code></pre></td></tr></table></div></div><hr><h2 class=heading-element id=phần-2-ln---liên-kết-file><span>PHẦN 2: LN - LIÊN KẾT FILE</span>
<a href=#ph%e1%ba%a7n-2-ln---li%c3%aan-k%e1%ba%bft-file class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=21-inode-và-cấu-trúc-filesystem><span>2.1 Inode và Cấu Trúc Filesystem</span>
<a href=#21-inode-v%c3%a0-c%e1%ba%a5u-tr%c3%bac-filesystem class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────────────────────────────────────────────────────────┐
</span></span><span class=line><span class=cl>│                   CẤU TRÚC FILESYSTEM                       │
</span></span><span class=line><span class=cl>└─────────────────────────────────────────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>┌─────────────────┐
</span></span><span class=line><span class=cl>│   DIRECTORY     │     Thư mục chỉ là bảng ánh xạ:
</span></span><span class=line><span class=cl>│   (thư mục)     │     tên file → inode number
</span></span><span class=line><span class=cl>├─────────────────┤
</span></span><span class=line><span class=cl>│ &#34;file.txt&#34; → 42 │
</span></span><span class=line><span class=cl>│ &#34;data.csv&#34; → 57 │
</span></span><span class=line><span class=cl>│ &#34;link&#34;     → 42 │──┐  (cùng inode = hard link)
</span></span><span class=line><span class=cl>└─────────────────┘  │
</span></span><span class=line><span class=cl>                     │
</span></span><span class=line><span class=cl>┌─────────────────┐  │
</span></span><span class=line><span class=cl>│   INODE 42      │◄─┘
</span></span><span class=line><span class=cl>│   (metadata)    │
</span></span><span class=line><span class=cl>├─────────────────┤
</span></span><span class=line><span class=cl>│ Type: file      │
</span></span><span class=line><span class=cl>│ Size: 1024      │
</span></span><span class=line><span class=cl>│ Permissions     │
</span></span><span class=line><span class=cl>│ Owner/Group     │
</span></span><span class=line><span class=cl>│ Timestamps      │
</span></span><span class=line><span class=cl>│ Link count: 2   │──── Số hard link trỏ đến inode này
</span></span><span class=line><span class=cl>│ Block pointers  │───┐
</span></span><span class=line><span class=cl>└─────────────────┘   │
</span></span><span class=line><span class=cl>                      │
</span></span><span class=line><span class=cl>┌─────────────────┐   │
</span></span><span class=line><span class=cl>│   DATA BLOCKS   │◄──┘
</span></span><span class=line><span class=cl>│   (nội dung)    │
</span></span><span class=line><span class=cl>├─────────────────┤
</span></span><span class=line><span class=cl>│ Actual file     │
</span></span><span class=line><span class=cl>│ content here    │
</span></span><span class=line><span class=cl>└─────────────────┘</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=22-hard-link-vs-symbolic-link><span>2.2 Hard Link vs Symbolic Link</span>
<a href=#22-hard-link-vs-symbolic-link class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌──────────────────┬─────────────────────┬─────────────────────┐
</span></span><span class=line><span class=cl>│ Đặc điểm         │ Hard Link           │ Symbolic Link       │
</span></span><span class=line><span class=cl>├──────────────────┼─────────────────────┼─────────────────────┤
</span></span><span class=line><span class=cl>│ Trỏ đến          │ Inode (trực tiếp)   │ Đường dẫn (chuỗi)   │
</span></span><span class=line><span class=cl>│ Cross filesystem │ KHÔNG               │ CÓ                  │
</span></span><span class=line><span class=cl>│ Link đến thư mục │ KHÔNG (trừ root)    │ CÓ                  │
</span></span><span class=line><span class=cl>│ File gốc bị xóa  │ Vẫn truy cập được   │ Link bị hỏng        │
</span></span><span class=line><span class=cl>│ Kích thước       │ Không tốn thêm      │ Tốn = độ dài path   │
</span></span><span class=line><span class=cl>│ Inode riêng      │ KHÔNG (dùng chung)  │ CÓ                  │
</span></span><span class=line><span class=cl>│ Phân biệt với gốc│ KHÔNG THỂ           │ ls -l thấy -&gt;       │
</span></span><span class=line><span class=cl>└──────────────────┴─────────────────────┴─────────────────────┘</span></span></code></pre></td></tr></table></div></div><p><strong>Minh họa:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Tạo file gốc</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;nội dung&#34;</span> &gt; original.txt
</span></span><span class=line><span class=cl>ls -li original.txt
</span></span><span class=line><span class=cl><span class=c1># 12345 -rw-r--r-- 1 user group 9 Jan 1 10:00 original.txt</span>
</span></span><span class=line><span class=cl><span class=c1>#   │               │</span>
</span></span><span class=line><span class=cl><span class=c1>#   │               └── Link count = 1</span>
</span></span><span class=line><span class=cl><span class=c1>#   └── Inode number</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tạo hard link</span>
</span></span><span class=line><span class=cl>ln original.txt hardlink.txt
</span></span><span class=line><span class=cl>ls -li original.txt hardlink.txt
</span></span><span class=line><span class=cl><span class=c1># 12345 -rw-r--r-- 2 user group 9 Jan 1 10:00 original.txt</span>
</span></span><span class=line><span class=cl><span class=c1># 12345 -rw-r--r-- 2 user group 9 Jan 1 10:00 hardlink.txt</span>
</span></span><span class=line><span class=cl><span class=c1>#   │               │</span>
</span></span><span class=line><span class=cl><span class=c1>#   │               └── Link count = 2 (cả hai)</span>
</span></span><span class=line><span class=cl><span class=c1>#   └── CÙNG inode</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tạo symbolic link</span>
</span></span><span class=line><span class=cl>ln -s original.txt symlink.txt
</span></span><span class=line><span class=cl>ls -li original.txt symlink.txt
</span></span><span class=line><span class=cl><span class=c1># 12345 -rw-r--r-- 2 user group 9  Jan 1 10:00 original.txt</span>
</span></span><span class=line><span class=cl><span class=c1># 67890 lrwxrwxrwx 1 user group 12 Jan 1 10:00 symlink.txt -&gt; original.txt</span>
</span></span><span class=line><span class=cl><span class=c1>#   │   │                       │</span>
</span></span><span class=line><span class=cl><span class=c1>#   │   │                       └── Kích thước = độ dài &#34;original.txt&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>#   │   └── l = symbolic link</span>
</span></span><span class=line><span class=cl><span class=c1>#   └── Inode KHÁC</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Xóa file gốc</span>
</span></span><span class=line><span class=cl>rm original.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hard link vẫn hoạt động (vì inode vẫn còn, link count = 1)</span>
</span></span><span class=line><span class=cl>cat hardlink.txt    <span class=c1># OK</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Symbolic link bị hỏng</span>
</span></span><span class=line><span class=cl>cat symlink.txt     <span class=c1># Error: No such file or directory</span>
</span></span><span class=line><span class=cl>ls -l symlink.txt   <span class=c1># Hiện màu đỏ (broken link)</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=23-cú-pháp-và-options><span>2.3 Cú Pháp và Options</span>
<a href=#23-c%c3%ba-ph%c3%a1p-v%c3%a0-options class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Hard link</span>
</span></span><span class=line><span class=cl>ln nguồn đích
</span></span><span class=line><span class=cl>ln nguồn... thư_mục/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Symbolic link</span>
</span></span><span class=line><span class=cl>ln -s nguồn đích
</span></span><span class=line><span class=cl>ln -s nguồn... thư_mục/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Options:</span>
</span></span><span class=line><span class=cl>-s          <span class=c1># Tạo symbolic link (mặc định là hard link)</span>
</span></span><span class=line><span class=cl>-f          <span class=c1># Force - ghi đè nếu đích tồn tại</span>
</span></span><span class=line><span class=cl>-n          <span class=c1># Không dereference đích nếu là symlink đến thư mục</span>
</span></span><span class=line><span class=cl>-r          <span class=c1># Tạo relative symlink (GNU)</span>
</span></span><span class=line><span class=cl>-v          <span class=c1># Verbose</span>
</span></span><span class=line><span class=cl>-i          <span class=c1># Interactive - hỏi trước khi ghi đè</span></span></span></code></pre></td></tr></table></div></div><p><strong>Relative vs Absolute symlink:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Absolute symlink - chứa đường dẫn tuyệt đối</span>
</span></span><span class=line><span class=cl>ln -s /home/user/projects/myapp/config.yaml /etc/myapp/config.yaml
</span></span><span class=line><span class=cl><span class=c1># /etc/myapp/config.yaml -&gt; /home/user/projects/myapp/config.yaml</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Relative symlink - chứa đường dẫn tương đối</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /etc/myapp
</span></span><span class=line><span class=cl>ln -s ../../home/user/projects/myapp/config.yaml config.yaml
</span></span><span class=line><span class=cl><span class=c1># config.yaml -&gt; ../../home/user/projects/myapp/config.yaml</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hoặc dùng -r (GNU ln)</span>
</span></span><span class=line><span class=cl>ln -sr /home/user/projects/myapp/config.yaml /etc/myapp/config.yaml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Relative symlink tốt hơn khi:</span>
</span></span><span class=line><span class=cl><span class=c1># - Di chuyển cả thư mục chứa link và target</span>
</span></span><span class=line><span class=cl><span class=c1># - Dùng trong container/chroot</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=24-khi-nào-dùng-cái-nào><span>2.4 Khi Nào Dùng Cái Nào</span>
<a href=#24-khi-n%c3%a0o-d%c3%b9ng-c%c3%a1i-n%c3%a0o class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Dùng Hard Link khi:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Backup tiết kiệm dung lượng (deduplication)</span>
</span></span><span class=line><span class=cl><span class=c1># Nhiều bản backup trỏ đến cùng data blocks</span>
</span></span><span class=line><span class=cl>cp -l file backup/file        <span class=c1># cp với hard link</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Bảo vệ file khỏi bị xóa nhầm</span>
</span></span><span class=line><span class=cl>ln important.txt important_backup.txt
</span></span><span class=line><span class=cl><span class=c1># Cần xóa CẢ HAI mới mất data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Atomic file update pattern</span>
</span></span><span class=line><span class=cl><span class=c1># Ghi vào file tạm, hard link vào vị trí cuối</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;new content&#34;</span> &gt; file.tmp
</span></span><span class=line><span class=cl>ln file.tmp file.txt          <span class=c1># Atomic trên hầu hết filesystem</span>
</span></span><span class=line><span class=cl>rm file.tmp</span></span></code></pre></td></tr></table></div></div><p><strong>Dùng Symbolic Link khi:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Link đến thư mục</span>
</span></span><span class=line><span class=cl>ln -s /mnt/data/large_dataset ~/data
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Link cross filesystem</span>
</span></span><span class=line><span class=cl>ln -s /mnt/usb/file.txt ~/file.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Link đến file có thể thay đổi vị trí</span>
</span></span><span class=line><span class=cl>ln -s /opt/myapp-1.0 /opt/myapp
</span></span><span class=line><span class=cl><span class=c1># Upgrade: rm /opt/myapp &amp;&amp; ln -s /opt/myapp-2.0 /opt/myapp</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. Configuration management</span>
</span></span><span class=line><span class=cl>ln -s /etc/nginx/sites-available/mysite /etc/nginx/sites-enabled/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. Thư viện versioned</span>
</span></span><span class=line><span class=cl>libfoo.so -&gt; libfoo.so.1
</span></span><span class=line><span class=cl>libfoo.so.1 -&gt; libfoo.so.1.2.3</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=25-troubleshooting><span>2.5 Troubleshooting</span>
<a href=#25-troubleshooting class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Tìm tất cả hard link của một file</span>
</span></span><span class=line><span class=cl>find / -samefile file.txt 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hoặc bằng inode</span>
</span></span><span class=line><span class=cl>ls -i file.txt                           <span class=c1># Lấy inode</span>
</span></span><span class=line><span class=cl>find / -inum <span class=m>12345</span> 2&gt;/dev/null           <span class=c1># Tìm theo inode</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm symbolic link bị hỏng</span>
</span></span><span class=line><span class=cl>find . -xtype l
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm symbolic link trỏ đến target cụ thể</span>
</span></span><span class=line><span class=cl>find . -lname <span class=s1>&#39;*pattern*&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Xem symlink trỏ đến đâu</span>
</span></span><span class=line><span class=cl>readlink symlink.txt                     <span class=c1># Chỉ target trực tiếp</span>
</span></span><span class=line><span class=cl>readlink -f symlink.txt                  <span class=c1># Resolve đến file cuối cùng</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kiểm tra file có phải symlink không</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -L <span class=s2>&#34;file&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Là symlink&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kiểm tra symlink có hỏng không</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -L <span class=s2>&#34;file&#34;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=o>[</span> ! -e <span class=s2>&#34;file&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Symlink bị hỏng&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=26-ví-dụ-thực-tế><span>2.6 Ví Dụ Thực Tế</span>
<a href=#26-v%c3%ad-d%e1%bb%a5-th%e1%bb%b1c-t%e1%ba%bf class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Quản lý dotfiles với symlink</span>
</span></span><span class=line><span class=cl>ln -sf ~/dotfiles/.bashrc ~/.bashrc
</span></span><span class=line><span class=cl>ln -sf ~/dotfiles/.vimrc ~/.vimrc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Blue-green deployment</span>
</span></span><span class=line><span class=cl>ln -sfn /var/www/app-v2 /var/www/current
</span></span><span class=line><span class=cl><span class=c1># -n: Không follow symlink nếu current đã là symlink đến thư mục</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tạo backup với hard link (rsync style)</span>
</span></span><span class=line><span class=cl>cp -al /backup/daily.0 /backup/daily.1
</span></span><span class=line><span class=cl>rsync -a --delete /source/ /backup/daily.0/
</span></span><span class=line><span class=cl><span class=c1># -l: Hard link thay vì copy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm và liệt kê tất cả symlink trong thư mục</span>
</span></span><span class=line><span class=cl>find /etc -type l -printf <span class=s1>&#39;%p -&gt; %l\n&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Chuyển absolute symlink thành relative</span>
</span></span><span class=line><span class=cl><span class=c1># (cần package symlinks)</span>
</span></span><span class=line><span class=cl>symlinks -cr /path/to/dir</span></span></code></pre></td></tr></table></div></div><hr><h2 class=heading-element id=phần-3-lsof---liệt-kê-file-đang-mở><span>PHẦN 3: LSOF - LIỆT KÊ FILE ĐANG MỞ</span>
<a href=#ph%e1%ba%a7n-3-lsof---li%e1%bb%87t-k%c3%aa-file-%c4%91ang-m%e1%bb%9f class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=31-file-descriptor-và-proc><span>3.1 File Descriptor và /proc</span>
<a href=#31-file-descriptor-v%c3%a0-proc class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=err>┌─────────────────────────────────────────────────────────────┐</span>
</span></span><span class=line><span class=cl><span class=err>│</span>                  <span class=n>FILE</span> <span class=n>DESCRIPTOR</span> <span class=p>(</span><span class=n>FD</span><span class=p>)</span>                       <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>└─────────────────────────────────────────────────────────────┘</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Mỗi</span> <span class=n>process</span> <span class=n>có</span> <span class=n>bảng</span> <span class=n>file</span> <span class=n>descriptor</span> <span class=n>riêng</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Process</span> <span class=p>(</span><span class=n>PID</span> <span class=mi>1234</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=err>┌─────────────────────────────┐</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=ne>File</span> <span class=n>Descriptor</span> <span class=n>Table</span>       <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>├──────┬──────────────────────┤</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>FD</span> <span class=mi>0</span> <span class=err>│</span> <span class=err>→</span> <span class=n>stdin</span>  <span class=p>(</span><span class=n>terminal</span><span class=p>)</span>  <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>FD</span> <span class=mi>1</span> <span class=err>│</span> <span class=err>→</span> <span class=n>stdout</span> <span class=p>(</span><span class=n>terminal</span><span class=p>)</span>  <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>FD</span> <span class=mi>2</span> <span class=err>│</span> <span class=err>→</span> <span class=n>stderr</span> <span class=p>(</span><span class=n>terminal</span><span class=p>)</span>  <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>FD</span> <span class=mi>3</span> <span class=err>│</span> <span class=err>→</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=nb>log</span><span class=o>/</span><span class=n>app</span><span class=o>.</span><span class=n>log</span>   <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>FD</span> <span class=mi>4</span> <span class=err>│</span> <span class=err>→</span> <span class=n>socket</span> <span class=p>(</span><span class=n>TCP</span><span class=p>:</span><span class=mi>8080</span><span class=p>)</span>  <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>FD</span> <span class=mi>5</span> <span class=err>│</span> <span class=err>→</span> <span class=o>/</span><span class=n>tmp</span><span class=o>/</span><span class=n>data</span><span class=o>.</span><span class=n>tmp</span>      <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>└──────┴──────────────────────┘</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Xem</span> <span class=n>trong</span> <span class=o>/</span><span class=n>proc</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=o>$</span> <span class=n>ls</span> <span class=o>-</span><span class=n>l</span> <span class=o>/</span><span class=n>proc</span><span class=o>/</span><span class=mi>1234</span><span class=o>/</span><span class=n>fd</span><span class=o>/</span>
</span></span><span class=line><span class=cl><span class=n>lrwx</span><span class=o>------</span> <span class=mi>1</span> <span class=n>user</span> <span class=n>user</span> <span class=mi>0</span> <span class=n>Jan</span> <span class=mi>1</span> <span class=mi>10</span><span class=p>:</span><span class=mi>00</span> <span class=mi>0</span> <span class=o>-&gt;</span> <span class=o>/</span><span class=n>dev</span><span class=o>/</span><span class=n>pts</span><span class=o>/</span><span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>lrwx</span><span class=o>------</span> <span class=mi>1</span> <span class=n>user</span> <span class=n>user</span> <span class=mi>0</span> <span class=n>Jan</span> <span class=mi>1</span> <span class=mi>10</span><span class=p>:</span><span class=mi>00</span> <span class=mi>1</span> <span class=o>-&gt;</span> <span class=o>/</span><span class=n>dev</span><span class=o>/</span><span class=n>pts</span><span class=o>/</span><span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>lrwx</span><span class=o>------</span> <span class=mi>1</span> <span class=n>user</span> <span class=n>user</span> <span class=mi>0</span> <span class=n>Jan</span> <span class=mi>1</span> <span class=mi>10</span><span class=p>:</span><span class=mi>00</span> <span class=mi>2</span> <span class=o>-&gt;</span> <span class=o>/</span><span class=n>dev</span><span class=o>/</span><span class=n>pts</span><span class=o>/</span><span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>l</span><span class=o>-</span><span class=n>wx</span><span class=o>------</span> <span class=mi>1</span> <span class=n>user</span> <span class=n>user</span> <span class=mi>0</span> <span class=n>Jan</span> <span class=mi>1</span> <span class=mi>10</span><span class=p>:</span><span class=mi>00</span> <span class=mi>3</span> <span class=o>-&gt;</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=nb>log</span><span class=o>/</span><span class=n>app</span><span class=o>.</span><span class=n>log</span>
</span></span><span class=line><span class=cl><span class=n>lrwx</span><span class=o>------</span> <span class=mi>1</span> <span class=n>user</span> <span class=n>user</span> <span class=mi>0</span> <span class=n>Jan</span> <span class=mi>1</span> <span class=mi>10</span><span class=p>:</span><span class=mi>00</span> <span class=mi>4</span> <span class=o>-&gt;</span> <span class=n>socket</span><span class=p>:[</span><span class=mi>12345</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>lrwx</span><span class=o>------</span> <span class=mi>1</span> <span class=n>user</span> <span class=n>user</span> <span class=mi>0</span> <span class=n>Jan</span> <span class=mi>1</span> <span class=mi>10</span><span class=p>:</span><span class=mi>00</span> <span class=mi>5</span> <span class=o>-&gt;</span> <span class=o>/</span><span class=n>tmp</span><span class=o>/</span><span class=n>data</span><span class=o>.</span><span class=n>tmp</span></span></span></code></pre></td></tr></table></div></div><p><strong>lsof đọc từ /proc:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># lsof về cơ bản parse thông tin từ:</span>
</span></span><span class=line><span class=cl>/proc/<span class=o>[</span>pid<span class=o>]</span>/fd/          <span class=c1># File descriptors</span>
</span></span><span class=line><span class=cl>/proc/<span class=o>[</span>pid<span class=o>]</span>/maps         <span class=c1># Memory-mapped files</span>
</span></span><span class=line><span class=cl>/proc/<span class=o>[</span>pid<span class=o>]</span>/cwd          <span class=c1># Current working directory</span>
</span></span><span class=line><span class=cl>/proc/<span class=o>[</span>pid<span class=o>]</span>/exe          <span class=c1># Executable</span>
</span></span><span class=line><span class=cl>/proc/net/tcp            <span class=c1># TCP connections</span>
</span></span><span class=line><span class=cl>/proc/net/udp            <span class=c1># UDP connections</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=32-cú-pháp-cơ-bản><span>3.2 Cú Pháp Cơ Bản</span>
<a href=#32-c%c3%ba-ph%c3%a1p-c%c6%a1-b%e1%ba%a3n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lsof <span class=o>[</span>options<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Không có option: Liệt kê TẤT CẢ file đang mở</span>
</span></span><span class=line><span class=cl><span class=c1># (rất nhiều output, thường phải lọc)</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=33-lọc-theo-các-tiêu-chí><span>3.3 Lọc Theo Các Tiêu Chí</span>
<a href=#33-l%e1%bb%8dc-theo-c%c3%a1c-ti%c3%aau-ch%c3%ad class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Theo file/thư mục:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># File cụ thể</span>
</span></span><span class=line><span class=cl>lsof /var/log/syslog
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Thư mục (tất cả file trong đó)</span>
</span></span><span class=line><span class=cl>lsof +D /var/log              <span class=c1># Không đệ quy</span>
</span></span><span class=line><span class=cl>lsof +d /var/log              <span class=c1># Chỉ mức này</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Mount point</span>
</span></span><span class=line><span class=cl>lsof /mnt/usb
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># File bị xóa nhưng còn mở (disk space không được giải phóng)</span>
</span></span><span class=line><span class=cl>lsof <span class=p>|</span> grep deleted
</span></span><span class=line><span class=cl>lsof +L1                       <span class=c1># File có link count &lt; 1 (đã xóa)</span></span></span></code></pre></td></tr></table></div></div><p><strong>Theo process:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Theo PID</span>
</span></span><span class=line><span class=cl>lsof -p <span class=m>1234</span>
</span></span><span class=line><span class=cl>lsof -p 1234,5678             <span class=c1># Nhiều PID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Theo tên process</span>
</span></span><span class=line><span class=cl>lsof -c nginx                  <span class=c1># Process bắt đầu bằng &#34;nginx&#34;</span>
</span></span><span class=line><span class=cl>lsof -c nginx -c apache        <span class=c1># OR</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Theo user</span>
</span></span><span class=line><span class=cl>lsof -u root
</span></span><span class=line><span class=cl>lsof -u john,jane              <span class=c1># Nhiều user</span>
</span></span><span class=line><span class=cl>lsof -u ^root                  <span class=c1># Không phải root</span></span></span></code></pre></td></tr></table></div></div><p><strong>Theo network:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Tất cả network connections</span>
</span></span><span class=line><span class=cl>lsof -i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Theo protocol</span>
</span></span><span class=line><span class=cl>lsof -i tcp
</span></span><span class=line><span class=cl>lsof -i udp
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Theo port</span>
</span></span><span class=line><span class=cl>lsof -i :80                    <span class=c1># Port 80 (cả tcp và udp)</span>
</span></span><span class=line><span class=cl>lsof -i tcp:80                 <span class=c1># Chỉ TCP port 80</span>
</span></span><span class=line><span class=cl>lsof -i :80-100                <span class=c1># Range port</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Theo địa chỉ</span>
</span></span><span class=line><span class=cl>lsof -i @192.168.1.1
</span></span><span class=line><span class=cl>lsof -i @192.168.1.1:22
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Theo trạng thái</span>
</span></span><span class=line><span class=cl>lsof -i -sTCP:LISTEN           <span class=c1># Chỉ LISTENING</span>
</span></span><span class=line><span class=cl>lsof -i -sTCP:ESTABLISHED      <span class=c1># Chỉ ESTABLISHED</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># IPv4 hoặc IPv6</span>
</span></span><span class=line><span class=cl>lsof -i <span class=m>4</span>                      <span class=c1># Chỉ IPv4</span>
</span></span><span class=line><span class=cl>lsof -i <span class=m>6</span>                      <span class=c1># Chỉ IPv6</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=34-output-format><span>3.4 Output Format</span>
<a href=#34-output-format class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Output mặc định:</span>
</span></span><span class=line><span class=cl>COMMAND  PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
</span></span><span class=line><span class=cl>nginx   <span class=m>1234</span>   root  cwd    DIR  253,1     <span class=m>4096</span>    <span class=m>2</span> /
</span></span><span class=line><span class=cl>nginx   <span class=m>1234</span>   root  txt    REG  253,1   <span class=m>123456</span>  <span class=m>123</span> /usr/sbin/nginx
</span></span><span class=line><span class=cl>nginx   <span class=m>1234</span>   root    3u   REG  253,1     <span class=m>1234</span>  <span class=m>456</span> /var/log/nginx/access.log
</span></span><span class=line><span class=cl>nginx   <span class=m>1234</span>   root    4u  IPv4  <span class=m>12345</span>      0t0  TCP *:80 <span class=o>(</span>LISTEN<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giải thích cột:</span>
</span></span><span class=line><span class=cl><span class=c1># COMMAND: Tên process</span>
</span></span><span class=line><span class=cl><span class=c1># PID: Process ID</span>
</span></span><span class=line><span class=cl><span class=c1># USER: Owner</span>
</span></span><span class=line><span class=cl><span class=c1># FD: File Descriptor</span>
</span></span><span class=line><span class=cl><span class=c1>#     cwd = current working directory</span>
</span></span><span class=line><span class=cl><span class=c1>#     txt = program text (executable)</span>
</span></span><span class=line><span class=cl><span class=c1>#     mem = memory-mapped file</span>
</span></span><span class=line><span class=cl><span class=c1>#     rtd = root directory</span>
</span></span><span class=line><span class=cl><span class=c1>#     0u, 1u, 2u... = FD number (u=read/write, r=read, w=write)</span>
</span></span><span class=line><span class=cl><span class=c1># TYPE: Loại file</span>
</span></span><span class=line><span class=cl><span class=c1>#     REG = regular file</span>
</span></span><span class=line><span class=cl><span class=c1>#     DIR = directory</span>
</span></span><span class=line><span class=cl><span class=c1>#     CHR = character device</span>
</span></span><span class=line><span class=cl><span class=c1>#     BLK = block device</span>
</span></span><span class=line><span class=cl><span class=c1>#     IPv4/IPv6 = network</span>
</span></span><span class=line><span class=cl><span class=c1>#     unix = UNIX domain socket</span>
</span></span><span class=line><span class=cl><span class=c1># DEVICE: Device numbers</span>
</span></span><span class=line><span class=cl><span class=c1># SIZE/OFF: File size hoặc offset</span>
</span></span><span class=line><span class=cl><span class=c1># NODE: Inode number</span>
</span></span><span class=line><span class=cl><span class=c1># NAME: File name hoặc network address</span></span></span></code></pre></td></tr></table></div></div><p><strong>Tùy chỉnh output:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Chỉ hiện PID</span>
</span></span><span class=line><span class=cl>lsof -t /var/log/syslog
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Không header</span>
</span></span><span class=line><span class=cl>lsof -t -i :80
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Field separator</span>
</span></span><span class=line><span class=cl>lsof -F                        <span class=c1># Output cho parsing</span>
</span></span><span class=line><span class=cl>lsof -Fp                       <span class=c1># Chỉ PID field</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output fields:</span>
</span></span><span class=line><span class=cl><span class=c1># p = PID</span>
</span></span><span class=line><span class=cl><span class=c1># c = command</span>
</span></span><span class=line><span class=cl><span class=c1># u = user</span>
</span></span><span class=line><span class=cl><span class=c1># f = fd</span>
</span></span><span class=line><span class=cl><span class=c1># t = type</span>
</span></span><span class=line><span class=cl><span class=c1># n = name</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=35-kết-hợp-điều-kiện><span>3.5 Kết Hợp Điều Kiện</span>
<a href=#35-k%e1%ba%bft-h%e1%bb%a3p-%c4%91i%e1%bb%81u-ki%e1%bb%87n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Mặc định: OR (lsof -u root -c nginx = root OR nginx)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Dùng -a cho AND</span>
</span></span><span class=line><span class=cl>lsof -a -u root -c nginx       <span class=c1># root AND nginx</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl><span class=c1># File đang mở bởi nginx và là network connection</span>
</span></span><span class=line><span class=cl>lsof -a -c nginx -i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># File đang mở bởi root trên port 80</span>
</span></span><span class=line><span class=cl>lsof -a -u root -i :80</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=36-use-cases-thực-tế><span>3.6 Use Cases Thực Tế</span>
<a href=#36-use-cases-th%e1%bb%b1c-t%e1%ba%bf class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Tìm process chiếm port:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Ai đang dùng port 80?</span>
</span></span><span class=line><span class=cl>lsof -i :80
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cần kill process để free port</span>
</span></span><span class=line><span class=cl><span class=nb>kill</span> <span class=k>$(</span>lsof -t -i :80<span class=k>)</span></span></span></code></pre></td></tr></table></div></div><p><strong>Tại sao không umount được?</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Device busy</span>
</span></span><span class=line><span class=cl>umount /mnt/usb
</span></span><span class=line><span class=cl><span class=c1># umount: /mnt/usb: device is busy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm process nào đang dùng</span>
</span></span><span class=line><span class=cl>lsof +D /mnt/usb
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kill và retry</span>
</span></span><span class=line><span class=cl><span class=nb>kill</span> <span class=k>$(</span>lsof -t +D /mnt/usb<span class=k>)</span>
</span></span><span class=line><span class=cl>umount /mnt/usb</span></span></code></pre></td></tr></table></div></div><p><strong>Tại sao disk đầy mà xóa file không giảm?</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># File bị xóa nhưng còn process đang mở</span>
</span></span><span class=line><span class=cl>lsof <span class=p>|</span> grep deleted
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Output:</span>
</span></span><span class=line><span class=cl><span class=c1># nginx 1234 root 5w REG 253,1 50000000 789 /var/log/large.log (deleted)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 50MB file đã xóa nhưng nginx còn mở</span>
</span></span><span class=line><span class=cl><span class=c1># Cách fix: restart nginx hoặc</span>
</span></span><span class=line><span class=cl><span class=c1># Truncate file qua /proc</span>
</span></span><span class=line><span class=cl>: &gt; /proc/1234/fd/5</span></span></code></pre></td></tr></table></div></div><p><strong>Monitor network connections:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Xem tất cả connection của một process</span>
</span></span><span class=line><span class=cl>lsof -a -p <span class=k>$(</span>pgrep nginx<span class=k>)</span> -i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đếm connection theo trạng thái</span>
</span></span><span class=line><span class=cl>lsof -i -sTCP:ESTABLISHED <span class=p>|</span> wc -l
</span></span><span class=line><span class=cl>lsof -i -sTCP:TIME_WAIT <span class=p>|</span> wc -l
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Real-time monitoring (với watch)</span>
</span></span><span class=line><span class=cl>watch -n <span class=m>1</span> <span class=s1>&#39;lsof -i -sTCP:ESTABLISHED | wc -l&#39;</span></span></span></code></pre></td></tr></table></div></div><p><strong>Debug application:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Xem process đang đọc/ghi file nào</span>
</span></span><span class=line><span class=cl>lsof -p <span class=k>$(</span>pgrep myapp<span class=k>)</span> <span class=p>|</span> grep -E <span class=s1>&#39;REG|DIR&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Xem config file nào được load</span>
</span></span><span class=line><span class=cl>lsof -p <span class=k>$(</span>pgrep myapp<span class=k>)</span> <span class=p>|</span> grep -E <span class=s1>&#39;\.conf|\.cfg|\.ini|\.yaml&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Xem library nào được load</span>
</span></span><span class=line><span class=cl>lsof -p <span class=k>$(</span>pgrep myapp<span class=k>)</span> <span class=p>|</span> grep <span class=s1>&#39;\.so&#39;</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=37-repeat-mode><span>3.7 Repeat Mode</span>
<a href=#37-repeat-mode class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Chạy lặp lại mỗi 2 giây</span>
</span></span><span class=line><span class=cl>lsof -r <span class=m>2</span> -i :80
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Chạy cho đến khi không còn kết quả</span>
</span></span><span class=line><span class=cl>lsof +r <span class=m>2</span> -i :80
</span></span><span class=line><span class=cl><span class=c1># Dừng khi port 80 được giải phóng</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hữu ích cho việc chờ port free</span>
</span></span><span class=line><span class=cl>lsof +r <span class=m>1</span> -i :3000 <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;Port 3000 is now free&#34;</span></span></span></code></pre></td></tr></table></div></div><hr><h2 class=heading-element id=phần-4-tar---archive-và-nén><span>PHẦN 4: TAR - ARCHIVE VÀ NÉN</span>
<a href=#ph%e1%ba%a7n-4-tar---archive-v%c3%a0-n%c3%a9n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=41-cấu-trúc-tar-archive><span>4.1 Cấu Trúc TAR Archive</span>
<a href=#41-c%e1%ba%a5u-tr%c3%bac-tar-archive class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────────────────────────────────────────────────────────┐
</span></span><span class=line><span class=cl>│                   CẤU TRÚC TAR FORMAT                       │
</span></span><span class=line><span class=cl>└─────────────────────────────────────────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>TAR = Tape ARchive (từ thời băng từ)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>┌─────────────────────────────────────────────────────────────┐
</span></span><span class=line><span class=cl>│                    archive.tar                              │
</span></span><span class=line><span class=cl>├─────────────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ ┌─────────────┐ ┌─────────────────────────────────────────┐ │
</span></span><span class=line><span class=cl>│ │   Header    │ │              Data Blocks                │ │
</span></span><span class=line><span class=cl>│ │   512 bytes │ │          (rounded to 512 bytes)         │ │
</span></span><span class=line><span class=cl>│ │             │ │                                         │ │
</span></span><span class=line><span class=cl>│ │ - filename  │ │         File 1 content                  │ │
</span></span><span class=line><span class=cl>│ │ - mode      │ │                                         │ │
</span></span><span class=line><span class=cl>│ │ - uid/gid   │ │                                         │ │
</span></span><span class=line><span class=cl>│ │ - size      │ │                                         │ │
</span></span><span class=line><span class=cl>│ │ - mtime     │ │                                         │ │
</span></span><span class=line><span class=cl>│ │ - checksum  │ │                                         │ │
</span></span><span class=line><span class=cl>│ │ - type      │ │                                         │ │
</span></span><span class=line><span class=cl>│ └─────────────┘ └─────────────────────────────────────────┘ │
</span></span><span class=line><span class=cl>├─────────────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ ┌─────────────┐ ┌─────────────────────────────────────────┐ │
</span></span><span class=line><span class=cl>│ │   Header    │ │              Data Blocks                │ │
</span></span><span class=line><span class=cl>│ │   File 2    │ │         File 2 content                  │ │
</span></span><span class=line><span class=cl>│ └─────────────┘ └─────────────────────────────────────────┘ │
</span></span><span class=line><span class=cl>├─────────────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│                         ...                                 │
</span></span><span class=line><span class=cl>├─────────────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ ┌─────────────────────────────────────────────────────────┐ │
</span></span><span class=line><span class=cl>│ │           End-of-archive (2 x 512 zero blocks)          │ │
</span></span><span class=line><span class=cl>│ └─────────────────────────────────────────────────────────┘ │
</span></span><span class=line><span class=cl>└─────────────────────────────────────────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Đặc điểm:
</span></span><span class=line><span class=cl>- KHÔNG nén (chỉ gom file)
</span></span><span class=line><span class=cl>- Preserves: permissions, ownership, timestamps, symlinks
</span></span><span class=line><span class=cl>- Sequential access (không random access)
</span></span><span class=line><span class=cl>- Có thể append vào cuối</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=42-các-thuật-toán-nén><span>4.2 Các Thuật Toán Nén</span>
<a href=#42-c%c3%a1c-thu%e1%ba%adt-to%c3%a1n-n%c3%a9n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌──────────┬────────────┬───────────┬──────────┬────────────────┐
</span></span><span class=line><span class=cl>│ Thuật    │ Extension  │ Tỷ lệ nén │ Tốc độ   │ Ghi chú        │
</span></span><span class=line><span class=cl>│ toán     │            │           │          │                │
</span></span><span class=line><span class=cl>├──────────┼────────────┼───────────┼──────────┼────────────────┤
</span></span><span class=line><span class=cl>│ gzip     │ .tar.gz    │ Trung     │ Nhanh    │ Phổ biến nhất  │
</span></span><span class=line><span class=cl>│          │ .tgz       │ bình      │          │                │
</span></span><span class=line><span class=cl>├──────────┼────────────┼───────────┼──────────┼────────────────┤
</span></span><span class=line><span class=cl>│ bzip2    │ .tar.bz2   │ Tốt hơn   │ Chậm hơn │ CPU intensive  │
</span></span><span class=line><span class=cl>│          │ .tbz2      │ gzip      │ gzip     │                │
</span></span><span class=line><span class=cl>├──────────┼────────────┼───────────┼──────────┼────────────────┤
</span></span><span class=line><span class=cl>│ xz       │ .tar.xz    │ Tốt nhất  │ Chậm nhất│ Dùng cho phân  │
</span></span><span class=line><span class=cl>│          │ .txz       │           │          │ phối software  │
</span></span><span class=line><span class=cl>├──────────┼────────────┼───────────┼──────────┼────────────────┤
</span></span><span class=line><span class=cl>│ zstd     │ .tar.zst   │ Rất tốt   │ Rất      │ Modern, được   │
</span></span><span class=line><span class=cl>│          │            │           │ nhanh    │ recommend      │
</span></span><span class=line><span class=cl>├──────────┼────────────┼───────────┼──────────┼────────────────┤
</span></span><span class=line><span class=cl>│ lz4      │ .tar.lz4   │ Thấp      │ Cực      │ Khi cần tốc độ │
</span></span><span class=line><span class=cl>│          │            │           │ nhanh    │                │
</span></span><span class=line><span class=cl>└──────────┴────────────┴───────────┴──────────┴────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Benchmark (file text 1GB):
</span></span><span class=line><span class=cl>         Nén        Giải nén    Kích thước
</span></span><span class=line><span class=cl>gzip:    ~30s       ~10s        ~300MB
</span></span><span class=line><span class=cl>bzip2:   ~120s      ~40s        ~250MB
</span></span><span class=line><span class=cl>xz:      ~300s      ~30s        ~200MB
</span></span><span class=line><span class=cl>zstd:    ~15s       ~5s         ~280MB
</span></span><span class=line><span class=cl>lz4:     ~3s        ~1s         ~450MB</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=43-cú-pháp-và-operations><span>4.3 Cú Pháp và Operations</span>
<a href=#43-c%c3%ba-ph%c3%a1p-v%c3%a0-operations class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Ba operation chính:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-c, --create        <span class=c1># Tạo archive</span>
</span></span><span class=line><span class=cl>-x, --extract       <span class=c1># Giải nén archive</span>
</span></span><span class=line><span class=cl>-t, --list          <span class=c1># Liệt kê nội dung archive</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Các option khác:</span>
</span></span><span class=line><span class=cl>-f, --file          <span class=c1># Chỉ định tên file archive</span>
</span></span><span class=line><span class=cl>-v, --verbose       <span class=c1># Hiện tiến trình</span>
</span></span><span class=line><span class=cl>-z                  <span class=c1># Nén/giải nén với gzip</span>
</span></span><span class=line><span class=cl>-j                  <span class=c1># Nén/giải nén với bzip2</span>
</span></span><span class=line><span class=cl>-J                  <span class=c1># Nén/giải nén với xz</span>
</span></span><span class=line><span class=cl>--zstd              <span class=c1># Nén/giải nén với zstd</span>
</span></span><span class=line><span class=cl>-a, --auto-compress <span class=c1># Tự detect từ extension</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=44-tạo-archive><span>4.4 Tạo Archive</span>
<a href=#44-t%e1%ba%a1o-archive class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Tạo tar (không nén)</span>
</span></span><span class=line><span class=cl>tar -cvf archive.tar file1 file2 dir/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tạo tar.gz (gzip)</span>
</span></span><span class=line><span class=cl>tar -czvf archive.tar.gz file1 file2 dir/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tạo tar.bz2 (bzip2)</span>
</span></span><span class=line><span class=cl>tar -cjvf archive.tar.bz2 file1 file2 dir/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tạo tar.xz (xz)</span>
</span></span><span class=line><span class=cl>tar -cJvf archive.tar.xz file1 file2 dir/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tạo với zstd</span>
</span></span><span class=line><span class=cl>tar --zstd -cvf archive.tar.zst file1 file2 dir/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Auto-detect từ extension</span>
</span></span><span class=line><span class=cl>tar -cavf archive.tar.gz file1 file2   <span class=c1># Tự dùng gzip</span>
</span></span><span class=line><span class=cl>tar -cavf archive.tar.xz file1 file2   <span class=c1># Tự dùng xz</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Điều chỉnh mức nén</span>
</span></span><span class=line><span class=cl><span class=nv>GZIP</span><span class=o>=</span>-9 tar -czvf archive.tar.gz dir/           <span class=c1># gzip max compression</span>
</span></span><span class=line><span class=cl><span class=nv>XZ_OPT</span><span class=o>=</span>-9 tar -cJvf archive.tar.xz dir/         <span class=c1># xz max compression</span>
</span></span><span class=line><span class=cl>tar --zstd -cvf archive.tar.zst --options zstd:compression-level<span class=o>=</span><span class=m>19</span> dir/</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=45-giải-nén-archive><span>4.5 Giải Nén Archive</span>
<a href=#45-gi%e1%ba%a3i-n%c3%a9n-archive class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Giải nén (auto-detect compression)</span>
</span></span><span class=line><span class=cl>tar -xvf archive.tar.gz
</span></span><span class=line><span class=cl>tar -xvf archive.tar.bz2
</span></span><span class=line><span class=cl>tar -xvf archive.tar.xz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giải nén vào thư mục khác</span>
</span></span><span class=line><span class=cl>tar -xvf archive.tar.gz -C /path/to/destination/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giải nén file cụ thể</span>
</span></span><span class=line><span class=cl>tar -xvf archive.tar.gz path/to/file.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giải nén theo pattern</span>
</span></span><span class=line><span class=cl>tar -xvf archive.tar.gz --wildcards <span class=s1>&#39;*.txt&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giữ nguyên permissions (cần root)</span>
</span></span><span class=line><span class=cl>tar -xvpf archive.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Không ghi đè file mới hơn</span>
</span></span><span class=line><span class=cl>tar -xvf archive.tar.gz --keep-newer-files
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Strip leading directories</span>
</span></span><span class=line><span class=cl>tar -xvf archive.tar.gz --strip-components<span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=c1># Nếu archive chứa: myapp-1.0/src/file.txt</span>
</span></span><span class=line><span class=cl><span class=c1># Kết quả: src/file.txt (bỏ myapp-1.0/)</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=46-liệt-kê-nội-dung><span>4.6 Liệt Kê Nội Dung</span>
<a href=#46-li%e1%bb%87t-k%c3%aa-n%e1%bb%99i-dung class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Liệt kê đơn giản</span>
</span></span><span class=line><span class=cl>tar -tvf archive.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Liệt kê chi tiết</span>
</span></span><span class=line><span class=cl>tar -tvvf archive.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm file cụ thể</span>
</span></span><span class=line><span class=cl>tar -tvf archive.tar.gz <span class=p>|</span> grep <span class=s1>&#39;pattern&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Chỉ liệt kê tên file</span>
</span></span><span class=line><span class=cl>tar -tf archive.tar.gz</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=47-tính-năng-nâng-cao><span>4.7 Tính Năng Nâng Cao</span>
<a href=#47-t%c3%adnh-n%c4%83ng-n%c3%a2ng-cao class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Exclude files:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Exclude pattern</span>
</span></span><span class=line><span class=cl>tar -czvf archive.tar.gz --exclude<span class=o>=</span><span class=s1>&#39;*.log&#39;</span> --exclude<span class=o>=</span><span class=s1>&#39;*.tmp&#39;</span> dir/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Exclude từ file</span>
</span></span><span class=line><span class=cl>cat &gt; exclude.txt <span class=s>&lt;&lt; &#39;EOF&#39;
</span></span></span><span class=line><span class=cl><span class=s>*.log
</span></span></span><span class=line><span class=cl><span class=s>*.tmp
</span></span></span><span class=line><span class=cl><span class=s>.git
</span></span></span><span class=line><span class=cl><span class=s>node_modules
</span></span></span><span class=line><span class=cl><span class=s>__pycache__
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>tar -czvf archive.tar.gz --exclude-from<span class=o>=</span>exclude.txt dir/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Exclude VCS directories</span>
</span></span><span class=line><span class=cl>tar -czvf archive.tar.gz --exclude-vcs dir/</span></span></code></pre></td></tr></table></div></div><p><strong>Incremental backup:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Level 0 (full backup)</span>
</span></span><span class=line><span class=cl>tar -czvf backup-full.tar.gz -g snapshot.snar /data/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Level 1 (incremental - chỉ file thay đổi)</span>
</span></span><span class=line><span class=cl>tar -czvf backup-inc1.tar.gz -g snapshot.snar /data/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Restore (phải theo thứ tự)</span>
</span></span><span class=line><span class=cl>tar -xvf backup-full.tar.gz -g /dev/null
</span></span><span class=line><span class=cl>tar -xvf backup-inc1.tar.gz -g /dev/null</span></span></code></pre></td></tr></table></div></div><p><strong>Streaming qua network:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Gửi qua SSH</span>
</span></span><span class=line><span class=cl>tar -czvf - /data/ <span class=p>|</span> ssh user@remote <span class=s1>&#39;cat &gt; backup.tar.gz&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Giải nén trực tiếp từ remote</span>
</span></span><span class=line><span class=cl>ssh user@remote <span class=s1>&#39;cat backup.tar.gz&#39;</span> <span class=p>|</span> tar -xzvf -
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Sync thư mục qua SSH với tar (nhanh hơn scp cho nhiều file nhỏ)</span>
</span></span><span class=line><span class=cl>tar -cf - /source/ <span class=p>|</span> ssh user@remote <span class=s1>&#39;tar -xf - -C /destination/&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Với compression</span>
</span></span><span class=line><span class=cl>tar -czf - /source/ <span class=p>|</span> ssh user@remote <span class=s1>&#39;tar -xzf - -C /destination/&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Clone disk qua network</span>
</span></span><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/sda <span class=p>|</span> gzip <span class=p>|</span> ssh user@remote <span class=s1>&#39;gunzip &gt; /dev/sdb&#39;</span></span></span></code></pre></td></tr></table></div></div><p><strong>Append và Update:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Append file vào archive (chỉ cho tar không nén)</span>
</span></span><span class=line><span class=cl>tar -rvf archive.tar newfile.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Update file trong archive (thêm version mới)</span>
</span></span><span class=line><span class=cl>tar -uvf archive.tar modified_file.txt
</span></span><span class=line><span class=cl><span class=c1># File cũ vẫn còn, file mới được thêm vào cuối</span></span></span></code></pre></td></tr></table></div></div><p><strong>Verify archive:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># So sánh archive với filesystem</span>
</span></span><span class=line><span class=cl>tar -dvf archive.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kiểm tra integrity của compressed archive</span>
</span></span><span class=line><span class=cl>gzip -t archive.tar.gz
</span></span><span class=line><span class=cl>xz -t archive.tar.xz</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=48-ví-dụ-thực-tế><span>4.8 Ví Dụ Thực Tế</span>
<a href=#48-v%c3%ad-d%e1%bb%a5-th%e1%bb%b1c-t%e1%ba%bf class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Backup thư mục home, exclude cache và tmp</span>
</span></span><span class=line><span class=cl>tar -czvf home-backup-<span class=k>$(</span>date +%Y%m%d<span class=k>)</span>.tar.gz <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --exclude<span class=o>=</span><span class=s1>&#39;.cache&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --exclude<span class=o>=</span><span class=s1>&#39;.local/share/Trash&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --exclude<span class=o>=</span><span class=s1>&#39;*.tmp&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    /home/user/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Backup với progress bar (cần pv)</span>
</span></span><span class=line><span class=cl>tar -cf - /large/directory <span class=p>|</span> pv <span class=p>|</span> gzip &gt; backup.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Extract single file từ large archive</span>
</span></span><span class=line><span class=cl>tar -xzvf huge-archive.tar.gz --occurrence path/to/needed/file
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tạo archive với checksum</span>
</span></span><span class=line><span class=cl>tar -czvf archive.tar.gz dir/ <span class=o>&amp;&amp;</span> md5sum archive.tar.gz &gt; archive.tar.gz.md5
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Split large archive</span>
</span></span><span class=line><span class=cl>tar -czvf - /huge/data/ <span class=p>|</span> split -b 4G - backup.tar.gz.part
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Join và extract</span>
</span></span><span class=line><span class=cl>cat backup.tar.gz.part* <span class=p>|</span> tar -xzvf -
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Parallel compression với pigz (multi-core gzip)</span>
</span></span><span class=line><span class=cl>tar -cf - /data/ <span class=p>|</span> pigz -9 &gt; archive.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Parallel compression với pxz (multi-core xz)</span>
</span></span><span class=line><span class=cl>tar -cf - /data/ <span class=p>|</span> pxz -9 &gt; archive.tar.xz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Archive với timestamp trong tên</span>
</span></span><span class=line><span class=cl>tar -czvf <span class=s2>&#34;backup_</span><span class=k>$(</span>hostname<span class=k>)</span><span class=s2>_</span><span class=k>$(</span>date +%Y%m%d_%H%M%S<span class=k>)</span><span class=s2>.tar.gz&#34;</span> /important/data/</span></span></code></pre></td></tr></table></div></div><hr><h2 class=heading-element id=phần-5-chmod---quản-lý-quyền><span>PHẦN 5: CHMOD - QUẢN LÝ QUYỀN</span>
<a href=#ph%e1%ba%a7n-5-chmod---qu%e1%ba%a3n-l%c3%bd-quy%e1%bb%81n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=51-mô-hình-permission-unix><span>5.1 Mô Hình Permission Unix</span>
<a href=#51-m%c3%b4-h%c3%acnh-permission-unix class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────────────────────────────────────────────────────────┐
</span></span><span class=line><span class=cl>│                 UNIX PERMISSION MODEL                       │
</span></span><span class=line><span class=cl>└─────────────────────────────────────────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ls -l output:
</span></span><span class=line><span class=cl>-rwxr-xr-- 1 owner group 1234 Jan 1 10:00 file.txt
</span></span><span class=line><span class=cl>│└┬┘└┬┘└┬┘
</span></span><span class=line><span class=cl>│ │  │  └── Others (o): Tất cả user khác
</span></span><span class=line><span class=cl>│ │  └───── Group (g): User trong group sở hữu
</span></span><span class=line><span class=cl>│ └──────── User/Owner (u): Chủ sở hữu file
</span></span><span class=line><span class=cl>└────────── File type: - (file), d (dir), l (link), ...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Permission bits:
</span></span><span class=line><span class=cl>┌─────────┬───────┬─────────────────────────────────────┐
</span></span><span class=line><span class=cl>│ Ký hiệu │ Octal │ Ý nghĩa                             │
</span></span><span class=line><span class=cl>├─────────┼───────┼─────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ r       │ 4     │ Read - Đọc nội dung                 │
</span></span><span class=line><span class=cl>│ w       │ 2     │ Write - Ghi/sửa nội dung            │
</span></span><span class=line><span class=cl>│ x       │ 1     │ Execute - Chạy (file) / Truy cập    │
</span></span><span class=line><span class=cl>│         │       │ (thư mục)                           │
</span></span><span class=line><span class=cl>├─────────┼───────┼─────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ -       │ 0     │ Không có quyền                      │
</span></span><span class=line><span class=cl>└─────────┴───────┴─────────────────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Ví dụ:
</span></span><span class=line><span class=cl>rwxr-xr-- = 111 101 100 = 7 5 4 = 754
</span></span><span class=line><span class=cl>rw-r--r-- = 110 100 100 = 6 4 4 = 644
</span></span><span class=line><span class=cl>rwx------ = 111 000 000 = 7 0 0 = 700</span></span></code></pre></td></tr></table></div></div><p><strong>Permission khác nhau cho file và thư mục:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────┬─────────────────────────┬─────────────────────────┐
</span></span><span class=line><span class=cl>│ Quyền   │ File                    │ Thư mục                 │
</span></span><span class=line><span class=cl>├─────────┼─────────────────────────┼─────────────────────────┤
</span></span><span class=line><span class=cl>│ r (4)   │ Đọc nội dung            │ Liệt kê tên file (ls)   │
</span></span><span class=line><span class=cl>│ w (2)   │ Sửa nội dung            │ Tạo/xóa file trong đó   │
</span></span><span class=line><span class=cl>│ x (1)   │ Chạy như program        │ cd vào thư mục          │
</span></span><span class=line><span class=cl>│         │                         │ truy cập file bên trong │
</span></span><span class=line><span class=cl>└─────────┴─────────────────────────┴─────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Ví dụ thư mục:
</span></span><span class=line><span class=cl>r-- : Có thể ls, không thể cd, không thể đọc file
</span></span><span class=line><span class=cl>-w- : Không có ý nghĩa (cần x để tạo/xóa file)
</span></span><span class=line><span class=cl>--x : Có thể cd, có thể đọc file nếu biết tên, không thể ls
</span></span><span class=line><span class=cl>r-x : Có thể ls và cd (thường dùng nhất)
</span></span><span class=line><span class=cl>rwx : Full quyền</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=52-special-permissions-setuid-setgid-sticky><span>5.2 Special Permissions (setuid, setgid, sticky)</span>
<a href=#52-special-permissions-setuid-setgid-sticky class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────────────────────────────────────────────────────────┐
</span></span><span class=line><span class=cl>│                 SPECIAL PERMISSION BITS                     │
</span></span><span class=line><span class=cl>└─────────────────────────────────────────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Ba bit đặc biệt (thêm vào đầu octal):
</span></span><span class=line><span class=cl>┌─────────┬───────┬─────────────────────────────────────────────┐
</span></span><span class=line><span class=cl>│ Tên     │ Octal │ Ý nghĩa                                     │
</span></span><span class=line><span class=cl>├─────────┼───────┼─────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ setuid  │ 4     │ Chạy với quyền của OWNER (không phải user   │
</span></span><span class=line><span class=cl>│         │       │ chạy)                                       │
</span></span><span class=line><span class=cl>│ setgid  │ 2     │ Chạy với quyền của GROUP                    │
</span></span><span class=line><span class=cl>│         │       │ (thư mục: file mới kế thừa group)           │
</span></span><span class=line><span class=cl>│ sticky  │ 1     │ Chỉ owner mới xóa được file của mình        │
</span></span><span class=line><span class=cl>│         │       │ (thường dùng cho /tmp)                      │
</span></span><span class=line><span class=cl>└─────────┴───────┴─────────────────────────────────────────────┘
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Hiển thị trong ls:
</span></span><span class=line><span class=cl>rwsr-xr-x : setuid (s thay x của user)
</span></span><span class=line><span class=cl>rwxr-sr-x : setgid (s thay x của group)
</span></span><span class=line><span class=cl>rwxr-xr-t : sticky (t thay x của others)
</span></span><span class=line><span class=cl>rwSr--r-- : setuid nhưng không có x (S viết hoa = lỗi logic)</span></span></code></pre></td></tr></table></div></div><p><strong>setuid - Ví dụ:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># passwd có setuid để user thường có thể đổi password</span>
</span></span><span class=line><span class=cl>ls -l /usr/bin/passwd
</span></span><span class=line><span class=cl><span class=c1># -rwsr-xr-x 1 root root 68208 Nov 24 2022 /usr/bin/passwd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Khi user john chạy passwd:</span>
</span></span><span class=line><span class=cl><span class=c1># - Process chạy với EUID = root (vì setuid)</span>
</span></span><span class=line><span class=cl><span class=c1># - Có thể sửa /etc/shadow (owned by root)</span>
</span></span><span class=line><span class=cl><span class=c1># - john không cần quyền root để đổi password của mình</span></span></span></code></pre></td></tr></table></div></div><p><strong>setgid trên thư mục - Ví dụ:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Tạo thư mục shared cho team</span>
</span></span><span class=line><span class=cl>mkdir /shared/project
</span></span><span class=line><span class=cl>chgrp developers /shared/project
</span></span><span class=line><span class=cl>chmod <span class=m>2775</span> /shared/project
</span></span><span class=line><span class=cl><span class=c1># drwxrwsr-x 2 root developers 4096 Jan 1 10:00 project</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bất kỳ file nào tạo trong đây sẽ thuộc group developers</span>
</span></span><span class=line><span class=cl><span class=c1># (thay vì group của user tạo file)</span>
</span></span><span class=line><span class=cl>touch /shared/project/newfile.txt
</span></span><span class=line><span class=cl>ls -l /shared/project/newfile.txt
</span></span><span class=line><span class=cl><span class=c1># -rw-r--r-- 1 john developers 0 Jan 1 10:00 newfile.txt</span></span></span></code></pre></td></tr></table></div></div><p><strong>sticky bit - Ví dụ:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># /tmp có sticky bit</span>
</span></span><span class=line><span class=cl>ls -ld /tmp
</span></span><span class=line><span class=cl><span class=c1># drwxrwxrwt 15 root root 4096 Jan 1 10:00 /tmp</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Mọi user đều có thể tạo file trong /tmp</span>
</span></span><span class=line><span class=cl><span class=c1># NHƯNG chỉ owner mới xóa được file của mình</span>
</span></span><span class=line><span class=cl><span class=c1># (không thể xóa file của user khác dù có write permission)</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=53-cú-pháp-chmod><span>5.3 Cú Pháp chmod</span>
<a href=#53-c%c3%ba-ph%c3%a1p-chmod class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><strong>Symbolic mode:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=o>[</span>ugoa<span class=o>][</span>+-<span class=o>=][</span>rwxXstugo<span class=o>]</span> file
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Who:</span>
</span></span><span class=line><span class=cl><span class=nv>u</span> <span class=o>=</span> user <span class=o>(</span>owner<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>g</span> <span class=o>=</span> group
</span></span><span class=line><span class=cl><span class=nv>o</span> <span class=o>=</span> others
</span></span><span class=line><span class=cl><span class=nv>a</span> <span class=o>=</span> all <span class=o>(</span>u+g+o<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Operation:</span>
</span></span><span class=line><span class=cl>+ <span class=o>=</span> thêm quyền
</span></span><span class=line><span class=cl>- <span class=o>=</span> bỏ <span class=nv>quyền</span>
</span></span><span class=line><span class=cl><span class=o>=</span> <span class=o>=</span> đặt chính xác
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Permission:</span>
</span></span><span class=line><span class=cl><span class=nv>r</span> <span class=o>=</span> <span class=nb>read</span>
</span></span><span class=line><span class=cl><span class=nv>w</span> <span class=o>=</span> write
</span></span><span class=line><span class=cl><span class=nv>x</span> <span class=o>=</span> execute
</span></span><span class=line><span class=cl><span class=nv>X</span> <span class=o>=</span> execute chỉ khi là thư mục hoặc đã có x
</span></span><span class=line><span class=cl><span class=nv>s</span> <span class=o>=</span> setuid/setgid
</span></span><span class=line><span class=cl><span class=nv>t</span> <span class=o>=</span> sticky
</span></span><span class=line><span class=cl><span class=nv>u</span> <span class=o>=</span> copy quyền của user
</span></span><span class=line><span class=cl><span class=nv>g</span> <span class=o>=</span> copy quyền của group
</span></span><span class=line><span class=cl><span class=nv>o</span> <span class=o>=</span> copy quyền của others
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>chmod u+x file              <span class=c1># Thêm execute cho owner</span>
</span></span><span class=line><span class=cl>chmod go-w file             <span class=c1># Bỏ write của group và others</span>
</span></span><span class=line><span class=cl>chmod <span class=nv>a</span><span class=o>=</span>r file              <span class=c1># Tất cả chỉ có read</span>
</span></span><span class=line><span class=cl>chmod <span class=nv>u</span><span class=o>=</span>rwx,go<span class=o>=</span>rx file      <span class=c1># Owner full, group/others read+execute</span>
</span></span><span class=line><span class=cl>chmod u+s file              <span class=c1># Thêm setuid</span>
</span></span><span class=line><span class=cl>chmod g+s dir               <span class=c1># Thêm setgid cho thư mục</span>
</span></span><span class=line><span class=cl>chmod +t dir                <span class=c1># Thêm sticky bit</span>
</span></span><span class=line><span class=cl>chmod -R a+rX dir           <span class=c1># Đệ quy: read cho tất cả, execute cho thư mục</span></span></span></code></pre></td></tr></table></div></div><p><strong>Octal mode:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=o>[</span>special<span class=o>][</span>user<span class=o>][</span>group<span class=o>][</span>others<span class=o>]</span> file
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ:</span>
</span></span><span class=line><span class=cl>chmod <span class=m>755</span> file              <span class=c1># rwxr-xr-x</span>
</span></span><span class=line><span class=cl>chmod <span class=m>644</span> file              <span class=c1># rw-r--r--</span>
</span></span><span class=line><span class=cl>chmod <span class=m>700</span> file              <span class=c1># rwx------</span>
</span></span><span class=line><span class=cl>chmod <span class=m>4755</span> file             <span class=c1># rwsr-xr-x (setuid)</span>
</span></span><span class=line><span class=cl>chmod <span class=m>2755</span> dir              <span class=c1># rwxr-sr-x (setgid)</span>
</span></span><span class=line><span class=cl>chmod <span class=m>1777</span> dir              <span class=c1># rwxrwxrwt (sticky)</span>
</span></span><span class=line><span class=cl>chmod <span class=m>0600</span> file             <span class=c1># rw------- (explicit leading 0)</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=54-umask---default-permissions><span>5.4 umask - Default Permissions</span>
<a href=#54-umask---default-permissions class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># umask xác định quyền MẶC ĐỊNH khi tạo file/thư mục</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Công thức:</span>
</span></span><span class=line><span class=cl><span class=c1># File: 666 - umask (file không có x mặc định)</span>
</span></span><span class=line><span class=cl><span class=c1># Thư mục: 777 - umask</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ví dụ với umask 022:</span>
</span></span><span class=line><span class=cl><span class=c1># File mới: 666 - 022 = 644 (rw-r--r--)</span>
</span></span><span class=line><span class=cl><span class=c1># Thư mục mới: 777 - 022 = 755 (rwxr-xr-x)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Xem umask hiện tại</span>
</span></span><span class=line><span class=cl><span class=nb>umask</span>                   <span class=c1># Output: 0022</span>
</span></span><span class=line><span class=cl><span class=nb>umask</span> -S                <span class=c1># Output: u=rwx,g=rx,o=rx</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đặt umask</span>
</span></span><span class=line><span class=cl><span class=nb>umask</span> <span class=m>027</span>               <span class=c1># File: 640, Dir: 750</span>
</span></span><span class=line><span class=cl><span class=nb>umask</span> <span class=m>077</span>               <span class=c1># File: 600, Dir: 700 (private)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đặt trong ~/.bashrc để persistent</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;umask 027&#34;</span> &gt;&gt; ~/.bashrc</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=55-acl-access-control-list><span>5.5 ACL (Access Control List)</span>
<a href=#55-acl-access-control-list class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ACL cho phép quyền chi tiết hơn cho user/group cụ thể</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kiểm tra filesystem hỗ trợ ACL</span>
</span></span><span class=line><span class=cl>mount <span class=p>|</span> grep acl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Xem ACL của file</span>
</span></span><span class=line><span class=cl>getfacl file
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đặt ACL cho user cụ thể</span>
</span></span><span class=line><span class=cl>setfacl -m u:john:rwx file          <span class=c1># john có rwx</span>
</span></span><span class=line><span class=cl>setfacl -m u:jane:r-- file          <span class=c1># jane chỉ có read</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đặt ACL cho group</span>
</span></span><span class=line><span class=cl>setfacl -m g:developers:rwx file
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Default ACL cho thư mục (file mới kế thừa)</span>
</span></span><span class=line><span class=cl>setfacl -d -m u:john:rwx dir/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Xóa ACL</span>
</span></span><span class=line><span class=cl>setfacl -x u:john file              <span class=c1># Xóa ACL của john</span>
</span></span><span class=line><span class=cl>setfacl -b file                     <span class=c1># Xóa tất cả ACL</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Copy ACL từ file này sang file khác</span>
</span></span><span class=line><span class=cl>getfacl file1 <span class=p>|</span> setfacl --set-file<span class=o>=</span>- file2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Đệ quy</span>
</span></span><span class=line><span class=cl>setfacl -R -m u:john:rwx dir/</span></span></code></pre></td></tr></table></div></div><p><strong>Output của getfacl:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ getfacl project/
</span></span><span class=line><span class=cl><span class=c1># file: project/</span>
</span></span><span class=line><span class=cl><span class=c1># owner: alice</span>
</span></span><span class=line><span class=cl><span class=c1># group: developers</span>
</span></span><span class=line><span class=cl>user::rwx                   <span class=c1># Owner permissions</span>
</span></span><span class=line><span class=cl>user:john:rwx               <span class=c1># Specific user ACL</span>
</span></span><span class=line><span class=cl>group::r-x                  <span class=c1># Group permissions</span>
</span></span><span class=line><span class=cl>group:testers:r-x           <span class=c1># Specific group ACL</span>
</span></span><span class=line><span class=cl>mask::rwx                   <span class=c1># Maximum effective permissions</span>
</span></span><span class=line><span class=cl>other::---                  <span class=c1># Others permissions</span>
</span></span><span class=line><span class=cl>default:user::rwx           <span class=c1># Default for new files</span>
</span></span><span class=line><span class=cl>default:user:john:rwx
</span></span><span class=line><span class=cl>default:group::r-x
</span></span><span class=line><span class=cl>default:mask::rwx
</span></span><span class=line><span class=cl>default:other::---</span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=56-ví-dụ-thực-tế><span>5.6 Ví Dụ Thực Tế</span>
<a href=#56-v%c3%ad-d%e1%bb%a5-th%e1%bb%b1c-t%e1%ba%bf class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Web server: www-data cần đọc, owner cần ghi</span>
</span></span><span class=line><span class=cl>chown user:www-data /var/www/site
</span></span><span class=line><span class=cl>chmod <span class=m>750</span> /var/www/site
</span></span><span class=line><span class=cl>find /var/www/site -type f -exec chmod <span class=m>640</span> <span class=o>{}</span> +
</span></span><span class=line><span class=cl>find /var/www/site -type d -exec chmod <span class=m>750</span> <span class=o>{}</span> +
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Thư mục upload cần www-data ghi được</span>
</span></span><span class=line><span class=cl>chmod <span class=m>770</span> /var/www/site/uploads
</span></span><span class=line><span class=cl><span class=c1># Hoặc dùng ACL</span>
</span></span><span class=line><span class=cl>setfacl -m u:www-data:rwx /var/www/site/uploads
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Shared folder cho team</span>
</span></span><span class=line><span class=cl>mkdir /shared/team
</span></span><span class=line><span class=cl>chgrp team /shared/team
</span></span><span class=line><span class=cl>chmod <span class=m>2775</span> /shared/team     <span class=c1># setgid để file mới thuộc group team</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Private home directory</span>
</span></span><span class=line><span class=cl>chmod <span class=m>700</span> /home/user
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Script thực thi</span>
</span></span><span class=line><span class=cl>chmod +x script.sh
</span></span><span class=line><span class=cl>chmod <span class=m>755</span> script.sh         <span class=c1># Tương đương</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bảo vệ file quan trọng (chỉ owner đọc)</span>
</span></span><span class=line><span class=cl>chmod <span class=m>400</span> ~/.ssh/id_rsa
</span></span><span class=line><span class=cl>chmod <span class=m>600</span> ~/.ssh/id_rsa     <span class=c1># Nếu cần sửa</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm file có setuid (security audit)</span>
</span></span><span class=line><span class=cl>find / -perm -4000 -type f 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tìm file world-writable (security risk)</span>
</span></span><span class=line><span class=cl>find / -perm -002 -type f 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Sửa permission hàng loạt</span>
</span></span><span class=line><span class=cl><span class=c1># File: 644, Directory: 755</span>
</span></span><span class=line><span class=cl>find /path -type f -exec chmod <span class=m>644</span> <span class=o>{}</span> +
</span></span><span class=line><span class=cl>find /path -type d -exec chmod <span class=m>755</span> <span class=o>{}</span> +
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Chỉ thêm execute cho thư mục</span>
</span></span><span class=line><span class=cl>chmod -R a+rX /path         <span class=c1># X = x chỉ cho thư mục</span></span></span></code></pre></td></tr></table></div></div><hr><h2 class=heading-element id=tóm-tắt-nhanh><span>TÓM TẮT NHANH</span>
<a href=#t%c3%b3m-t%e1%ba%aft-nhanh class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=find><span>find</span>
<a href=#find class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find . -name <span class=s2>&#34;*.log&#34;</span> -mtime +30 -delete     <span class=c1># Xóa log cũ</span>
</span></span><span class=line><span class=cl>find . -type f -size +100M                   <span class=c1># File &gt; 100MB</span>
</span></span><span class=line><span class=cl>find . -perm -4000                           <span class=c1># Setuid files</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.py&#34;</span> -exec grep -l <span class=s2>&#34;TODO&#34;</span> <span class=o>{}</span> + <span class=c1># Tìm trong file</span>
</span></span><span class=line><span class=cl>find . -print0 <span class=p>|</span> xargs -0 cmd                <span class=c1># Xử lý tên file đặc biệt</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=ln><span>ln</span>
<a href=#ln class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ln file hardlink                <span class=c1># Hard link (cùng inode)</span>
</span></span><span class=line><span class=cl>ln -s file symlink              <span class=c1># Symbolic link</span>
</span></span><span class=line><span class=cl>ln -sf new_target symlink       <span class=c1># Update symlink</span>
</span></span><span class=line><span class=cl>readlink -f symlink             <span class=c1># Resolve symlink</span>
</span></span><span class=line><span class=cl>find . -xtype l                 <span class=c1># Tìm broken symlink</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=lsof><span>lsof</span>
<a href=#lsof class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lsof -i :80                     <span class=c1># Ai dùng port 80</span>
</span></span><span class=line><span class=cl>lsof -p PID                     <span class=c1># File mở bởi process</span>
</span></span><span class=line><span class=cl>lsof +D /path                   <span class=c1># Process dùng thư mục</span>
</span></span><span class=line><span class=cl>lsof <span class=p>|</span> grep deleted             <span class=c1># File đã xóa còn mở</span>
</span></span><span class=line><span class=cl>lsof -t -i :80 <span class=p>|</span> xargs <span class=nb>kill</span>     <span class=c1># Kill process dùng port</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=tar><span>tar</span>
<a href=#tar class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tar -czvf archive.tar.gz dir/              <span class=c1># Tạo tar.gz</span>
</span></span><span class=line><span class=cl>tar -xvf archive.tar.gz -C /dest/          <span class=c1># Giải nén</span>
</span></span><span class=line><span class=cl>tar -tvf archive.tar.gz                    <span class=c1># Liệt kê</span>
</span></span><span class=line><span class=cl>tar --exclude<span class=o>=</span><span class=s1>&#39;*.log&#39;</span> -czvf a.tar.gz dir/  <span class=c1># Exclude</span>
</span></span><span class=line><span class=cl>tar -cf - dir/ <span class=p>|</span> ssh host <span class=s1>&#39;tar -xf -&#39;</span>      <span class=c1># Sync qua SSH</span></span></span></code></pre></td></tr></table></div></div><h3 class=heading-element id=chmod><span>chmod</span>
<a href=#chmod class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=m>755</span> file                  <span class=c1># rwxr-xr-x</span>
</span></span><span class=line><span class=cl>chmod u+x file                  <span class=c1># Thêm execute cho owner</span>
</span></span><span class=line><span class=cl>chmod -R a+rX dir               <span class=c1># Đệ quy (X = x cho dir)</span>
</span></span><span class=line><span class=cl>chmod <span class=m>4755</span> file                 <span class=c1># Setuid</span>
</span></span><span class=line><span class=cl>chmod <span class=m>2775</span> dir                  <span class=c1># Setgid</span>
</span></span><span class=line><span class=cl>chmod <span class=m>1777</span> dir                  <span class=c1># Sticky bit</span>
</span></span><span class=line><span class=cl>setfacl -m u:user:rwx file      <span class=c1># ACL</span></span></span></code></pre></td></tr></table></div></div></div><hr class=awesome-hr><h2 id=see-also>Nội dung liên quan</h2><ul><li><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/selinux/ title="Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc">Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc</a></li><li><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/encryption-and-security/ title="Linux Cryptography & Security Tools - Hướng Dẫn Chuyên Sâu">Linux Cryptography & Security Tools - Hướng Dẫn Chuyên Sâu</a></li><li><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/package-manager/ title="Linux Package Management - Hướng Dẫn Chuyên Sâu">Linux Package Management - Hướng Dẫn Chuyên Sâu</a></li><li><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/user-group/ title="Linux User & Group Management - Hướng Dẫn Chuyên Sâu">Linux User & Group Management - Hướng Dẫn Chuyên Sâu</a></li><li><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/storage/ title="Disk, Storage & Filesystem - Hướng Dẫn Chuyên Sâu">Disk, Storage & Filesystem - Hướng Dẫn Chuyên Sâu</a></li></ul><div class=collection-card><div class="collection-title text-secondary">Trong <a href=/collections/linux-cli/><i class="fa-solid fa-layer-group fa-fw" aria-hidden=true></i> <span>Bộ sưu tập・Linux Cli</span></span></a> 11</div><div class=collection-nav><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/selinux/ class=collection-nav-item rel=prev title="Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i><span>Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc</span></a></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Cập nhật ngày 2025-12-11 05:02:01">Cập nhật ngày 2025-12-11&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Chia sẻ trên X" data-sharer=twitter data-url=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/file-and-folder/ data-title="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu" data-hashtags="ai generated post"><i class="fa-brands fa-x-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Chia sẻ trên Facebook" data-sharer=facebook data-url=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/file-and-folder/ data-hashtag="ai generated post"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Chia sẻ trên 微博" data-sharer=weibo data-url=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/file-and-folder/ data-title="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu"><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/ai-generated-post/ class=post-tag title="Nhãn - Ai Generated Post">Ai Generated Post</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Quay lại</a></span>&nbsp;|&nbsp;<span><a href=/>Trang chủ</a></span></section></div><div class=post-nav><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/selinux/ class=post-nav-item rel=prev title="Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc</a></div></div></article><aside class=toc id=toc-auto aria-label="Nội dung"><h2 class=toc-title>Nội dung&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><dialog id=toc-dialog aria-labelledby=toc-dialog-title role=dialog><div class=toc><h2 class=toc-title>Nội dung</h2><div class=toc-content id=toc-content-drawer><nav><ul><li><ul><li><a href=#phần-1-find---tìm-kiếm-file>PHẦN 1: FIND - TÌM KIẾM FILE</a><ul><li><a href=#11-thuật-toán-duyệt-cây>1.1 Thuật Toán Duyệt Cây</a></li><li><a href=#12-cú-pháp-cơ-bản>1.2 Cú Pháp Cơ Bản</a></li><li><a href=#13-các-test-hay-dùng>1.3 Các Test Hay Dùng</a></li><li><a href=#14-operators---kết-hợp-điều-kiện>1.4 Operators - Kết Hợp Điều Kiện</a></li><li><a href=#15-actions---hành-động>1.5 Actions - Hành Động</a></li><li><a href=#16-find--xargs---combo-mạnh-nhất>1.6 find + xargs - Combo Mạnh Nhất</a></li><li><a href=#17-tối-ưu-hiệu-năng>1.7 Tối Ưu Hiệu Năng</a></li><li><a href=#18-ví-dụ-thực-tế>1.8 Ví Dụ Thực Tế</a></li></ul></li><li><a href=#phần-2-ln---liên-kết-file>PHẦN 2: LN - LIÊN KẾT FILE</a><ul><li><a href=#21-inode-và-cấu-trúc-filesystem>2.1 Inode và Cấu Trúc Filesystem</a></li><li><a href=#22-hard-link-vs-symbolic-link>2.2 Hard Link vs Symbolic Link</a></li><li><a href=#23-cú-pháp-và-options>2.3 Cú Pháp và Options</a></li><li><a href=#24-khi-nào-dùng-cái-nào>2.4 Khi Nào Dùng Cái Nào</a></li><li><a href=#25-troubleshooting>2.5 Troubleshooting</a></li><li><a href=#26-ví-dụ-thực-tế>2.6 Ví Dụ Thực Tế</a></li></ul></li><li><a href=#phần-3-lsof---liệt-kê-file-đang-mở>PHẦN 3: LSOF - LIỆT KÊ FILE ĐANG MỞ</a><ul><li><a href=#31-file-descriptor-và-proc>3.1 File Descriptor và /proc</a></li><li><a href=#32-cú-pháp-cơ-bản>3.2 Cú Pháp Cơ Bản</a></li><li><a href=#33-lọc-theo-các-tiêu-chí>3.3 Lọc Theo Các Tiêu Chí</a></li><li><a href=#34-output-format>3.4 Output Format</a></li><li><a href=#35-kết-hợp-điều-kiện>3.5 Kết Hợp Điều Kiện</a></li><li><a href=#36-use-cases-thực-tế>3.6 Use Cases Thực Tế</a></li><li><a href=#37-repeat-mode>3.7 Repeat Mode</a></li></ul></li><li><a href=#phần-4-tar---archive-và-nén>PHẦN 4: TAR - ARCHIVE VÀ NÉN</a><ul><li><a href=#41-cấu-trúc-tar-archive>4.1 Cấu Trúc TAR Archive</a></li><li><a href=#42-các-thuật-toán-nén>4.2 Các Thuật Toán Nén</a></li><li><a href=#43-cú-pháp-và-operations>4.3 Cú Pháp và Operations</a></li><li><a href=#44-tạo-archive>4.4 Tạo Archive</a></li><li><a href=#45-giải-nén-archive>4.5 Giải Nén Archive</a></li><li><a href=#46-liệt-kê-nội-dung>4.6 Liệt Kê Nội Dung</a></li><li><a href=#47-tính-năng-nâng-cao>4.7 Tính Năng Nâng Cao</a></li><li><a href=#48-ví-dụ-thực-tế>4.8 Ví Dụ Thực Tế</a></li></ul></li><li><a href=#phần-5-chmod---quản-lý-quyền>PHẦN 5: CHMOD - QUẢN LÝ QUYỀN</a><ul><li><a href=#51-mô-hình-permission-unix>5.1 Mô Hình Permission Unix</a></li><li><a href=#52-special-permissions-setuid-setgid-sticky>5.2 Special Permissions (setuid, setgid, sticky)</a></li><li><a href=#53-cú-pháp-chmod>5.3 Cú Pháp chmod</a></li><li><a href=#54-umask---default-permissions>5.4 umask - Default Permissions</a></li><li><a href=#55-acl-access-control-list>5.5 ACL (Access Control List)</a></li><li><a href=#56-ví-dụ-thực-tế>5.6 Ví Dụ Thực Tế</a></li></ul></li><li><a href=#tóm-tắt-nhanh>TÓM TẮT NHANH</a><ul><li><a href=#find>find</a></li><li><a href=#ln>ln</a></li><li><a href=#lsof>lsof</a></li><li><a href=#tar>tar</a></li><li><a href=#chmod>chmod</a></li></ul></li></ul></li></ul></nav></div></div></dialog></main><footer class=footer><div class=footer-container><div class="footer-line powered">Cung cấp bởi <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.152.0"><img class=hugo-icon src=/images/hugo.min.svg alt="Hugo logo"> Hugo</a> | Chủ đề - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.4.0-alpha.2"><img class=fixit-icon src=/images/fixit.min.svg alt="FixIt logo"> FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2025</span></div></div></footer></div><div class=widgets><div class=fixed-buttons><div class="fixed-button back-to-top animate__faster" role=button aria-label="Lên trên"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><svg viewBox="0 0 100 100"><circle class="bg" cx="50" cy="50" r="50"/><circle class="progress" cx="50" cy="50" r="50"/></svg></div><div id=toc-drawer-button class="fixed-button toc-drawer-button" role=button aria-label="Nội dung"><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></div></div><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#000;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>Trang web này hoạt động tốt nhất khi JavaScript được kích hoạt.</div></noscript></div><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/instant-page/instantpage.min.js async defer type=module></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pace/pace.min.js async defer></script><script src=/bai-viet/khoa-hoc-may-tinh/linux-cli/file-and-folder/config/page.js defer></script><script src=/js/theme.min.js defer></script></body></html>