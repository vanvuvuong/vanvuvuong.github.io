<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=vi><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Những Điều Cơ Bản Về Bash & Fish Shell Trong Linux - Kaizen - tốt hơn mỗi ngày</title><meta name=author content="Kaizen Teams"><meta name=description content="Những điều cơ bản về Bash & Fish shell trong Linux"><meta name=keywords content='ai generated post'><meta itemprop=name content="Những điều cơ bản về Bash & Fish shell trong Linux"><meta itemprop=description content="Những điều cơ bản về Bash & Fish shell trong Linux"><meta itemprop=datePublished content="2025-11-20T20:17:23+07:00"><meta itemprop=dateModified content="2025-12-19T20:48:32+07:00"><meta itemprop=wordCount content="6817"><meta itemprop=keywords content="Ai Generated Post"><meta property="og:url" content="https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/shell-co-ban/"><meta property="og:site_name" content="Kaizen - tốt hơn mỗi ngày"><meta property="og:title" content="Những điều cơ bản về Bash & Fish shell trong Linux"><meta property="og:description" content="Những điều cơ bản về Bash & Fish shell trong Linux"><meta property="og:locale" content="vi"><meta property="og:type" content="article"><meta property="article:section" content="bai-viet"><meta property="article:published_time" content="2025-11-20T20:17:23+07:00"><meta property="article:modified_time" content="2025-12-19T20:48:32+07:00"><meta property="article:tag" content="Ai Generated Post"><meta name=twitter:card content="summary"><meta name=twitter:title content="Những điều cơ bản về Bash & Fish shell trong Linux"><meta name=twitter:description content="Những điều cơ bản về Bash & Fish shell trong Linux"><meta name=application-name content="Kaizen - tốt hơn mỗi ngày"><meta name=apple-mobile-web-app-title content="Kaizen - tốt hơn mỗi ngày"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#2d89ef"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#FF7359><link rel=manifest href=/site.webmanifest><link rel=canonical type=text/html href=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/shell-co-ban/ title="Những điều cơ bản về Bash & Fish shell trong Linux - Kaizen - tốt hơn mỗi ngày"><link rel=prev type=text/html href=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/gpg-co-ban/ title="GPG cơ bản"><link rel=next type=text/html href=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/10x-terminal/ title="Sử dụng cửa sổ câu lệnh (terminal) Linux nhanh gấp 10 lần người bình thường"><link rel=stylesheet href=/css/config.min.css><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Những điều cơ bản về Bash \u0026 Fish shell trong Linux","inLanguage":"vi","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/vanvuvuong.github.io\/bai-viet\/khoa-hoc-may-tinh\/linux-cli\/shell-co-ban\/"},"image":[{"@type":"ImageObject","url":"https:\/\/vanvuvuong.github.io\/images\/avatar.jpeg","width":330,"height":330}],"genre":"posts","keywords":"ai generated post","wordcount":6817,"url":"https:\/\/vanvuvuong.github.io\/bai-viet\/khoa-hoc-may-tinh\/linux-cli\/shell-co-ban\/","datePublished":"2025-11-20T20:17:23+07:00","dateModified":"2025-12-19T20:48:32+07:00","publisher":{"@type":"Organization","name":"Kaizen","logo":{"@type":"ImageObject","url":"https:\/\/vanvuvuong.github.io\/images\/avatar.jpeg","width":330,"height":330}},"author":{"@type":"Person","name":"Kaizen Teams"},"description":"Những điều cơ bản về Bash \u0026 Fish shell trong Linux"}</script><script src=/js/head/color-scheme.min.js></script></head><body data-instant-intensity=viewport data-header-desktop=sticky data-header-mobile=auto><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Kaizen - tốt hơn mỗi ngày"><img class=logo src=/images/kaizen-logo.png alt="Kaizen - tốt hơn mỗi ngày" height=32 width=32><span class=header-title-text>Kaizen</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/gioi-thieu><i class="fa-solid fa-comments fa-fw fa-sm" aria-hidden=true></i> Giới thiệu</a></li><li class="menu-item has-children"><a class=menu-link href=/bai-viet><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Bài viết</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/bai-viet/khoa-hoc-may-tinh><i class="fa-solid fa-laptop fa-fw fa-sm" aria-hidden=true></i> Khoa học máy tính</a></li><li class=menu-item><a class=menu-link href=/bai-viet/cuoc-song><i class="fa-solid fa-life-ring fa-fw fa-sm" aria-hidden=true></i> Cuộc sống</a></li><li class=menu-item><a class=menu-link href=/bai-viet/hoc-vien-luat-tu-nhien><i class="fa-solid fa-dragon fa-fw fa-sm" aria-hidden=true></i> Học viện luật tự nhiên</a></li><li class=menu-item><a class=menu-link href=/collections><i class="fa-solid fa-layer-group fa-fw fa-sm" aria-hidden=true></i> Bộ sưu tập</a></li><li class=menu-item><a class=menu-link href=/tags><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li></ul></li><li class=menu-item><a class=menu-link href=/sach-hay><i class="fa-solid fa-book fa-fw fa-sm" aria-hidden=true></i> Sách hay</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Tìm tiêu đề hoặc nội dung..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title="Tìm kiếm"><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Xoá><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Đổi chủ đề"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Kaizen - tốt hơn mỗi ngày"><img class=logo src=/images/kaizen-logo.png alt="Kaizen - tốt hơn mỗi ngày" height=26 width=26><span class=header-title-text>Kaizen</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Tìm tiêu đề hoặc nội dung..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title="Tìm kiếm"><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Xoá><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Huỷ</a></li><li class=menu-item><a class=menu-link href=/gioi-thieu><i class="fa-solid fa-comments fa-fw fa-sm" aria-hidden=true></i> Giới thiệu</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/bai-viet><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Bài viết</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/bai-viet/khoa-hoc-may-tinh><i class="fa-solid fa-laptop fa-fw fa-sm" aria-hidden=true></i> Khoa học máy tính</a></li><li class=menu-item><a class=menu-link href=/bai-viet/cuoc-song><i class="fa-solid fa-life-ring fa-fw fa-sm" aria-hidden=true></i> Cuộc sống</a></li><li class=menu-item><a class=menu-link href=/bai-viet/hoc-vien-luat-tu-nhien><i class="fa-solid fa-dragon fa-fw fa-sm" aria-hidden=true></i> Học viện luật tự nhiên</a></li><li class=menu-item><a class=menu-link href=/collections><i class="fa-solid fa-layer-group fa-fw fa-sm" aria-hidden=true></i> Bộ sưu tập</a></li><li class=menu-item><a class=menu-link href=/tags><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li></ul></li><li class=menu-item><a class=menu-link href=/sach-hay><i class="fa-solid fa-book fa-fw fa-sm" aria-hidden=true></i> Sách hay</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Đổi chủ đề"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=fi-container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="Bộ sưu tập"><div class="details collection-details open"><div class="details-summary collection-summary"><i class="fa-solid fa-layer-group fa-fw" aria-hidden=true></i>
<span class=collection-name title="Bộ sưu tập">Linux Cli</span>
<span class=collection-count>12</span><i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class="details-content collection-content"><nav><ul class=collection-list><li class=collection-item><span class=active title="Những Điều Cơ Bản Về Bash & Fish Shell Trong Linux">Những Điều Cơ Bản Về Bash & Fish Shell Trong Linux</span></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/grep-diff-sort/ title="Grep, Sort, Diff - Hướng Dẫn Chuyên Sâu">Grep, Sort, Diff - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/network/ title="Linux Network Commands - Hướng Dẫn Chuyên Sâu">Linux Network Commands - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/process-service-log/ title="Process Management, Systemd & Logging - Hướng Dẫn Chuyên Sâu">Process Management, Systemd & Logging - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/regex-awk-sed/ title="Awk, Sed & Regex - Hướng Dẫn Chuyên Sâu Cho System Engineer">Awk, Sed & Regex - Hướng Dẫn Chuyên Sâu Cho System Engineer</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/storage/ title="Disk, Storage & Filesystem - Hướng Dẫn Chuyên Sâu">Disk, Storage & Filesystem - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/user-group/ title="Linux User & Group Management - Hướng Dẫn Chuyên Sâu">Linux User & Group Management - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/encryption-and-security/ title="Linux Cryptography & Security Tools - Hướng Dẫn Chuyên Sâu">Linux Cryptography & Security Tools - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/package-manager/ title="Linux Package Management - Hướng Dẫn Chuyên Sâu">Linux Package Management - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/selinux/ title="Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc">Selinux & Apparmor - Kiểm Soát Truy Cập Bắt Buộc</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/file-and-folder/ title="Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu">Find, Ln, Lsof, Tar, Chmod - Hướng Dẫn Chuyên Sâu</a></li><li class=collection-item><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/systemd/ title="Systemd - Hướng Dẫn Toàn Diện Cho System Engineers">Systemd - Hướng Dẫn Toàn Diện Cho System Engineers</a></li></ul><div class=collection-nav-simple><i class="fa-solid fa-angle-left fa-fw collection-nav-item text-secondary" aria-hidden=true></i><span class=text-secondary>1/12</span><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/grep-diff-sort/ class=collection-nav-item rel=next title="Grep, Sort, Diff - Hướng Dẫn Chuyên Sâu"><i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></nav></div></div></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Những Điều Cơ Bản Về Bash & Fish Shell Trong Linux</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://vanvuvuong.github.io title="Tác giả" target=_blank rel="external nofollow noopener noreferrer author" class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Kaizen Teams</a></span><span class=post-included-in>&nbsp;trong <a href=/collections/linux-cli/ class=post-collection title="Bộ sưu tập - Linux Cli"><i class="fa-solid fa-layer-group fa-fw" aria-hidden=true></i> Linux Cli</a></span></div><div class=post-meta-line><span title="đăng ngày 2025-11-20 20:17:23"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=2025-11-20>2025-11-20</time></span>&nbsp;<span title="Cập nhật ngày 2025-12-19 20:48:32"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden=true></i><time datetime=2025-12-19>2025-12-19</time></span>&nbsp;<span title="6817 từ"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>Khoảng 6900 từ</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>33 phút</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Nội dung</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#1-script-structure--best-practices>1. SCRIPT STRUCTURE & BEST PRACTICES</a><ul><li><a href=#11-shebang-và-script-header>1.1 Shebang và Script Header</a></li><li><a href=#12-giải-thích-set-options>1.2 Giải thích set options</a></li><li><a href=#13-script-skeleton-chuẩn>1.3 Script Skeleton chuẩn</a></li></ul></li><li><a href=#2-functions>2. FUNCTIONS</a><ul><li><a href=#21-cú-pháp-định-nghĩa-function>2.1 Cú pháp định nghĩa Function</a></li><li><a href=#22-arguments-trong-function>2.2 Arguments trong Function</a></li><li><a href=#23-return-values>2.3 Return Values</a></li><li><a href=#24-local-variables>2.4 Local Variables</a></li><li><a href=#25-recursion>2.5 Recursion</a></li><li><a href=#26-function-library-pattern>2.6 Function Library Pattern</a></li></ul></li><li><a href=#3-arrays>3. ARRAYS</a><ul><li><a href=#31-indexed-arrays>3.1 Indexed Arrays</a></li><li><a href=#32-associative-arrays-bash-40>3.2 Associative Arrays (Bash 4.0+)</a></li><li><a href=#33-array-operations>3.3 Array Operations</a></li><li><a href=#34-array-patterns-thực-tế>3.4 Array Patterns thực tế</a></li></ul></li><li><a href=#4-string-manipulation>4. STRING MANIPULATION</a><ul><li><a href=#41-parameter-expansion>4.1 Parameter Expansion</a></li><li><a href=#42-pattern-removal>4.2 Pattern Removal</a></li><li><a href=#43-pattern-replacement>4.3 Pattern Replacement</a></li><li><a href=#44-case-modification-bash-40>4.4 Case Modification (Bash 4.0+)</a></li><li><a href=#45-string-operations-thực-tế>4.5 String Operations thực tế</a></li></ul></li><li><a href=#5-arithmetic-operations>5. ARITHMETIC OPERATIONS</a><ul><li><a href=#51-arithmetic-expansion>5.1 Arithmetic Expansion</a></li><li><a href=#52-operators>5.2 Operators</a></li><li><a href=#53-floating-point>5.3 Floating Point</a></li></ul></li><li><a href=#6-command--process-substitution>6. COMMAND & PROCESS SUBSTITUTION</a><ul><li><a href=#61-command-substitution>6.1 Command Substitution</a></li><li><a href=#62-process-substitution>6.2 Process Substitution</a></li><li><a href=#63-here-documents--here-strings>6.3 Here Documents & Here Strings</a></li></ul></li><li><a href=#7-traps--signal-handling>7. TRAPS & SIGNAL HANDLING</a><ul><li><a href=#71-signals-thường-gặp>7.1 Signals thường gặp</a></li><li><a href=#72-trap-syntax>7.2 Trap Syntax</a></li><li><a href=#73-cleanup-pattern>7.3 Cleanup Pattern</a></li><li><a href=#74-error-handling-pattern>7.4 Error Handling Pattern</a></li><li><a href=#75-graceful-shutdown>7.5 Graceful Shutdown</a></li></ul></li><li><a href=#8-debugging-techniques>8. DEBUGGING TECHNIQUES</a><ul><li><a href=#81-debug-options>8.1 Debug Options</a></li><li><a href=#82-debug-functions>8.2 Debug Functions</a></li><li><a href=#83-debugging-patterns>8.3 Debugging Patterns</a></li><li><a href=#84-common-issues--debug-tips>8.4 Common Issues & Debug Tips</a></li></ul></li><li><a href=#9-argument-parsing---getopts>9. ARGUMENT PARSING - GETOPTS</a><ul><li><a href=#91-getopts-cơ-bản>9.1 getopts cơ bản</a></li><li><a href=#92-long-options-với-getopt>9.2 Long Options với getopt</a></li><li><a href=#93-manual-parsing-flexible-nhất>9.3 Manual Parsing (flexible nhất)</a></li></ul></li><li><a href=#10-pattern-matching>10. PATTERN MATCHING</a><ul><li><a href=#101-glob-patterns>10.1 Glob Patterns</a></li><li><a href=#102-extended-globs-extglob>10.2 Extended Globs (extglob)</a></li><li><a href=#103-regex-trong-bash>10.3 Regex trong Bash</a></li><li><a href=#104-case-statement-patterns>10.4 Case Statement Patterns</a></li></ul></li><li><a href=#11-job-control>11. JOB CONTROL</a><ul><li><a href=#111-background-jobs>11.1 Background Jobs</a></li><li><a href=#112-wait-và-process-management>11.2 Wait và Process Management</a></li><li><a href=#113-disown-và-nohup>11.3 Disown và Nohup</a></li></ul></li><li><a href=#12-input-handling>12. INPUT HANDLING</a><ul><li><a href=#121-read-command>12.1 Read Command</a></li><li><a href=#122-select-menu>12.2 Select Menu</a></li><li><a href=#123-confirmation-prompts>12.3 Confirmation Prompts</a></li></ul></li><li><a href=#13-fish-shell-specifics>13. FISH SHELL SPECIFICS</a><ul><li><a href=#131-variables-trong-fish>13.1 Variables trong Fish</a></li><li><a href=#132-functions-trong-fish>13.2 Functions trong Fish</a></li><li><a href=#133-control-flow-trong-fish>13.3 Control Flow trong Fish</a></li><li><a href=#134-command-substitution-trong-fish>13.4 Command Substitution trong Fish</a></li><li><a href=#135-abbreviations-fish-unique-feature>13.5 Abbreviations (Fish Unique Feature)</a></li><li><a href=#136-completions-trong-fish>13.6 Completions trong Fish</a></li><li><a href=#137-fish-configuration>13.7 Fish Configuration</a></li></ul></li><li><a href=#14-bash-vs-fish-comparison>14. BASH VS FISH COMPARISON</a><ul><li><a href=#141-migration-examples>14.1 Migration Examples</a></li></ul></li><li><a href=#15-production-script-templates>15. PRODUCTION SCRIPT TEMPLATES</a><ul><li><a href=#151-bash-production-template>15.1 Bash Production Template</a></li><li><a href=#152-fish-production-template>15.2 Fish Production Template</a></li></ul></li><li><a href=#tóm-tắt-nhanh>TÓM TẮT NHANH</a><ul><li><a href=#bash-essentials>Bash Essentials</a></li><li><a href=#fish-essentials>Fish Essentials</a></li></ul></li><li><a href=#references>REFERENCES</a><ul><li><a href=#bash-resources>Bash Resources</a></li><li><a href=#fish-resources>Fish Resources</a></li><li><a href=#tools>Tools</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h2 class=heading-element id=1-script-structure--best-practices><span>1. SCRIPT STRUCTURE & BEST PRACTICES</span>
<a href=#1-script-structure--best-practices class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=11-shebang-và-script-header><span>1.1 Shebang và Script Header</span>
<a href=#11-shebang-v%c3%a0-script-header class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>#===============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>#   SCRIPT: deploy.sh</span>
</span></span><span class=line><span class=cl><span class=c1>#   AUTHOR: Your Name</span>
</span></span><span class=line><span class=cl><span class=c1>#   DATE:   2025-12-13</span>
</span></span><span class=line><span class=cl><span class=c1>#   VERSION: 1.0.0</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>#   DESCRIPTION:</span>
</span></span><span class=line><span class=cl><span class=c1>#       Script triển khai ứng dụng lên production server.</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>#   USAGE:</span>
</span></span><span class=line><span class=cl><span class=c1>#       ./deploy.sh [OPTIONS] &lt;environment&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>#   OPTIONS:</span>
</span></span><span class=line><span class=cl><span class=c1>#       -h, --help      Hiển thị help</span>
</span></span><span class=line><span class=cl><span class=c1>#       -v, --verbose   Chế độ verbose</span>
</span></span><span class=line><span class=cl><span class=c1>#       -d, --dry-run   Chạy thử, không thực sự deploy</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>#   EXAMPLES:</span>
</span></span><span class=line><span class=cl><span class=c1>#       ./deploy.sh production</span>
</span></span><span class=line><span class=cl><span class=c1>#       ./deploy.sh -v staging</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>#   DEPENDENCIES:</span>
</span></span><span class=line><span class=cl><span class=c1>#       - rsync</span>
</span></span><span class=line><span class=cl><span class=c1>#       - ssh</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>#===============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>set</span> -euo pipefail
</span></span><span class=line><span class=cl><span class=nv>IFS</span><span class=o>=</span><span class=s1>$&#39;\n\t&#39;</span></span></span></code></pre></div><h3 class=heading-element id=12-giải-thích-set-options><span>1.2 Giải thích set options</span>
<a href=#12-gi%e1%ba%a3i-th%c3%adch-set-options class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><table><thead><tr><th>Option</th><th>Ý nghĩa</th></tr></thead><tbody><tr><td>set -e</td><td>Exit ngay khi có lệnh fail (non-zero exit)</td></tr><tr><td>set -u</td><td>Exit khi dùng biến chưa định nghĩa</td></tr><tr><td>set -o pipefail</td><td>Pipe fail nếu bất kỳ command nào trong pipe fail</td></tr><tr><td>set -x</td><td>In ra từng lệnh trước khi chạy (debug)</td></tr><tr><td>set -v</td><td>In ra input lines khi đọc</td></tr><tr><td>set -n</td><td>Chỉ check syntax, không chạy thật</td></tr><tr><td>IFS=$&rsquo;\n\t'</td><td>Internal Field Separator - chỉ tách theo newline và tab</td></tr><tr><td></td><td>(không tách theo space - an toàn hơn với filename có space)</td></tr></tbody></table><h3 class=heading-element id=13-script-skeleton-chuẩn><span>1.3 Script Skeleton chuẩn</span>
<a href=#13-script-skeleton-chu%e1%ba%a9n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>set</span> -euo pipefail
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== CONSTANTS ================================================================</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>SCRIPT_NAME</span><span class=o>=</span><span class=k>$(</span>basename <span class=s2>&#34;</span><span class=nv>$0</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>SCRIPT_DIR</span><span class=o>=</span><span class=k>$(</span><span class=nb>cd</span> <span class=s2>&#34;</span><span class=k>$(</span>dirname <span class=s2>&#34;</span><span class=nv>$0</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>&#34;</span> <span class=o>&amp;&amp;</span> <span class=nb>pwd</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>VERSION</span><span class=o>=</span><span class=s2>&#34;1.0.0&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== COLORS ===================================================================</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>RED</span><span class=o>=</span><span class=s1>&#39;\033[0;31m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>GREEN</span><span class=o>=</span><span class=s1>&#39;\033[0;32m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>YELLOW</span><span class=o>=</span><span class=s1>&#39;\033[1;33m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>BLUE</span><span class=o>=</span><span class=s1>&#39;\033[0;34m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>NC</span><span class=o>=</span><span class=s1>&#39;\033[0m&#39;</span>  <span class=c1># No Color</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== GLOBAL VARIABLES =========================================================</span>
</span></span><span class=line><span class=cl><span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>DRY_RUN</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>LOG_FILE</span><span class=o>=</span><span class=s2>&#34;/tmp/</span><span class=si>${</span><span class=nv>SCRIPT_NAME</span><span class=p>%.*</span><span class=si>}</span><span class=s2>.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== FUNCTIONS ================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>log_info<span class=o>()</span>    <span class=o>{</span> <span class=nb>echo</span> -e <span class=s2>&#34;</span><span class=si>${</span><span class=nv>GREEN</span><span class=si>}</span><span class=s2>[INFO]</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_warn<span class=o>()</span>    <span class=o>{</span> <span class=nb>echo</span> -e <span class=s2>&#34;</span><span class=si>${</span><span class=nv>YELLOW</span><span class=si>}</span><span class=s2>[WARN]</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span>2<span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_error<span class=o>()</span>   <span class=o>{</span> <span class=nb>echo</span> -e <span class=s2>&#34;</span><span class=si>${</span><span class=nv>RED</span><span class=si>}</span><span class=s2>[ERROR]</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span>2<span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_debug<span class=o>()</span>   <span class=o>{</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$VERBOSE</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=nb>true</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> -e <span class=s2>&#34;</span><span class=si>${</span><span class=nv>BLUE</span><span class=si>}</span><span class=s2>[DEBUG]</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>die<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    log_error <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>2</span><span class=k>:-</span><span class=nv>1</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>usage<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    cat <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>Usage: $SCRIPT_NAME [OPTIONS] &lt;argument&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Options:
</span></span></span><span class=line><span class=cl><span class=s>    -h, --help      Show this help message
</span></span></span><span class=line><span class=cl><span class=s>    -v, --verbose   Enable verbose mode
</span></span></span><span class=line><span class=cl><span class=s>    -d, --dry-run   Dry run mode
</span></span></span><span class=line><span class=cl><span class=s>    -V, --version   Show version
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Examples:
</span></span></span><span class=line><span class=cl><span class=s>    $SCRIPT_NAME -v production
</span></span></span><span class=line><span class=cl><span class=s>    $SCRIPT_NAME --dry-run staging
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cleanup<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># Cleanup code here</span>
</span></span><span class=line><span class=cl>    log_debug <span class=s2>&#34;Cleaning up...&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== MAIN =====================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># Parse arguments</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=o>[[</span> <span class=nv>$#</span> -gt <span class=m>0</span> <span class=o>]]</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=nv>$1</span> in
</span></span><span class=line><span class=cl>            -h<span class=p>|</span>--help<span class=o>)</span>    usage<span class=p>;</span> <span class=nb>exit</span> <span class=m>0</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>            -v<span class=p>|</span>--verbose<span class=o>)</span> <span class=nv>VERBOSE</span><span class=o>=</span>true<span class=p>;</span> <span class=nb>shift</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>            -d<span class=p>|</span>--dry-run<span class=o>)</span> <span class=nv>DRY_RUN</span><span class=o>=</span>true<span class=p>;</span> <span class=nb>shift</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>            -V<span class=p>|</span>--version<span class=o>)</span> <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VERSION</span><span class=s2>&#34;</span><span class=p>;</span> <span class=nb>exit</span> <span class=m>0</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>            -*<span class=o>)</span>           die <span class=s2>&#34;Unknown option: </span><span class=nv>$1</span><span class=s2>&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>            *<span class=o>)</span>            <span class=nb>break</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        <span class=k>esac</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Validate arguments</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> <span class=nv>$#</span> -lt <span class=m>1</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=o>{</span> usage<span class=p>;</span> die <span class=s2>&#34;Missing required argument&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>environment</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    log_info <span class=s2>&#34;Starting deployment to </span><span class=nv>$environment</span><span class=s2>...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Your main logic here</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    log_info <span class=s2>&#34;Done!&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Trap for cleanup</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> cleanup EXIT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Run main</span>
</span></span><span class=line><span class=cl>main <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span></span></span></code></pre></div><hr><h2 class=heading-element id=2-functions><span>2. FUNCTIONS</span>
<a href=#2-functions class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=21-cú-pháp-định-nghĩa-function><span>2.1 Cú pháp định nghĩa Function</span>
<a href=#21-c%c3%ba-ph%c3%a1p-%c4%91%e1%bb%8bnh-ngh%c4%a9a-function class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Cách 1: Cú pháp POSIX (tương thích nhất)</span>
</span></span><span class=line><span class=cl>function_name<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># code</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cách 2: Có từ khóa function (Bash specific)</span>
</span></span><span class=line><span class=cl><span class=k>function</span> function_name <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># code</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cách 3: Kết hợp (Bash specific)</span>
</span></span><span class=line><span class=cl><span class=k>function</span> function_name<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># code</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><h3 class=heading-element id=22-arguments-trong-function><span>2.2 Arguments trong Function</span>
<a href=#22-arguments-trong-function class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>greet<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>           <span class=c1># Tham số đầu tiên</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>greeting</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>2</span><span class=k>:-</span><span class=nv>Hello</span><span class=si>}</span><span class=s2>&#34;</span>  <span class=c1># Tham số 2, default &#34;Hello&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$greeting</span><span class=s2>, </span><span class=nv>$name</span><span class=s2>!&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Các biến đặc biệt trong function:</span>
</span></span><span class=line><span class=cl>    <span class=c1># $0    - Tên script (KHÔNG phải tên function)</span>
</span></span><span class=line><span class=cl>    <span class=c1># $1-$9 - Tham số 1-9</span>
</span></span><span class=line><span class=cl>    <span class=c1># ${10} - Tham số 10 trở lên (cần braces)</span>
</span></span><span class=line><span class=cl>    <span class=c1># $#    - Số lượng tham số</span>
</span></span><span class=line><span class=cl>    <span class=c1># $@    - Tất cả tham số (mỗi tham số là 1 phần tử riêng)</span>
</span></span><span class=line><span class=cl>    <span class=c1># $*    - Tất cả tham số (gộp thành 1 string)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>greet <span class=s2>&#34;World&#34;</span>           <span class=c1># Output: Hello, World!</span>
</span></span><span class=line><span class=cl>greet <span class=s2>&#34;World&#34;</span> <span class=s2>&#34;Hi&#34;</span>      <span class=c1># Output: Hi, World!</span></span></span></code></pre></div><h3 class=heading-element id=23-return-values><span>2.3 Return Values</span>
<a href=#23-return-values class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Return chỉ trả về exit status (0-255)</span>
</span></span><span class=line><span class=cl><span class=c1># Không thể return string trực tiếp</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cách 1: Echo và capture</span>
</span></span><span class=line><span class=cl>get_hostname<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    hostname -f
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nv>my_host</span><span class=o>=</span><span class=k>$(</span>get_hostname<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cách 2: Global variable</span>
</span></span><span class=line><span class=cl><span class=nv>RESULT</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>calculate<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>RESULT</span><span class=o>=</span><span class=k>$((</span> <span class=nv>$1</span> <span class=o>+</span> <span class=nv>$2</span> <span class=k>))</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>calculate <span class=m>5</span> <span class=m>3</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$RESULT</span><span class=s2>&#34;</span>  <span class=c1># 8</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cách 3: Nameref (Bash 4.3+)</span>
</span></span><span class=line><span class=cl>calculate_v2<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> -n <span class=nv>result</span><span class=o>=</span><span class=nv>$1</span>  <span class=c1># nameref đến biến được truyền vào</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>a</span><span class=o>=</span><span class=nv>$2</span> <span class=nv>b</span><span class=o>=</span><span class=nv>$3</span>
</span></span><span class=line><span class=cl>    <span class=nv>result</span><span class=o>=</span><span class=k>$((</span> a <span class=o>+</span> b <span class=k>))</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nb>declare</span> sum
</span></span><span class=line><span class=cl>calculate_v2 sum <span class=m>5</span> <span class=m>3</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$sum</span><span class=s2>&#34;</span>  <span class=c1># 8</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cách 4: Return status để check thành công/thất bại</span>
</span></span><span class=line><span class=cl>is_root<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> <span class=nv>$EUID</span> -eq <span class=m>0</span> <span class=o>]]</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> is_root<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Running as root&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Not root&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span></span></span></code></pre></div><h3 class=heading-element id=24-local-variables><span>2.4 Local Variables</span>
<a href=#24-local-variables class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>global_var</span><span class=o>=</span><span class=s2>&#34;I&#39;m global&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>test_scope<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>local_var</span><span class=o>=</span><span class=s2>&#34;I&#39;m local&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>global_var</span><span class=o>=</span><span class=s2>&#34;Modified global&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Inside function:&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;  local_var: </span><span class=nv>$local_var</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;  global_var: </span><span class=nv>$global_var</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>test_scope
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Outside function:&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;  local_var: </span><span class=si>${</span><span class=nv>local_var</span><span class=k>:-</span><span class=nv>undefined</span><span class=si>}</span><span class=s2>&#34;</span>  <span class=c1># undefined</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;  global_var: </span><span class=nv>$global_var</span><span class=s2>&#34;</span>              <span class=c1># Modified global</span></span></span></code></pre></div><h3 class=heading-element id=25-recursion><span>2.5 Recursion</span>
<a href=#25-recursion class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Factorial với recursion</span>
</span></span><span class=line><span class=cl>factorial<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>n</span><span class=o>=</span><span class=nv>$1</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>((</span> n &lt;<span class=o>=</span> <span class=m>1</span> <span class=o>))</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=nb>local</span> <span class=nv>prev</span><span class=o>=</span><span class=k>$(</span>factorial <span class=k>$((</span>n <span class=o>-</span> <span class=m>1</span><span class=k>)))</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=k>$((</span>n <span class=o>*</span> prev<span class=k>))</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;5! = </span><span class=k>$(</span>factorial 5<span class=k>)</span><span class=s2>&#34;</span>  <span class=c1># 120</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Directory tree recursion</span>
</span></span><span class=line><span class=cl>print_tree<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>dir</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>1</span><span class=k>:-</span><span class=p>.</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>prefix</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>2</span><span class=k>:-</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>items</span><span class=o>=(</span><span class=s2>&#34;</span><span class=nv>$dir</span><span class=s2>&#34;</span>/*<span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>count</span><span class=o>=</span><span class=si>${#</span><span class=nv>items</span><span class=p>[@]</span><span class=si>}</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>i</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> item in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>items</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=o>((</span>i++<span class=o>))</span>
</span></span><span class=line><span class=cl>        <span class=nb>local</span> <span class=nv>name</span><span class=o>=</span><span class=k>$(</span>basename <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>[[</span> <span class=nv>$i</span> -eq <span class=nv>$count</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>prefix</span><span class=si>}</span><span class=s2>└── </span><span class=nv>$name</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=o>[[</span> -d <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> print_tree <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>prefix</span><span class=si>}</span><span class=s2>    &#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>prefix</span><span class=si>}</span><span class=s2>├── </span><span class=nv>$name</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=o>[[</span> -d <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> print_tree <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>prefix</span><span class=si>}</span><span class=s2>│   &#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><h3 class=heading-element id=26-function-library-pattern><span>2.6 Function Library Pattern</span>
<a href=#26-function-library-pattern class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># lib/logging.sh</span>
</span></span><span class=line><span class=cl><span class=c1>#!/usr/bin/env bash</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Prevent multiple sourcing</span>
</span></span><span class=line><span class=cl><span class=o>[[</span> -n <span class=s2>&#34;</span><span class=si>${</span><span class=nv>_LOGGING_SH</span><span class=k>:-</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=k>return</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>_LOGGING_SH</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>log_info<span class=o>()</span>  <span class=o>{</span> <span class=nb>echo</span> <span class=s2>&#34;[INFO] </span><span class=k>$(</span>date <span class=s1>&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class=k>)</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_warn<span class=o>()</span>  <span class=o>{</span> <span class=nb>echo</span> <span class=s2>&#34;[WARN] </span><span class=k>$(</span>date <span class=s1>&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class=k>)</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span>2<span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_error<span class=o>()</span> <span class=o>{</span> <span class=nb>echo</span> <span class=s2>&#34;[ERROR] </span><span class=k>$(</span>date <span class=s1>&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class=k>)</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span>2<span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># main.sh</span>
</span></span><span class=line><span class=cl><span class=c1>#!/usr/bin/env bash</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> <span class=s2>&#34;</span><span class=k>$(</span>dirname <span class=s2>&#34;</span><span class=nv>$0</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>/lib/logging.sh&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>log_info <span class=s2>&#34;Script started&#34;</span></span></span></code></pre></div><hr><h2 class=heading-element id=3-arrays><span>3. ARRAYS</span>
<a href=#3-arrays class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=31-indexed-arrays><span>3.1 Indexed Arrays</span>
<a href=#31-indexed-arrays class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Khai báo</span>
</span></span><span class=line><span class=cl><span class=nb>declare</span> -a fruits          <span class=c1># Khai báo tường minh (optional)</span>
</span></span><span class=line><span class=cl><span class=nv>fruits</span><span class=o>=(</span><span class=s2>&#34;apple&#34;</span> <span class=s2>&#34;banana&#34;</span> <span class=s2>&#34;cherry&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Thêm phần tử</span>
</span></span><span class=line><span class=cl><span class=nv>fruits</span><span class=o>+=(</span><span class=s2>&#34;date&#34;</span><span class=o>)</span>           <span class=c1># Append</span>
</span></span><span class=line><span class=cl>fruits<span class=o>[</span>10<span class=o>]=</span><span class=s2>&#34;elderberry&#34;</span>    <span class=c1># Gán vào index cụ thể (sparse array)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Truy cập</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>fruits</span><span class=p>[0]</span><span class=si>}</span><span class=s2>&#34;</span>        <span class=c1># apple</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>fruits</span><span class=p>[-1]</span><span class=si>}</span><span class=s2>&#34;</span>       <span class=c1># Phần tử cuối (Bash 4.3+)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>fruits</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span>        <span class=c1># Tất cả phần tử</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=p>!fruits[@]</span><span class=si>}</span><span class=s2>&#34;</span>       <span class=c1># Tất cả indices</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${#</span><span class=nv>fruits</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span>       <span class=c1># Số lượng phần tử</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Slice</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>fruits</span><span class=p>[@]:</span><span class=nv>1</span><span class=p>:</span><span class=nv>2</span><span class=si>}</span><span class=s2>&#34;</span>    <span class=c1># 2 phần tử từ index 1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Xóa</span>
</span></span><span class=line><span class=cl><span class=nb>unset</span> <span class=s1>&#39;fruits[1]&#39;</span>          <span class=c1># Xóa phần tử (để lại gap)</span>
</span></span><span class=line><span class=cl><span class=nv>fruits</span><span class=o>=(</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>fruits</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=o>)</span>    <span class=c1># Re-index để xóa gaps</span></span></span></code></pre></div><h3 class=heading-element id=32-associative-arrays-bash-40><span>3.2 Associative Arrays (Bash 4.0+)</span>
<a href=#32-associative-arrays-bash-40 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Khai báo (BẮT BUỘC declare -A)</span>
</span></span><span class=line><span class=cl><span class=nb>declare</span> -A user_info
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Gán giá trị</span>
</span></span><span class=line><span class=cl>user_info<span class=o>[</span>name<span class=o>]=</span><span class=s2>&#34;John&#34;</span>
</span></span><span class=line><span class=cl>user_info<span class=o>[</span>email<span class=o>]=</span><span class=s2>&#34;john@example.com&#34;</span>
</span></span><span class=line><span class=cl>user_info<span class=o>[</span>role<span class=o>]=</span><span class=s2>&#34;admin&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hoặc gán một lần</span>
</span></span><span class=line><span class=cl><span class=nb>declare</span> -A <span class=nv>server</span><span class=o>=(</span>
</span></span><span class=line><span class=cl>    <span class=o>[</span>ip<span class=o>]=</span><span class=s2>&#34;192.168.1.100&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>[</span>port<span class=o>]=</span><span class=s2>&#34;22&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>[</span>user<span class=o>]=</span><span class=s2>&#34;root&#34;</span>
</span></span><span class=line><span class=cl><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Truy cập</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>user_info</span><span class=p>[name]</span><span class=si>}</span><span class=s2>&#34;</span>      <span class=c1># John</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>user_info</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span>         <span class=c1># Tất cả values</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=p>!user_info[@]</span><span class=si>}</span><span class=s2>&#34;</span>        <span class=c1># Tất cả keys</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${#</span><span class=nv>user_info</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span>        <span class=c1># Số lượng entries</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check key exists</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> -v user_info<span class=o>[</span>email<span class=o>]</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Email exists&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Loop</span>
</span></span><span class=line><span class=cl><span class=k>for</span> key in <span class=s2>&#34;</span><span class=si>${</span><span class=p>!user_info[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$key</span><span class=s2>: </span><span class=si>${</span><span class=nv>user_info</span><span class=p>[</span><span class=nv>$key</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></div><h3 class=heading-element id=33-array-operations><span>3.3 Array Operations</span>
<a href=#33-array-operations class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><table><thead><tr><th>Operation</th><th>Syntax</th></tr></thead><tbody><tr><td>Khai báo indexed array</td><td>arr=(&ldquo;a&rdquo; &ldquo;b&rdquo; &ldquo;c&rdquo;)</td></tr><tr><td>Khai báo associative array</td><td>declare -A arr=([k1]=&ldquo;v1&rdquo; [k2]=&ldquo;v2&rdquo;)</td></tr><tr><td>Truy cập phần tử</td><td><span class=katex-error title="ParseError: KaTeX parse error: LaTeX-incompatible input and strict mode is set to 'error': Unrecognized Unicode character &#34;ặ&#34; (7863) [unknownSymbol] at position 12: {arr[0]} hoặ̲c " style=color:#ff4949>{arr[0]} hoặc </span>{arr[key]}</td></tr><tr><td>Tất cả phần tử</td><td><span class=katex-error title="ParseError: KaTeX parse error: LaTeX-incompatible input and strict mode is set to 'error': Unrecognized Unicode character &#34;ặ&#34; (7863) [unknownSymbol] at position 12: {arr[@]} hoặ̲c " style=color:#ff4949>{arr[@]} hoặc </span>{arr[*]}</td></tr><tr><td>Tất cả indices/keys</td><td>${!arr[@]}</td></tr><tr><td>Số lượng phần tử</td><td>${#arr[@]}</td></tr><tr><td>Độ dài phần tử</td><td>${#arr[0]}</td></tr><tr><td>Append</td><td>arr+=(&ldquo;new&rdquo;)</td></tr><tr><td>Slice</td><td>${arr[@]:start:length}</td></tr><tr><td>Xóa phần tử</td><td>unset &lsquo;arr[index]&rsquo;</td></tr><tr><td>Xóa toàn bộ array</td><td>unset arr</td></tr><tr><td>Copy array</td><td>new_arr=("${arr[@]}")</td></tr><tr><td>Check empty</td><td>[[${#arr[@]} -eq 0]]</td></tr><tr><td>Check key exists</td><td>[[-v arr[key]]]</td></tr></tbody></table><h3 class=heading-element id=34-array-patterns-thực-tế><span>3.4 Array Patterns thực tế</span>
<a href=#34-array-patterns-th%e1%bb%b1c-t%e1%ba%bf class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Đọc file vào array</span>
</span></span><span class=line><span class=cl>mapfile -t lines &lt; file.txt           <span class=c1># Bash 4.0+</span>
</span></span><span class=line><span class=cl>readarray -t lines &lt; file.txt         <span class=c1># Alias của mapfile</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hoặc với while loop (POSIX compatible)</span>
</span></span><span class=line><span class=cl><span class=nv>lines</span><span class=o>=()</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span> <span class=nb>read</span> -r line<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>lines</span><span class=o>+=(</span><span class=s2>&#34;</span><span class=nv>$line</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>done</span> &lt; file.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Split string thành array</span>
</span></span><span class=line><span class=cl><span class=nv>IFS</span><span class=o>=</span><span class=s1>&#39;,&#39;</span> <span class=nb>read</span> -ra parts <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;a,b,c,d&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>parts</span><span class=p>[1]</span><span class=si>}</span><span class=s2>&#34;</span>  <span class=c1># b</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Array từ command output</span>
</span></span><span class=line><span class=cl><span class=nv>files</span><span class=o>=(</span><span class=k>$(</span>ls *.txt<span class=k>)</span><span class=o>)</span>           <span class=c1># Không an toàn với spaces</span>
</span></span><span class=line><span class=cl>mapfile -t files &lt; &lt;<span class=o>(</span>ls *.txt<span class=o>)</span>  <span class=c1># An toàn hơn</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Join array thành string</span>
</span></span><span class=line><span class=cl><span class=nv>joined</span><span class=o>=</span><span class=k>$(</span><span class=nv>IFS</span><span class=o>=</span><span class=s1>&#39;,&#39;</span><span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>arr</span><span class=p>[*]</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Filter array</span>
</span></span><span class=line><span class=cl><span class=nv>filtered</span><span class=o>=()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> item in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>arr</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> <span class=nv>$item</span> <span class=o>==</span> *pattern* <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nv>filtered</span><span class=o>+=(</span><span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Unique values</span>
</span></span><span class=line><span class=cl><span class=nb>declare</span> -A seen
</span></span><span class=line><span class=cl><span class=nv>unique</span><span class=o>=()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> item in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>arr</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> ! -v seen<span class=o>[</span><span class=nv>$item</span><span class=o>]</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        seen<span class=o>[</span><span class=nv>$item</span><span class=o>]=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>        <span class=nv>unique</span><span class=o>+=(</span><span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Sort array</span>
</span></span><span class=line><span class=cl><span class=nv>sorted</span><span class=o>=(</span><span class=k>$(</span><span class=nb>printf</span> <span class=s1>&#39;%s\n&#39;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>arr</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span> <span class=p>|</span> sort<span class=k>)</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Reverse array</span>
</span></span><span class=line><span class=cl><span class=nv>reversed</span><span class=o>=()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>((</span><span class=nv>i</span><span class=o>=</span><span class=si>${#</span><span class=nv>arr</span><span class=p>[@]</span><span class=si>}</span>-1<span class=p>;</span> i&gt;<span class=o>=</span>0<span class=p>;</span> i--<span class=o>))</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>reversed</span><span class=o>+=(</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>arr</span><span class=p>[i]</span><span class=si>}</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></div><hr><h2 class=heading-element id=4-string-manipulation><span>4. STRING MANIPULATION</span>
<a href=#4-string-manipulation class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=41-parameter-expansion><span>4.1 Parameter Expansion</span>
<a href=#41-parameter-expansion class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><table><thead><tr><th>Syntax</th><th>Description</th></tr></thead><tbody><tr><td>${var}</td><td>Giá trị của var</td></tr><tr><td>${var:-default}</td><td>Nếu var unset/empty, dùng default</td></tr><tr><td>${var:=default}</td><td>Nếu var unset/empty, gán default và dùng</td></tr><tr><td>${var:+alternate}</td><td>Nếu var có giá trị, dùng alternate</td></tr><tr><td>${var:?error_msg}</td><td>Nếu var unset/empty, in error và exit</td></tr><tr><td>${#var}</td><td>Độ dài string</td></tr><tr><td>${var:offset}</td><td>Substring từ offset đến hết</td></tr><tr><td>${var:offset:length}</td><td>Substring từ offset, lấy length ký tự</td></tr></tbody></table><h3 class=heading-element id=42-pattern-removal><span>4.2 Pattern Removal</span>
<a href=#42-pattern-removal class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=err>┌─────────────────────────────────────────────────────────────────────────────┐</span>
</span></span><span class=line><span class=cl><span class=err>│</span>                    <span class=n>PATTERN</span> <span class=n>REMOVAL</span>                                          <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>├────────────────────────┬──────────────────────┬─────────────────────────────┤</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>Syntax</span>                 <span class=err>│</span> <span class=n>Example</span>              <span class=err>│</span> <span class=n>Result</span>                      <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>├────────────────────────┼──────────────────────┼─────────────────────────────┤</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=o>$</span><span class=p>{</span><span class=k>var</span><span class=c1>#pattern}         │ ${path#*/}           │ Xóa shortest match từ đầu   │</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=o>$</span><span class=p>{</span><span class=k>var</span><span class=c1>##pattern}        │ ${path##*/}          │ Xóa longest match từ đầu    │</span>
</span></span><span class=line><span class=cl><span class=err>│</span>                        <span class=err>│</span> <span class=p>(</span><span class=o>=</span> <span class=n>basename</span><span class=p>)</span>         <span class=err>│</span>                             <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>├────────────────────────┼──────────────────────┼─────────────────────────────┤</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=o>$</span><span class=p>{</span><span class=k>var</span><span class=o>%</span><span class=n>pattern</span><span class=p>}</span>         <span class=err>│</span> <span class=o>$</span><span class=p>{</span><span class=n>path</span><span class=o>%/*</span><span class=p>}</span>           <span class=err>│</span> <span class=n>Xóa</span> <span class=n>shortest</span> <span class=n>match</span> <span class=n>từ</span> <span class=n>cuối</span>  <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=o>$</span><span class=p>{</span><span class=k>var</span><span class=o>%%</span><span class=n>pattern</span><span class=p>}</span>        <span class=err>│</span> <span class=o>$</span><span class=p>{</span><span class=n>path</span><span class=o>%%/*</span><span class=p>}</span>          <span class=err>│</span> <span class=n>Xóa</span> <span class=n>longest</span> <span class=n>match</span> <span class=n>từ</span> <span class=n>cuối</span>   <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span>                        <span class=err>│</span> <span class=p>(</span><span class=o>=</span> <span class=n>dirname</span><span class=p>)</span>          <span class=err>│</span>                             <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>└────────────────────────┴──────────────────────┴─────────────────────────────┘</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Ví</span> <span class=n>dụ</span> <span class=n>thực</span> <span class=n>tế</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span><span class=o>=</span><span class=s2>&#34;/home/user/documents/file.txt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>$</span><span class=p>{</span><span class=n>path</span><span class=c1>#*/}     → home/user/documents/file.txt</span>
</span></span><span class=line><span class=cl>    <span class=o>$</span><span class=p>{</span><span class=n>path</span><span class=c1>##*/}    → file.txt                      # basename</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>$</span><span class=p>{</span><span class=n>path</span><span class=o>%/*</span><span class=p>}</span>     <span class=err>→</span> <span class=o>/</span><span class=n>home</span><span class=o>/</span><span class=n>user</span><span class=o>/</span><span class=n>documents</span>          <span class=c1># dirname</span>
</span></span><span class=line><span class=cl>    <span class=o>$</span><span class=p>{</span><span class=n>path</span><span class=o>%%/*</span><span class=p>}</span>    <span class=err>→</span> <span class=p>(</span><span class=n>empty</span> <span class=n>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>file</span><span class=o>=</span><span class=s2>&#34;archive.tar.gz&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>$</span><span class=p>{</span><span class=n>file</span><span class=o>%.*</span><span class=p>}</span>     <span class=err>→</span> <span class=n>archive</span><span class=o>.</span><span class=n>tar</span>                   <span class=c1># remove last extension</span>
</span></span><span class=line><span class=cl>    <span class=o>$</span><span class=p>{</span><span class=n>file</span><span class=o>%%.*</span><span class=p>}</span>    <span class=err>→</span> <span class=n>archive</span>                       <span class=c1># remove all extensions</span>
</span></span><span class=line><span class=cl>    <span class=o>$</span><span class=p>{</span><span class=n>file</span><span class=c1>#*.}     → tar.gz                        # get extensions</span>
</span></span><span class=line><span class=cl>    <span class=o>$</span><span class=p>{</span><span class=n>file</span><span class=c1>##*.}    → gz                            # get last extension</span></span></span></code></pre></div><h3 class=heading-element id=43-pattern-replacement><span>4.3 Pattern Replacement</span>
<a href=#43-pattern-replacement class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><table><thead><tr><th>Syntax</th><th>Description</th></tr></thead><tbody><tr><td>${var/pattern/replace}</td><td>Replace first match</td></tr><tr><td>${var//pattern/replace}</td><td>Replace all matches</td></tr><tr><td>${var/#pattern/replace}</td><td>Replace if matches at beginning</td></tr><tr><td>${var/%pattern/replace}</td><td>Replace if matches at end</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Ví dụ:
</span></span><span class=line><span class=cl>    str=&#34;hello world world&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    ${str/world/bash}    → hello bash world
</span></span><span class=line><span class=cl>    ${str//world/bash}   → hello bash bash
</span></span><span class=line><span class=cl>    ${str/#hello/hi}     → hi world world
</span></span><span class=line><span class=cl>    ${str/%world/bash}   → hello world bash
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    # Xóa pattern (replace với empty)
</span></span><span class=line><span class=cl>    ${str// /}           → helloworldworld</span></span></code></pre></div><h3 class=heading-element id=44-case-modification-bash-40><span>4.4 Case Modification (Bash 4.0+)</span>
<a href=#44-case-modification-bash-40 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><table><thead><tr><th>Syntax</th><th>Description</th></tr></thead><tbody><tr><td>${var^}</td><td>Uppercase first character</td></tr><tr><td>${var^^}</td><td>Uppercase all characters</td></tr><tr><td>${var,}</td><td>Lowercase first character</td></tr><tr><td>${var,,}</td><td>Lowercase all characters</td></tr><tr><td>${var~}</td><td>Toggle case first character</td></tr><tr><td>${var~~}</td><td>Toggle case all characters</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Ví dụ:
</span></span><span class=line><span class=cl>    str=&#34;hello WORLD&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    ${str^}      → Hello WORLD
</span></span><span class=line><span class=cl>    ${str^^}     → HELLO WORLD
</span></span><span class=line><span class=cl>    ${str,}      → hello WORLD
</span></span><span class=line><span class=cl>    ${str,,}     → hello world</span></span></code></pre></div><h3 class=heading-element id=45-string-operations-thực-tế><span>4.5 String Operations thực tế</span>
<a href=#45-string-operations-th%e1%bb%b1c-t%e1%ba%bf class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check string rỗng</span>
</span></span><span class=line><span class=cl><span class=o>[[</span> -z <span class=s2>&#34;</span><span class=nv>$str</span><span class=s2>&#34;</span> <span class=o>]]</span>        <span class=c1># True nếu empty</span>
</span></span><span class=line><span class=cl><span class=o>[[</span> -n <span class=s2>&#34;</span><span class=nv>$str</span><span class=s2>&#34;</span> <span class=o>]]</span>        <span class=c1># True nếu not empty</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check substring</span>
</span></span><span class=line><span class=cl><span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$str</span><span class=s2>&#34;</span> <span class=o>==</span> *<span class=s2>&#34;pattern&#34;</span>* <span class=o>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check prefix/suffix</span>
</span></span><span class=line><span class=cl><span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$str</span><span class=s2>&#34;</span> <span class=o>==</span> prefix* <span class=o>]]</span>
</span></span><span class=line><span class=cl><span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$str</span><span class=s2>&#34;</span> <span class=o>==</span> *suffix <span class=o>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Trim whitespace</span>
</span></span><span class=line><span class=cl><span class=nv>str</span><span class=o>=</span><span class=s2>&#34;  hello world  &#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Trim leading</span>
</span></span><span class=line><span class=cl><span class=nv>str</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>str</span><span class=p>#</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>str</span><span class=p>%%[![:</span><span class=nv>space</span><span class=p>:]]*</span><span class=si>}</span><span class=s2>&#34;</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Trim trailing</span>
</span></span><span class=line><span class=cl><span class=nv>str</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>str</span><span class=p>%</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>str</span><span class=p>##*[![:</span><span class=nv>space</span><span class=p>:]]</span><span class=si>}</span><span class=s2>&#34;</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Hoặc dùng xargs (đơn giản hơn)</span>
</span></span><span class=line><span class=cl><span class=nv>str</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$str</span><span class=s2>&#34;</span> <span class=p>|</span> xargs<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Split string</span>
</span></span><span class=line><span class=cl><span class=nv>IFS</span><span class=o>=</span><span class=s1>&#39;:&#39;</span> <span class=nb>read</span> -ra parts <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=nv>$PATH</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Join array</span>
</span></span><span class=line><span class=cl><span class=nv>joined</span><span class=o>=</span><span class=k>$(</span><span class=nv>IFS</span><span class=o>=</span><span class=s1>&#39;,&#39;</span><span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>arr</span><span class=p>[*]</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Pad string</span>
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s1>&#39;%05d&#39;</span> <span class=m>42</span>          <span class=c1># 00042 (số)</span>
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s1>&#39;%-10s&#39;</span> <span class=s2>&#34;hello&#34;</span>    <span class=c1># &#34;hello     &#34; (left align)</span>
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s1>&#39;%10s&#39;</span> <span class=s2>&#34;hello&#34;</span>     <span class=c1># &#34;     hello&#34; (right align)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Repeat string</span>
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s1>&#39;=%.0s&#39;</span> <span class=o>{</span>1..50<span class=o>}</span>    <span class=c1># 50 dấu =</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Extract with regex (Bash 3.0+)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$str</span><span class=s2>&#34;</span> <span class=o>=</span>~ regex <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>BASH_REMATCH</span><span class=p>[0]</span><span class=si>}</span><span class=s2>&#34;</span>  <span class=c1># Full match</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>BASH_REMATCH</span><span class=p>[1]</span><span class=si>}</span><span class=s2>&#34;</span>  <span class=c1># First capture group</span>
</span></span><span class=line><span class=cl><span class=k>fi</span></span></span></code></pre></div><hr><h2 class=heading-element id=5-arithmetic-operations><span>5. ARITHMETIC OPERATIONS</span>
<a href=#5-arithmetic-operations class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=51-arithmetic-expansion><span>5.1 Arithmetic Expansion</span>
<a href=#51-arithmetic-expansion class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># $(( expression )) - Cách được khuyến nghị</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$((</span><span class=m>5</span> <span class=o>+</span> <span class=m>3</span><span class=k>))</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$((</span>a <span class=o>*</span> b<span class=k>))</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$((</span><span class=m>2</span> <span class=o>**</span> <span class=m>10</span><span class=k>))</span>       <span class=c1># Power: 1024</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># let - Gán trực tiếp</span>
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=s2>&#34;result = 5 + 3&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=s2>&#34;count++&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=s2>&#34;a += 5&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># expr - External command (legacy, chậm hơn)</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$(</span>expr <span class=m>5</span> + 3<span class=k>)</span>      <span class=c1># Cần space giữa operators</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># (( )) - Arithmetic evaluation</span>
</span></span><span class=line><span class=cl><span class=o>((</span> count++ <span class=o>))</span>
</span></span><span class=line><span class=cl><span class=o>((</span> <span class=nv>total</span> <span class=o>=</span> a + b <span class=o>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Dùng trong if</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>((</span> a &gt; b <span class=o>))</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;a is greater&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span></span></span></code></pre></div><h3 class=heading-element id=52-operators><span>5.2 Operators</span>
<a href=#52-operators class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────────────────────────────────────────────────────────────────────────┐
</span></span><span class=line><span class=cl>│                    ARITHMETIC OPERATORS                                     │
</span></span><span class=line><span class=cl>├────────────────────────┬────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ Operator               │ Description                                        │
</span></span><span class=line><span class=cl>├────────────────────────┼────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ + - * /                │ Cộng, trừ, nhân, chia                              │
</span></span><span class=line><span class=cl>│ %                      │ Modulo (phần dư)                                   │
</span></span><span class=line><span class=cl>│ **                     │ Lũy thừa                                           │
</span></span><span class=line><span class=cl>├────────────────────────┼────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ ++ --                  │ Increment, decrement                               │
</span></span><span class=line><span class=cl>│ += -= *= /= %=         │ Assignment operators                               │
</span></span><span class=line><span class=cl>├────────────────────────┼────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ &lt; &lt;= &gt; &gt;= == !=        │ Comparison (trong (( )))                           │
</span></span><span class=line><span class=cl>│ &amp;&amp; ||                  │ Logical AND, OR (trong (( )))                      │
</span></span><span class=line><span class=cl>├────────────────────────┼────────────────────────────────────────────────────┤
</span></span><span class=line><span class=cl>│ &amp; | ^ ~                │ Bitwise AND, OR, XOR, NOT                          │
</span></span><span class=line><span class=cl>│ &lt;&lt; &gt;&gt;                  │ Bit shift left, right                              │
</span></span><span class=line><span class=cl>└────────────────────────┴────────────────────────────────────────────────────┘</span></span></code></pre></div><h3 class=heading-element id=53-floating-point><span>5.3 Floating Point</span>
<a href=#53-floating-point class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Bash KHÔNG hỗ trợ floating point trực tiếp</span>
</span></span><span class=line><span class=cl><span class=c1># Dùng bc hoặc awk</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># bc - Basic Calculator</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;scale=2; 10 / 3&#34;</span> <span class=p>|</span> bc<span class=k>)</span>      <span class=c1># 3.33</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;scale=4; sqrt(2)&#34;</span> <span class=p>|</span> bc -l<span class=k>)</span>   <span class=c1># 1.4142</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># awk</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$(</span>awk <span class=s2>&#34;BEGIN {printf \&#34;%.2f\&#34;, 10/3}&#34;</span><span class=k>)</span>  <span class=c1># 3.33</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$(</span>awk <span class=s2>&#34;BEGIN {print sin(3.14159/2)}&#34;</span><span class=k>)</span>   <span class=c1># ~1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Comparison với bc</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>((</span> <span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$a</span><span class=s2> &gt; </span><span class=nv>$b</span><span class=s2>&#34;</span> <span class=p>|</span> bc -l<span class=k>)</span> <span class=o>))</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;a is greater&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Thực tế: Script tính disk usage percentage</span>
</span></span><span class=line><span class=cl><span class=nv>used</span><span class=o>=</span><span class=k>$(</span>df / <span class=p>|</span> awk <span class=s1>&#39;NR==2 {print $3}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>total</span><span class=o>=</span><span class=k>$(</span>df / <span class=p>|</span> awk <span class=s1>&#39;NR==2 {print $2}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>percent</span><span class=o>=</span><span class=k>$(</span>awk <span class=s2>&#34;BEGIN {printf \&#34;%.1f\&#34;, (</span><span class=nv>$used</span><span class=s2>/</span><span class=nv>$total</span><span class=s2>)*100}&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Disk usage: </span><span class=si>${</span><span class=nv>percent</span><span class=si>}</span><span class=s2>%&#34;</span></span></span></code></pre></div><hr><h2 class=heading-element id=6-command--process-substitution><span>6. COMMAND & PROCESS SUBSTITUTION</span>
<a href=#6-command--process-substitution class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=61-command-substitution><span>6.1 Command Substitution</span>
<a href=#61-command-substitution class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># $() - Cách hiện đại (khuyến nghị)</span>
</span></span><span class=line><span class=cl><span class=nv>current_date</span><span class=o>=</span><span class=k>$(</span>date +%Y-%m-%d<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>file_count</span><span class=o>=</span><span class=k>$(</span>ls -1 <span class=p>|</span> wc -l<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># `` - Backticks (legacy, khó đọc, khó nest)</span>
</span></span><span class=line><span class=cl><span class=nv>current_date</span><span class=o>=</span><span class=sb>`</span>date +%Y-%m-%d<span class=sb>`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Nested command substitution</span>
</span></span><span class=line><span class=cl><span class=nv>inner_result</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;Files: </span><span class=k>$(</span>ls -1 <span class=p>|</span> wc -l<span class=k>)</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Practical examples</span>
</span></span><span class=line><span class=cl><span class=nv>hostname</span><span class=o>=</span><span class=k>$(</span>hostname -f<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>ip_addr</span><span class=o>=</span><span class=k>$(</span>ip -4 addr show eth0 <span class=p>|</span> grep -oP <span class=s1>&#39;(?&lt;=inet\s)\d+(\.\d+){3}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>git_branch</span><span class=o>=</span><span class=k>$(</span>git rev-parse --abbrev-ref HEAD 2&gt;/dev/null <span class=o>||</span> <span class=nb>echo</span> <span class=s2>&#34;N/A&#34;</span><span class=k>)</span></span></span></code></pre></div><h3 class=heading-element id=62-process-substitution><span>6.2 Process Substitution</span>
<a href=#62-process-substitution class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># &lt;(command) - Output của command như một file</span>
</span></span><span class=line><span class=cl><span class=c1># &gt;(command) - Input cho command như một file</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># So sánh 2 directory listings</span>
</span></span><span class=line><span class=cl>diff &lt;<span class=o>(</span>ls dir1<span class=o>)</span> &lt;<span class=o>(</span>ls dir2<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># So sánh 2 remote files</span>
</span></span><span class=line><span class=cl>diff &lt;<span class=o>(</span>ssh server1 cat /etc/passwd<span class=o>)</span> &lt;<span class=o>(</span>ssh server2 cat /etc/passwd<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Tee vào nhiều processes</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;data&#34;</span> <span class=p>|</span> tee &gt;<span class=o>(</span>gzip &gt; file.gz<span class=o>)</span> &gt;<span class=o>(</span>bzip2 &gt; file.bz2<span class=o>)</span> &gt; /dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Read vào biến mà không mất scope (vì pipeline tạo subshell)</span>
</span></span><span class=line><span class=cl><span class=c1># Problem:</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello&#34;</span> <span class=p>|</span> <span class=nb>read</span> var    <span class=c1># $var empty sau pipe!</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Solution với process substitution:</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> var &lt; &lt;<span class=o>(</span><span class=nb>echo</span> <span class=s2>&#34;hello&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$var</span><span class=s2>&#34;</span>                <span class=c1># hello</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Read nhiều biến từ command</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -r user host <span class=o>&lt;&lt;&lt;</span> <span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;root@server&#34;</span> <span class=p>|</span> tr <span class=s1>&#39;@&#39;</span> <span class=s1>&#39; &#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Practical: Parse CSV</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span>, <span class=nb>read</span> -r name email role<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;User: </span><span class=nv>$name</span><span class=s2>, Email: </span><span class=nv>$email</span><span class=s2>, Role: </span><span class=nv>$role</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span> &lt; &lt;<span class=o>(</span>tail -n +2 users.csv<span class=o>)</span>  <span class=c1># Skip header</span></span></span></code></pre></div><h3 class=heading-element id=63-here-documents--here-strings><span>6.3 Here Documents & Here Strings</span>
<a href=#63-here-documents--here-strings class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Here Document</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>This is a multi-line
</span></span></span><span class=line><span class=cl><span class=s>text with $variable expansion
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Here Document - No expansion (quote EOF)</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;&#39;EOF&#39;
</span></span></span><span class=line><span class=cl><span class=s>This $variable will not be expanded
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Here Document - Strip leading tabs (dash)</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;-EOF
</span></span></span><span class=line><span class=cl><span class=s>	This text is indented with tabs
</span></span></span><span class=line><span class=cl><span class=s>	Tabs will be stripped
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Here String (single line)</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -r var <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;hello world&#34;</span>
</span></span><span class=line><span class=cl>grep <span class=s2>&#34;pattern&#34;</span> <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=nv>$string</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Practical: Tạo config file</span>
</span></span><span class=line><span class=cl>cat &gt; /tmp/config.ini <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>[database]
</span></span></span><span class=line><span class=cl><span class=s>host=$DB_HOST
</span></span></span><span class=line><span class=cl><span class=s>port=${DB_PORT:-5432}
</span></span></span><span class=line><span class=cl><span class=s>name=$DB_NAME
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Practical: SSH command</span>
</span></span><span class=line><span class=cl>ssh user@server <span class=s>&lt;&lt;&#39;REMOTE&#39;
</span></span></span><span class=line><span class=cl><span class=s>    cd /var/log
</span></span></span><span class=line><span class=cl><span class=s>    tail -100 syslog
</span></span></span><span class=line><span class=cl><span class=s>    df -h
</span></span></span><span class=line><span class=cl><span class=s>REMOTE</span></span></span></code></pre></div><hr><h2 class=heading-element id=7-traps--signal-handling><span>7. TRAPS & SIGNAL HANDLING</span>
<a href=#7-traps--signal-handling class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=71-signals-thường-gặp><span>7.1 Signals thường gặp</span>
<a href=#71-signals-th%c6%b0%e1%bb%9dng-g%e1%ba%b7p class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=err>┌─────────────────────────────────────────────────────────────────────────────┐</span>
</span></span><span class=line><span class=cl><span class=err>│</span>                          <span class=n>COMMON</span> <span class=n>SIGNALS</span>                                     <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>├──────────┬────────┬─────────────────────────────────────────────────────────┤</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>Signal</span>   <span class=err>│</span> <span class=n>Number</span> <span class=err>│</span> <span class=n>Description</span>                                             <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>├──────────┼────────┼─────────────────────────────────────────────────────────┤</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGHUP</span>   <span class=err>│</span> <span class=mi>1</span>      <span class=err>│</span> <span class=n>Terminal</span> <span class=err>đó</span><span class=n>ng</span><span class=p>,</span> <span class=n>reload</span> <span class=n>config</span>                            <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGINT</span>   <span class=err>│</span> <span class=mi>2</span>      <span class=err>│</span> <span class=n>Ctrl</span><span class=o>+</span><span class=n>C</span> <span class=n>interrupt</span>                                        <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGQUIT</span>  <span class=err>│</span> <span class=mi>3</span>      <span class=err>│</span> <span class=n>Ctrl</span><span class=o>+</span>\ <span class=n>quit</span> <span class=n>với</span> <span class=n>core</span> <span class=n>dump</span>                               <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGKILL</span>  <span class=err>│</span> <span class=mi>9</span>      <span class=err>│</span> <span class=n>Force</span> <span class=n>kill</span> <span class=p>(</span><span class=n>không</span> <span class=n>thể</span> <span class=n>trap</span><span class=p>)</span>                             <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGTERM</span>  <span class=err>│</span> <span class=mi>15</span>     <span class=err>│</span> <span class=n>Graceful</span> <span class=n>termination</span> <span class=p>(</span><span class=n>default</span> <span class=n>của</span> <span class=n>kill</span><span class=p>)</span>                 <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGSTOP</span>  <span class=err>│</span> <span class=mi>19</span>     <span class=err>│</span> <span class=n>Pause</span> <span class=n>process</span> <span class=p>(</span><span class=n>không</span> <span class=n>thể</span> <span class=n>trap</span><span class=p>)</span>                          <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGCONT</span>  <span class=err>│</span> <span class=mi>18</span>     <span class=err>│</span> <span class=n>Resume</span> <span class=n>paused</span> <span class=n>process</span>                                   <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGUSR1</span>  <span class=err>│</span> <span class=mi>10</span>     <span class=err>│</span> <span class=n>User</span><span class=o>-</span><span class=n>defined</span> <span class=k>signal</span> <span class=mi>1</span>                                   <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>SIGUSR2</span>  <span class=err>│</span> <span class=mi>12</span>     <span class=err>│</span> <span class=n>User</span><span class=o>-</span><span class=n>defined</span> <span class=k>signal</span> <span class=mi>2</span>                                   <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>├──────────┼────────┼─────────────────────────────────────────────────────────┤</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>EXIT</span>     <span class=err>│</span> <span class=mi>0</span>      <span class=err>│</span> <span class=ne>Script</span> <span class=n>exit</span> <span class=p>(</span><span class=n>pseudo</span><span class=o>-</span><span class=k>signal</span><span class=p>)</span>                             <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>ERR</span>      <span class=err>│</span> <span class=o>-</span>      <span class=err>│</span> <span class=n>Command</span> <span class=n>fails</span> <span class=p>(</span><span class=n>khi</span> <span class=n>set</span> <span class=o>-</span><span class=n>e</span><span class=p>)</span>                              <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>DEBUG</span>    <span class=err>│</span> <span class=o>-</span>      <span class=err>│</span> <span class=n>Trước</span> <span class=n>mỗi</span> <span class=n>command</span>                                       <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>│</span> <span class=n>RETURN</span>   <span class=err>│</span> <span class=o>-</span>      <span class=err>│</span> <span class=n>Khi</span> <span class=n>function</span><span class=o>/</span><span class=n>source</span> <span class=k>return</span>                              <span class=err>│</span>
</span></span><span class=line><span class=cl><span class=err>└──────────┴────────┴─────────────────────────────────────────────────────────┘</span></span></span></code></pre></div><h3 class=heading-element id=72-trap-syntax><span>7.2 Trap Syntax</span>
<a href=#72-trap-syntax class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Basic syntax</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s1>&#39;command&#39;</span> SIGNAL <span class=o>[</span>SIGNAL...<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Multiple commands</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s1>&#39;command1; command2&#39;</span> SIGNAL
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Function</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> cleanup EXIT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ignore signal</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s1>&#39;&#39;</span> SIGINT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Reset to default</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> - SIGINT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># List current traps</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> -p</span></span></code></pre></div><h3 class=heading-element id=73-cleanup-pattern><span>7.3 Cleanup Pattern</span>
<a href=#73-cleanup-pattern class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>set</span> -euo pipefail
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Temporary files/directories</span>
</span></span><span class=line><span class=cl><span class=nv>TEMP_DIR</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LOCK_FILE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cleanup<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>exit_code</span><span class=o>=</span><span class=nv>$?</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Cleaning up...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Remove temp directory</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> -d <span class=s2>&#34;</span><span class=nv>$TEMP_DIR</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> rm -rf <span class=s2>&#34;</span><span class=nv>$TEMP_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Release lock</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> -f <span class=s2>&#34;</span><span class=nv>$LOCK_FILE</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> rm -f <span class=s2>&#34;</span><span class=nv>$LOCK_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Stop background processes</span>
</span></span><span class=line><span class=cl>    <span class=nb>jobs</span> -p <span class=p>|</span> xargs -r <span class=nb>kill</span> 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=nv>$exit_code</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Trap cả EXIT và signals</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> cleanup EXIT
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s1>&#39;echo &#34;Interrupted!&#34;; exit 130&#39;</span> INT TERM
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Script logic</span>
</span></span><span class=line><span class=cl><span class=nv>TEMP_DIR</span><span class=o>=</span><span class=k>$(</span>mktemp -d<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>LOCK_FILE</span><span class=o>=</span><span class=s2>&#34;/var/run/myscript.lock&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create lock file</span>
</span></span><span class=line><span class=cl><span class=nb>exec</span> 200&gt;<span class=s2>&#34;</span><span class=nv>$LOCK_FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>flock -n <span class=m>200</span> <span class=o>||</span> <span class=o>{</span> <span class=nb>echo</span> <span class=s2>&#34;Script already running&#34;</span><span class=p>;</span> <span class=nb>exit</span> 1<span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Main work</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Working in </span><span class=nv>$TEMP_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>sleep <span class=m>60</span>  <span class=c1># Simulate work</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cleanup happens automatically via trap</span></span></span></code></pre></div><h3 class=heading-element id=74-error-handling-pattern><span>7.4 Error Handling Pattern</span>
<a href=#74-error-handling-pattern class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>set</span> -euo pipefail
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Track script progress</span>
</span></span><span class=line><span class=cl><span class=nv>CURRENT_STEP</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>error_handler<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>exit_code</span><span class=o>=</span><span class=nv>$?</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>line_no</span><span class=o>=</span><span class=nv>$1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;ERROR: Script failed at line </span><span class=nv>$line_no</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;       Exit code: </span><span class=nv>$exit_code</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;       Current step: </span><span class=nv>$CURRENT_STEP</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;       Command: </span><span class=nv>$BASH_COMMAND</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Optional: Send notification</span>
</span></span><span class=line><span class=cl>    <span class=c1># notify_admin &#34;Script failed: $CURRENT_STEP&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s1>&#39;error_handler $LINENO&#39;</span> ERR
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Main script</span>
</span></span><span class=line><span class=cl><span class=nv>CURRENT_STEP</span><span class=o>=</span><span class=s2>&#34;Initialize&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Starting...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>CURRENT_STEP</span><span class=o>=</span><span class=s2>&#34;Download data&#34;</span>
</span></span><span class=line><span class=cl>curl -sfL <span class=s2>&#34;http://example.com/data&#34;</span> -o /tmp/data
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>CURRENT_STEP</span><span class=o>=</span><span class=s2>&#34;Process data&#34;</span>
</span></span><span class=line><span class=cl>process_command /tmp/data  <span class=c1># If this fails, trap catches it</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>CURRENT_STEP</span><span class=o>=</span><span class=s2>&#34;Complete&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Done!&#34;</span></span></span></code></pre></div><h3 class=heading-element id=75-graceful-shutdown><span>7.5 Graceful Shutdown</span>
<a href=#75-graceful-shutdown class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>SHUTDOWN_REQUESTED</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>shutdown_handler<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Shutdown requested, finishing current work...&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>SHUTDOWN_REQUESTED</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>trap</span> shutdown_handler SIGTERM SIGINT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Main loop</span>
</span></span><span class=line><span class=cl><span class=k>while</span> true<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$SHUTDOWN_REQUESTED</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=nb>true</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Graceful shutdown complete&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Do work</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Processing...&#34;</span>
</span></span><span class=line><span class=cl>    sleep <span class=m>5</span>
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></div><hr><h2 class=heading-element id=8-debugging-techniques><span>8. DEBUGGING TECHNIQUES</span>
<a href=#8-debugging-techniques class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=81-debug-options><span>8.1 Debug Options</span>
<a href=#81-debug-options class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Enable debugging</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -x              <span class=c1># Print commands before execution</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -v              <span class=c1># Print input lines as they are read</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -e              <span class=c1># Exit on error</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -u              <span class=c1># Error on undefined variables</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -o pipefail     <span class=c1># Pipeline fails if any command fails</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Disable debugging</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> +x
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Debug specific section</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -x
</span></span><span class=line><span class=cl><span class=c1># commands to debug</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> +x
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Debug entire script từ command line</span>
</span></span><span class=line><span class=cl>bash -x script.sh
</span></span><span class=line><span class=cl>bash -xv script.sh  <span class=c1># Verbose + trace</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Check syntax only</span>
</span></span><span class=line><span class=cl>bash -n script.sh</span></span></code></pre></div><h3 class=heading-element id=82-debug-functions><span>8.2 Debug Functions</span>
<a href=#82-debug-functions class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Debug logging</span>
</span></span><span class=line><span class=cl><span class=nv>DEBUG</span><span class=o>=</span><span class=si>${</span><span class=nv>DEBUG</span><span class=k>:-</span><span class=nv>false</span><span class=si>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>debug<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$DEBUG</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=nb>true</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;[DEBUG] </span><span class=nv>$*</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Usage</span>
</span></span><span class=line><span class=cl><span class=nv>DEBUG</span><span class=o>=</span><span class=nb>true</span> ./script.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Trace function calls</span>
</span></span><span class=line><span class=cl>trace<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;[TRACE] </span><span class=si>${</span><span class=nv>FUNCNAME</span><span class=p>[1]</span><span class=si>}</span><span class=s2>() called from </span><span class=si>${</span><span class=nv>BASH_SOURCE</span><span class=p>[1]</span><span class=si>}</span><span class=s2>:</span><span class=si>${</span><span class=nv>BASH_LINENO</span><span class=p>[0]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># PS4 customization (prompt khi -x)</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PS4</span><span class=o>=</span><span class=s1>&#39;+ ${BASH_SOURCE}:${LINENO}:${FUNCNAME[0]:+${FUNCNAME[0]}(): }&#39;</span></span></span></code></pre></div><h3 class=heading-element id=83-debugging-patterns><span>8.3 Debugging Patterns</span>
<a href=#83-debugging-patterns class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Assert function</span>
</span></span><span class=line><span class=cl>assert<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>condition</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>message</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>2</span><span class=k>:-</span><span class=nv>Assertion</span><span class=p> failed</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> ! <span class=nb>eval</span> <span class=s2>&#34;</span><span class=nv>$condition</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;ASSERT FAILED: </span><span class=nv>$message</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;  Condition: </span><span class=nv>$condition</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;  Location: </span><span class=si>${</span><span class=nv>BASH_SOURCE</span><span class=p>[1]</span><span class=si>}</span><span class=s2>:</span><span class=si>${</span><span class=nv>BASH_LINENO</span><span class=p>[0]</span><span class=si>}</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>        <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>assert <span class=s1>&#39;[[ -f &#34;$config_file&#34; ]]&#39;</span> <span class=s2>&#34;Config file must exist&#34;</span>
</span></span><span class=line><span class=cl>assert <span class=s1>&#39;(( count &gt; 0 ))&#39;</span> <span class=s2>&#34;Count must be positive&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Variable dump</span>
</span></span><span class=line><span class=cl>dump_vars<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> var
</span></span><span class=line><span class=cl>    <span class=k>for</span> var in <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$var</span><span class=s2> = </span><span class=si>${</span><span class=p>!var</span><span class=k>:-</span><span class=p>&lt;undefined&gt;</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dump_vars USER HOME PATH
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Stack trace on error</span>
</span></span><span class=line><span class=cl>print_stack_trace<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> i
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Stack trace:&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>((</span><span class=nv>i</span><span class=o>=</span>1<span class=p>;</span> i&lt;<span class=si>${#</span><span class=nv>FUNCNAME</span><span class=p>[@]</span><span class=si>}</span><span class=p>;</span> i++<span class=o>))</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;  [</span><span class=nv>$i</span><span class=s2>] </span><span class=si>${</span><span class=nv>FUNCNAME</span><span class=p>[</span><span class=nv>$i</span><span class=p>]</span><span class=si>}</span><span class=s2>() at </span><span class=si>${</span><span class=nv>BASH_SOURCE</span><span class=p>[</span><span class=nv>$i</span><span class=p>]</span><span class=si>}</span><span class=s2>:</span><span class=si>${</span><span class=nv>BASH_LINENO</span><span class=p>[</span><span class=nv>$i</span><span class=p>-1]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s1>&#39;print_stack_trace&#39;</span> ERR</span></span></code></pre></div><h3 class=heading-element id=84-common-issues--debug-tips><span>8.4 Common Issues & Debug Tips</span>
<a href=#84-common-issues--debug-tips class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Issue: Quoting problems</span>
</span></span><span class=line><span class=cl><span class=c1># Bad:</span>
</span></span><span class=line><span class=cl><span class=nv>files</span><span class=o>=</span><span class=k>$(</span>ls *.txt<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> f in <span class=nv>$files</span><span class=p>;</span> <span class=k>do</span>  <span class=c1># Breaks on filenames with spaces</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Good:</span>
</span></span><span class=line><span class=cl><span class=k>for</span> f in *.txt<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Issue: Variable scope in subshell</span>
</span></span><span class=line><span class=cl><span class=c1># Bad:</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;test&#34;</span> <span class=p>|</span> <span class=k>while</span> <span class=nb>read</span> line<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>result</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$line</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$result</span><span class=s2>&#34;</span>  <span class=c1># Empty!</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Good:</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nb>read</span> line<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>result</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$line</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span> &lt; &lt;<span class=o>(</span><span class=nb>echo</span> <span class=s2>&#34;test&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$result</span><span class=s2>&#34;</span>  <span class=c1># Works</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Issue: Checking command success</span>
</span></span><span class=line><span class=cl><span class=c1># Bad:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=k>$(</span>grep -c <span class=s2>&#34;pattern&#34;</span> file<span class=k>)</span> -gt <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Good:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> grep -q <span class=s2>&#34;pattern&#34;</span> file<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Debug tip: Print với colors</span>
</span></span><span class=line><span class=cl><span class=nv>RED</span><span class=o>=</span><span class=s1>&#39;\033[0;31m&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>GREEN</span><span class=o>=</span><span class=s1>&#39;\033[0;32m&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>NC</span><span class=o>=</span><span class=s1>&#39;\033[0m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;</span><span class=si>${</span><span class=nv>RED</span><span class=si>}</span><span class=s2>Error</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2>: something wrong&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;</span><span class=si>${</span><span class=nv>GREEN</span><span class=si>}</span><span class=s2>OK</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2>: passed&#34;</span></span></span></code></pre></div><hr><h2 class=heading-element id=9-argument-parsing---getopts><span>9. ARGUMENT PARSING - GETOPTS</span>
<a href=#9-argument-parsing---getopts class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=91-getopts-cơ-bản><span>9.1 getopts cơ bản</span>
<a href=#91-getopts-c%c6%a1-b%e1%ba%a3n class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl>usage<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Usage: </span><span class=nv>$0</span><span class=s2> [-v] [-f file] [-n number] args...&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Options:&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;  -v          Verbose mode&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;  -f FILE     Input file&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;  -n NUMBER   Count&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;  -h          Show help&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Default values</span>
</span></span><span class=line><span class=cl><span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>FILE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>COUNT</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Parse options</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nb>getopts</span> <span class=s2>&#34;:vf:n:h&#34;</span> opt<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nv>$opt</span> in
</span></span><span class=line><span class=cl>        v<span class=o>)</span> <span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>true</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        f<span class=o>)</span> <span class=nv>FILE</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$OPTARG</span><span class=s2>&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        n<span class=o>)</span> <span class=nv>COUNT</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$OPTARG</span><span class=s2>&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        h<span class=o>)</span> usage <span class=p>;;</span>
</span></span><span class=line><span class=cl>        :<span class=o>)</span> <span class=nb>echo</span> <span class=s2>&#34;Option -</span><span class=nv>$OPTARG</span><span class=s2> requires argument&#34;</span> &gt;<span class=p>&amp;</span>2<span class=p>;</span> <span class=nb>exit</span> <span class=m>1</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        <span class=se>\?</span><span class=o>)</span> <span class=nb>echo</span> <span class=s2>&#34;Invalid option: -</span><span class=nv>$OPTARG</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span>2<span class=p>;</span> <span class=nb>exit</span> <span class=m>1</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>    <span class=k>esac</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Remove parsed options, $@ chứa remaining arguments</span>
</span></span><span class=line><span class=cl><span class=nb>shift</span> <span class=k>$((</span>OPTIND <span class=o>-</span> <span class=m>1</span><span class=k>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;VERBOSE: </span><span class=nv>$VERBOSE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;FILE: </span><span class=nv>$FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;COUNT: </span><span class=nv>$COUNT</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Remaining args: </span><span class=nv>$*</span><span class=s2>&#34;</span></span></span></code></pre></div><h3 class=heading-element id=92-long-options-với-getopt><span>9.2 Long Options với getopt</span>
<a href=#92-long-options-v%e1%bb%9bi-getopt class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl>usage<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    cat <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>Usage: $0 [OPTIONS] &lt;command&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Options:
</span></span></span><span class=line><span class=cl><span class=s>    -v, --verbose       Enable verbose mode
</span></span></span><span class=line><span class=cl><span class=s>    -f, --file FILE     Input file
</span></span></span><span class=line><span class=cl><span class=s>    -n, --count NUM     Count (default: 1)
</span></span></span><span class=line><span class=cl><span class=s>    -h, --help          Show this help
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Commands:
</span></span></span><span class=line><span class=cl><span class=s>    start       Start the service
</span></span></span><span class=line><span class=cl><span class=s>    stop        Stop the service
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># getopt (external command, khác getopts)</span>
</span></span><span class=line><span class=cl><span class=nv>TEMP</span><span class=o>=</span><span class=k>$(</span>getopt -o <span class=s1>&#39;vf:n:h&#39;</span> --long <span class=s1>&#39;verbose,file:,count:,help&#39;</span> -n <span class=s2>&#34;</span><span class=nv>$0</span><span class=s2>&#34;</span> -- <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=nv>$?</span> -ne <span class=m>0</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    usage
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>eval</span> <span class=nb>set</span> -- <span class=s2>&#34;</span><span class=nv>$TEMP</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Defaults</span>
</span></span><span class=line><span class=cl><span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>FILE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>COUNT</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> true<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span> in
</span></span><span class=line><span class=cl>        -v<span class=p>|</span>--verbose<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        -f<span class=p>|</span>--file<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>FILE</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$2</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span> <span class=m>2</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        -n<span class=p>|</span>--count<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>COUNT</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$2</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span> <span class=m>2</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        -h<span class=p>|</span>--help<span class=o>)</span>
</span></span><span class=line><span class=cl>            usage
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        --<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span>
</span></span><span class=line><span class=cl>            <span class=nb>break</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        *<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;Internal error!&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>    <span class=k>esac</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Remaining arguments</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Command: </span><span class=si>${</span><span class=nv>1</span><span class=k>:-</span><span class=p>&lt;none&gt;</span><span class=si>}</span><span class=s2>&#34;</span></span></span></code></pre></div><h3 class=heading-element id=93-manual-parsing-flexible-nhất><span>9.3 Manual Parsing (flexible nhất)</span>
<a href=#93-manual-parsing-flexible-nh%e1%ba%a5t class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>DRY_RUN</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>CONFIG_FILE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>POSITIONAL</span><span class=o>=()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=o>[[</span> <span class=nv>$#</span> -gt <span class=m>0</span> <span class=o>]]</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nv>$1</span> in
</span></span><span class=line><span class=cl>        -v<span class=p>|</span>--verbose<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        -d<span class=p>|</span>--dry-run<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>DRY_RUN</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        -c<span class=p>|</span>--config<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>CONFIG_FILE</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$2</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span> <span class=m>2</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        --config<span class=o>=</span>*<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>CONFIG_FILE</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>1</span><span class=p>#*=</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        -h<span class=p>|</span>--help<span class=o>)</span>
</span></span><span class=line><span class=cl>            usage
</span></span><span class=line><span class=cl>            <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        --<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span>
</span></span><span class=line><span class=cl>            <span class=nv>POSITIONAL</span><span class=o>+=(</span><span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>break</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        -*<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;Unknown option: </span><span class=nv>$1</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>            <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        *<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>POSITIONAL</span><span class=o>+=(</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>shift</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>    <span class=k>esac</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Restore positional parameters</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -- <span class=s2>&#34;</span><span class=si>${</span><span class=nv>POSITIONAL</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span></span></span></code></pre></div><hr><h2 class=heading-element id=10-pattern-matching><span>10. PATTERN MATCHING</span>
<a href=#10-pattern-matching class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=101-glob-patterns><span>10.1 Glob Patterns</span>
<a href=#101-glob-patterns class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Basic globs</span>
</span></span><span class=line><span class=cl>*           <span class=c1># Match any string</span>
</span></span><span class=line><span class=cl>?           <span class=c1># Match single character</span>
</span></span><span class=line><span class=cl><span class=o>[</span>abc<span class=o>]</span>       <span class=c1># Match a, b, or c</span>
</span></span><span class=line><span class=cl><span class=o>[</span>a-z<span class=o>]</span>       <span class=c1># Match range a-z</span>
</span></span><span class=line><span class=cl><span class=o>[</span>!abc<span class=o>]</span>      <span class=c1># Match anything except a, b, c</span>
</span></span><span class=line><span class=cl><span class=o>[</span>^abc<span class=o>]</span>      <span class=c1># Same as above</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Examples</span>
</span></span><span class=line><span class=cl>ls *.txt                 <span class=c1># All .txt files</span>
</span></span><span class=line><span class=cl>ls file?.log             <span class=c1># file1.log, file2.log, etc.</span>
</span></span><span class=line><span class=cl>ls <span class=o>[</span>a-c<span class=o>]</span>*.sh             <span class=c1># Files starting with a, b, or c</span>
</span></span><span class=line><span class=cl>ls *<span class=o>[</span>0-9<span class=o>]</span>.conf           <span class=c1># Files ending with digit before .conf</span></span></span></code></pre></div><h3 class=heading-element id=102-extended-globs-extglob><span>10.2 Extended Globs (extglob)</span>
<a href=#102-extended-globs-extglob class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Enable extended globs</span>
</span></span><span class=line><span class=cl><span class=nb>shopt</span> -s extglob
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Patterns</span>
</span></span><span class=line><span class=cl>?<span class=o>(</span>pattern<span class=o>)</span>      <span class=c1># Zero or one occurrence</span>
</span></span><span class=line><span class=cl>*<span class=o>(</span>pattern<span class=o>)</span>      <span class=c1># Zero or more occurrences</span>
</span></span><span class=line><span class=cl>+<span class=o>(</span>pattern<span class=o>)</span>      <span class=c1># One or more occurrences</span>
</span></span><span class=line><span class=cl>@<span class=o>(</span>pattern<span class=o>)</span>      <span class=c1># Exactly one occurrence</span>
</span></span><span class=line><span class=cl>!<span class=o>(</span>pattern<span class=o>)</span>      <span class=c1># Anything except pattern</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Examples</span>
</span></span><span class=line><span class=cl>ls *.@<span class=o>(</span>jpg<span class=p>|</span>png<span class=p>|</span>gif<span class=o>)</span>      <span class=c1># Image files</span>
</span></span><span class=line><span class=cl>rm !<span class=o>(</span>*.txt<span class=p>|</span>*.md<span class=o>)</span>         <span class=c1># Remove all except .txt and .md</span>
</span></span><span class=line><span class=cl>ls +<span class=o>([</span>0-9<span class=o>])</span>.log          <span class=c1># Files with only digits before .log</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Disable</span>
</span></span><span class=line><span class=cl><span class=nb>shopt</span> -u extglob</span></span></code></pre></div><h3 class=heading-element id=103-regex-trong-bash><span>10.3 Regex trong Bash</span>
<a href=#103-regex-trong-bash class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># =~ operator trong [[ ]]</span>
</span></span><span class=line><span class=cl><span class=nv>string</span><span class=o>=</span><span class=s2>&#34;Hello World 123&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=nv>$string</span> <span class=o>=</span>~ ^Hello <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Starts with Hello&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=nv>$string</span> <span class=o>=</span>~ <span class=o>[</span>0-9<span class=o>]</span>+ <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Contains numbers&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Match: </span><span class=si>${</span><span class=nv>BASH_REMATCH</span><span class=p>[0]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Capture groups</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;user@example.com&#34;</span> <span class=o>=</span>~ ^<span class=o>([</span>^@<span class=o>]</span>+<span class=o>)</span>@<span class=o>(</span>.+<span class=o>)</span>$ <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;User: </span><span class=si>${</span><span class=nv>BASH_REMATCH</span><span class=p>[1]</span><span class=si>}</span><span class=s2>&#34;</span>     <span class=c1># user</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Domain: </span><span class=si>${</span><span class=nv>BASH_REMATCH</span><span class=p>[2]</span><span class=si>}</span><span class=s2>&#34;</span>   <span class=c1># example.com</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Case-insensitive (option)</span>
</span></span><span class=line><span class=cl><span class=nb>shopt</span> -s nocasematch
</span></span><span class=line><span class=cl><span class=o>[[</span> <span class=s2>&#34;HELLO&#34;</span> <span class=o>=</span>~ hello <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;Match!&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>shopt</span> -u nocasematch
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Regex in variable (tránh quoting issues)</span>
</span></span><span class=line><span class=cl><span class=nv>pattern</span><span class=o>=</span><span class=s1>&#39;^[0-9]+$&#39;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span> <span class=o>=</span>~ <span class=nv>$pattern</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Is number&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span></span></span></code></pre></div><h3 class=heading-element id=104-case-statement-patterns><span>10.4 Case Statement Patterns</span>
<a href=#104-case-statement-patterns class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>case</span> <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span> in
</span></span><span class=line><span class=cl>    <span class=c1># Simple match</span>
</span></span><span class=line><span class=cl>    start<span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Starting&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># OR patterns</span>
</span></span><span class=line><span class=cl>    stop<span class=p>|</span>shutdown<span class=p>|</span>halt<span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Stopping&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Glob patterns</span>
</span></span><span class=line><span class=cl>    *.txt<span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Text file&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Ranges</span>
</span></span><span class=line><span class=cl>    <span class=o>[</span>0-9<span class=o>])</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Single digit&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Extended globs (if extglob on)</span>
</span></span><span class=line><span class=cl>    +<span class=o>([</span>0-9<span class=o>]))</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Number&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Default</span>
</span></span><span class=line><span class=cl>    *<span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Unknown&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>;;</span>
</span></span><span class=line><span class=cl><span class=k>esac</span></span></span></code></pre></div><hr><h2 class=heading-element id=11-job-control><span>11. JOB CONTROL</span>
<a href=#11-job-control class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=111-background-jobs><span>11.1 Background Jobs</span>
<a href=#111-background-jobs class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Start in background</span>
</span></span><span class=line><span class=cl><span class=nb>command</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=nv>pid</span><span class=o>=</span><span class=nv>$!</span>                   <span class=c1># PID của background process</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># List jobs</span>
</span></span><span class=line><span class=cl><span class=nb>jobs</span>                     <span class=c1># List all jobs</span>
</span></span><span class=line><span class=cl><span class=nb>jobs</span> -l                  <span class=c1># With PIDs</span>
</span></span><span class=line><span class=cl><span class=nb>jobs</span> -r                  <span class=c1># Running only</span>
</span></span><span class=line><span class=cl><span class=nb>jobs</span> -s                  <span class=c1># Stopped only</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Job control</span>
</span></span><span class=line><span class=cl><span class=nb>bg</span> %1                    <span class=c1># Resume job 1 in background</span>
</span></span><span class=line><span class=cl><span class=nb>fg</span> %1                    <span class=c1># Bring job 1 to foreground</span>
</span></span><span class=line><span class=cl><span class=nb>kill</span> %1                  <span class=c1># Kill job 1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Job references</span>
</span></span><span class=line><span class=cl>%1                       <span class=c1># Job number 1</span>
</span></span><span class=line><span class=cl>%?string                 <span class=c1># Job containing string</span>
</span></span><span class=line><span class=cl>%%                       <span class=c1># Current job</span>
</span></span><span class=line><span class=cl>%+                       <span class=c1># Current job</span>
</span></span><span class=line><span class=cl>%-                       <span class=c1># Previous job</span></span></span></code></pre></div><h3 class=heading-element id=112-wait-và-process-management><span>11.2 Wait và Process Management</span>
<a href=#112-wait-v%c3%a0-process-management class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Wait for background processes</span>
</span></span><span class=line><span class=cl>command1 <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=nv>pid1</span><span class=o>=</span><span class=nv>$!</span>
</span></span><span class=line><span class=cl>command2 <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=nv>pid2</span><span class=o>=</span><span class=nv>$!</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wait for specific PID</span>
</span></span><span class=line><span class=cl><span class=nb>wait</span> <span class=nv>$pid1</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Command 1 finished with exit code: </span><span class=nv>$?</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wait for all background jobs</span>
</span></span><span class=line><span class=cl><span class=nb>wait</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;All jobs completed&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wait với timeout (using background wait)</span>
</span></span><span class=line><span class=cl><span class=nb>command</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=nv>pid</span><span class=o>=</span><span class=nv>$!</span>
</span></span><span class=line><span class=cl><span class=o>(</span> sleep 30<span class=p>;</span> <span class=nb>kill</span> <span class=nv>$pid</span> 2&gt;/dev/null <span class=o>)</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=nv>timeout_pid</span><span class=o>=</span><span class=nv>$!</span>
</span></span><span class=line><span class=cl><span class=nb>wait</span> <span class=nv>$pid</span>
</span></span><span class=line><span class=cl><span class=nb>kill</span> <span class=nv>$timeout_pid</span> 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Parallel execution</span>
</span></span><span class=line><span class=cl><span class=k>for</span> file in *.txt<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    process_file <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl><span class=nb>wait</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Limit parallel jobs</span>
</span></span><span class=line><span class=cl><span class=nv>max_jobs</span><span class=o>=</span><span class=m>4</span>
</span></span><span class=line><span class=cl><span class=k>for</span> file in *.txt<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=o>((</span> <span class=k>$(</span><span class=nb>jobs</span> -r <span class=p>|</span> wc -l<span class=k>)</span> &gt;<span class=o>=</span> max_jobs <span class=o>))</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        sleep 0.1
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl>    process_file <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>wait</span></span></code></pre></div><h3 class=heading-element id=113-disown-và-nohup><span>11.3 Disown và Nohup</span>
<a href=#113-disown-v%c3%a0-nohup class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># nohup - Ignore SIGHUP, output to nohup.out</span>
</span></span><span class=line><span class=cl>nohup long_running_command <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># disown - Remove from shell&#39;s job table</span>
</span></span><span class=line><span class=cl><span class=nb>command</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=nb>disown</span> %1                <span class=c1># Job không còn thuộc shell</span>
</span></span><span class=line><span class=cl><span class=nb>disown</span> -h %1             <span class=c1># Keep job nhưng không gửi SIGHUP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Practical: Start process, detach, logout</span>
</span></span><span class=line><span class=cl><span class=nb>command</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=nb>disown</span>
</span></span><span class=line><span class=cl><span class=nb>exit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Double fork pattern (daemon-like)</span>
</span></span><span class=line><span class=cl><span class=o>(</span> <span class=o>(</span> <span class=nb>command</span> <span class=p>&amp;</span> <span class=o>)</span> <span class=p>&amp;</span> <span class=o>)</span></span></span></code></pre></div><hr><h2 class=heading-element id=12-input-handling><span>12. INPUT HANDLING</span>
<a href=#12-input-handling class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=121-read-command><span>12.1 Read Command</span>
<a href=#121-read-command class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Basic read</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -p <span class=s2>&#34;Enter name: &#34;</span> name
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Silent (passwords)</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -sp <span class=s2>&#34;Password: &#34;</span> password<span class=p>;</span> <span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Timeout</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -t <span class=m>5</span> -p <span class=s2>&#34;Quick! &#34;</span> answer <span class=o>||</span> <span class=nb>echo</span> <span class=s2>&#34;Too slow&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Default value với timeout</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -t <span class=m>3</span> -p <span class=s2>&#34;Continue? [Y/n] &#34;</span> answer <span class=o>||</span> <span class=nv>answer</span><span class=o>=</span><span class=s2>&#34;y&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Read specific number of characters</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -n <span class=m>1</span> -p <span class=s2>&#34;Press any key...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Read into array</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -a words <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;one two three&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>words</span><span class=p>[1]</span><span class=si>}</span><span class=s2>&#34;</span>  <span class=c1># two</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Read file</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span> <span class=nb>read</span> -r line<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Line: </span><span class=nv>$line</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span> &lt; file.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Read with delimiter</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span>: <span class=nb>read</span> -r user pass uid gid info home shell<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;User: </span><span class=nv>$user</span><span class=s2>, Shell: </span><span class=nv>$shell</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span> &lt; /etc/passwd</span></span></code></pre></div><h3 class=heading-element id=122-select-menu><span>12.2 Select Menu</span>
<a href=#122-select-menu class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Basic select menu</span>
</span></span><span class=line><span class=cl><span class=nv>PS3</span><span class=o>=</span><span class=s2>&#34;Choose option: &#34;</span>
</span></span><span class=line><span class=cl><span class=nv>options</span><span class=o>=(</span><span class=s2>&#34;Start&#34;</span> <span class=s2>&#34;Stop&#34;</span> <span class=s2>&#34;Status&#34;</span> <span class=s2>&#34;Quit&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>select</span> opt in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>options</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nv>$opt</span> in
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Start&#34;</span><span class=o>)</span>   <span class=nb>echo</span> <span class=s2>&#34;Starting...&#34;</span><span class=p>;</span> <span class=nb>break</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Stop&#34;</span><span class=o>)</span>    <span class=nb>echo</span> <span class=s2>&#34;Stopping...&#34;</span><span class=p>;</span> <span class=nb>break</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Status&#34;</span><span class=o>)</span>  <span class=nb>echo</span> <span class=s2>&#34;Running&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Quit&#34;</span><span class=o>)</span>    <span class=nb>exit</span> <span class=m>0</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        *<span class=o>)</span>         <span class=nb>echo</span> <span class=s2>&#34;Invalid option&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>    <span class=k>esac</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Select với REPLY</span>
</span></span><span class=line><span class=cl><span class=k>select</span> item in <span class=s2>&#34;Option A&#34;</span> <span class=s2>&#34;Option B&#34;</span> <span class=s2>&#34;Exit&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;You selected: </span><span class=nv>$item</span><span class=s2> (number: </span><span class=nv>$REPLY</span><span class=s2>)&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=s2>&#34;Exit&#34;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nb>break</span>
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></div><h3 class=heading-element id=123-confirmation-prompts><span>12.3 Confirmation Prompts</span>
<a href=#123-confirmation-prompts class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Yes/No confirmation</span>
</span></span><span class=line><span class=cl>confirm<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>prompt</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>1</span><span class=k>:-</span><span class=nv>Are</span><span class=p> you sure?</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>default</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>2</span><span class=k>:-</span><span class=nv>n</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> yn_prompt
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$default</span><span class=s2>&#34;</span> <span class=o>=</span>~ ^<span class=o>[</span>Yy<span class=o>]</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nv>yn_prompt</span><span class=o>=</span><span class=s2>&#34;[Y/n]&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=nv>yn_prompt</span><span class=o>=</span><span class=s2>&#34;[y/N]&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>read</span> -p <span class=s2>&#34;</span><span class=nv>$prompt</span><span class=s2> </span><span class=nv>$yn_prompt</span><span class=s2> &#34;</span> answer
</span></span><span class=line><span class=cl>    <span class=nv>answer</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>answer</span><span class=k>:-</span><span class=nv>$default</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$answer</span><span class=s2>&#34;</span> <span class=o>=</span>~ ^<span class=o>[</span>Yy<span class=o>]</span> <span class=o>]]</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> confirm <span class=s2>&#34;Delete all files?&#34;</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    rm -rf *
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Cancelled&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Multiple choice</span>
</span></span><span class=line><span class=cl>choose<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>prompt</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>shift</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>options</span><span class=o>=(</span><span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nv>PS3</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$prompt</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>select</span> choice in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>options</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=o>[[</span> -n <span class=s2>&#34;</span><span class=nv>$choice</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$choice</span><span class=s2>&#34;</span> <span class=o>&amp;&amp;</span> <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Invalid selection&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>env</span><span class=o>=</span><span class=k>$(</span>choose <span class=s2>&#34;Select environment:&#34;</span> <span class=s2>&#34;development&#34;</span> <span class=s2>&#34;staging&#34;</span> <span class=s2>&#34;production&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Selected: </span><span class=nv>$env</span><span class=s2>&#34;</span></span></span></code></pre></div><hr><h2 class=heading-element id=13-fish-shell-specifics><span>13. FISH SHELL SPECIFICS</span>
<a href=#13-fish-shell-specifics class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=131-variables-trong-fish><span>13.1 Variables trong Fish</span>
<a href=#131-variables-trong-fish class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># Set variable
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=nv>name</span> <span class=s2>&#34;John&#34;</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-l</span> <span class=nv>local_var</span> <span class=s2>&#34;local&#34;</span>      <span class=c># Local scope
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-g</span> <span class=nv>global_var</span> <span class=s2>&#34;global&#34;</span>    <span class=c># Global scope
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-U</span> <span class=nv>universal_var</span> <span class=s2>&#34;saved&#34;</span>  <span class=c># Universal (persistent)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-x</span> <span class=nv>PATH</span> /usr/local/bin <span class=nv>$PATH</span>  <span class=c># Export
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># Unset
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-e</span> <span class=nv>variable_name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># List operations
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=nv>mylist</span> a b c
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nv>mylist</span> <span class=nv>$mylist</span> d          <span class=c># Append
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-a</span> <span class=nv>mylist</span> e f             <span class=c># Append
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-p</span> <span class=nv>mylist</span> z               <span class=c># Prepend
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># Access
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>echo</span> <span class=nv>$mylist</span><span class=o>[</span><span class=m>1</span><span class=o>]</span>               <span class=c># First element (1-indexed!)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>echo</span> <span class=nv>$mylist</span><span class=o>[-</span><span class=m>1</span><span class=o>]</span>              <span class=c># Last element
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>echo</span> <span class=nv>$mylist</span><span class=o>[</span><span class=m>2</span><span class=o>..</span><span class=m>4</span><span class=o>]</span>            <span class=c># Slice
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>echo</span> <span class=o>(</span><span class=nf>count</span> <span class=nv>$mylist</span><span class=o>)</span>          <span class=c># Length
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># Special variables
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nv>$status</span>                       <span class=c># Exit status (như $? trong bash)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nv>$argv</span>                         <span class=c># Script arguments
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nv>$fish_pid</span>                     # Fish PID</span></span></code></pre></div><h3 class=heading-element id=132-functions-trong-fish><span>13.2 Functions trong Fish</span>
<a href=#132-functions-trong-fish class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># Define function
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nf>greet</span>
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=na>-l</span> <span class=nv>name</span> <span class=nv>$argv</span><span class=o>[</span><span class=m>1</span><span class=o>]</span>
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=na>-l</span> <span class=nv>greeting</span> <span class=o>(</span><span class=nf>if</span> <span class=k>set</span> <span class=na>-q</span> <span class=nv>argv</span><span class=o>[</span><span class=m>2</span><span class=o>]</span><span class=p>;</span> <span class=k>echo</span> <span class=nv>$argv</span><span class=o>[</span><span class=m>2</span><span class=o>]</span><span class=p>;</span> <span class=k>else</span><span class=p>;</span> <span class=k>echo</span> <span class=s2>&#34;Hello&#34;</span><span class=p>;</span> <span class=k>end</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;</span><span class=nv>$greeting</span><span class=s2>, </span><span class=nv>$name</span><span class=s2>!&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Function with description
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nf>serve</span> <span class=na>--description</span> <span class=s2>&#34;Start development server&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nf>python</span> <span class=na>-m</span> http.server <span class=nv>$argv</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Event handler
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nf>on_exit</span> <span class=na>--on-event</span> fish_exit
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;Goodbye!&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Variable watcher
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nf>on_pwd_change</span> <span class=na>--on-variable</span> PWD
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;Changed directory to: </span><span class=nv>$PWD</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Save function permanently
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>funcsave </span>greet
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># List functions
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>functions
</span></span></span><span class=line><span class=cl><span class=nb>functions </span>greet               <span class=c># Show function definition
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># Delete function
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>functions</span> <span class=na>-e</span> greet</span></span></code></pre></div><h3 class=heading-element id=133-control-flow-trong-fish><span>13.3 Control Flow trong Fish</span>
<a href=#133-control-flow-trong-fish class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># If statement (không dùng [ ] hay [[ ]])
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>if</span> <span class=k>test</span> <span class=na>-f</span> <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;File exists&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=k>if</span> <span class=k>test</span> <span class=na>-d</span> <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;Is directory&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;Not found&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># String comparison
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>if</span> <span class=nb>string </span>match <span class=na>-q</span> <span class=s2>&#34;*.txt&#34;</span> <span class=nv>$file</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;Text file&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Numeric comparison
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>if</span> <span class=k>test</span> <span class=nv>$count</span> <span class=na>-gt</span> <span class=m>10</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;More than 10&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># And/Or
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>if</span> <span class=k>test</span> <span class=na>-f</span> <span class=nv>$file</span><span class=p>;</span> <span class=k>and</span> <span class=k>test</span> <span class=na>-r</span> <span class=nv>$file</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;File exists and readable&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=k>test</span> <span class=na>-f</span> <span class=nv>$file</span><span class=p>;</span> <span class=k>or</span> <span class=k>test</span> <span class=na>-f</span> <span class=nv>$alt_file</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;At least one exists&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Switch (như case trong bash)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>switch</span> <span class=nv>$command</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> start
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s2>&#34;Starting&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> stop
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s2>&#34;Stopping&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s1>&#39;*&#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s2>&#34;Unknown&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># For loop
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>for</span> <span class=nv>file</span> <span class=k>in</span> *.txt
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;Processing: </span><span class=nv>$file</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=nv>i</span> <span class=k>in</span> <span class=o>(</span><span class=nf>seq</span> <span class=m>1</span> <span class=m>10</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=nv>$i</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># While loop
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>while</span> <span class=k>test</span> <span class=nv>$count</span> <span class=na>-lt</span> <span class=m>10</span>
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=k>count</span> <span class=o>(</span><span class=nb>math</span> <span class=nv>$count</span> + <span class=m>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Loop control
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>for</span> <span class=nv>item</span> <span class=k>in</span> <span class=nv>$list</span>
</span></span><span class=line><span class=cl>    <span class=k>test</span> <span class=nv>$item</span> <span class=o>=</span> <span class=s2>&#34;skip&#34;</span><span class=p>;</span> <span class=k>and</span> <span class=k>continue</span>
</span></span><span class=line><span class=cl>    <span class=k>test</span> <span class=nv>$item</span> <span class=o>=</span> <span class=s2>&#34;stop&#34;</span><span class=p>;</span> <span class=k>and</span> <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=nv>$item</span>
</span></span><span class=line><span class=cl><span class=k>end</span></span></span></code></pre></div><h3 class=heading-element id=134-command-substitution-trong-fish><span>13.4 Command Substitution trong Fish</span>
<a href=#134-command-substitution-trong-fish class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># Command substitution dùng ( )
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=nv>current_date</span> <span class=o>(</span><span class=nf>date</span> +%Y-%m-%d<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=nv>file_count</span> <span class=o>(</span><span class=nf>ls</span> <span class=o>|</span> <span class=nf>wc</span> <span class=na>-l</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Nested
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=nv>result</span> <span class=o>(</span><span class=nf>echo</span> <span class=s2>&#34;Files: &#34;</span><span class=o>(</span><span class=nf>ls</span> <span class=o>|</span> <span class=nf>wc</span> <span class=na>-l</span><span class=o>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Process substitution equivalent
</span></span></span><span class=line><span class=cl><span class=c># Fish không có &lt;() như bash, dùng psub
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>diff</span> <span class=o>(</span><span class=nf>cat</span> file1 <span class=o>|</span> <span class=nb>psub</span><span class=o>)</span> <span class=o>(</span><span class=nf>cat</span> file2 <span class=o>|</span> <span class=nb>psub</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># String manipulation (tích hợp sẵn)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>string </span>match <span class=na>-r</span> <span class=s1>&#39;[0-9]+&#39;</span> <span class=s2>&#34;file123.txt&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>string </span>replace <span class=s2>&#34;old&#34;</span> <span class=s2>&#34;new&#34;</span> <span class=s2>&#34;old text&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>string </span>split <span class=s2>&#34;,&#34;</span> <span class=s2>&#34;a,b,c&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>string </span>join <span class=s2>&#34;,&#34;</span> a b c
</span></span><span class=line><span class=cl><span class=nb>string </span>length <span class=s2>&#34;hello&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>string </span>sub <span class=na>-s</span> <span class=m>2</span> <span class=na>-l</span> <span class=m>3</span> <span class=s2>&#34;hello&#34;</span>     <span class=c># ell
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>string </span>upper <span class=s2>&#34;hello&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>string </span>lower <span class=s2>&#34;HELLO&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>string </span>trim <span class=s2>&#34;  hello  &#34;</span></span></span></code></pre></div><h3 class=heading-element id=135-abbreviations-fish-unique-feature><span>13.5 Abbreviations (Fish Unique Feature)</span>
<a href=#135-abbreviations-fish-unique-feature class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># Abbreviations expand khi gõ
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>abbr</span> <span class=na>-a</span> gco <span class=s2>&#34;git checkout&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>abbr</span> <span class=na>-a</span> gst <span class=s2>&#34;git status&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>abbr</span> <span class=na>-a</span> ll <span class=s2>&#34;ls -lah&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>abbr</span> <span class=na>-a</span> ... <span class=s2>&#34;cd ../..&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># List abbreviations
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>abbr</span> <span class=na>-l</span>
</span></span><span class=line><span class=cl><span class=nb>abbr</span> <span class=na>-s</span>      <span class=c># Show definitions
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># Remove
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>abbr</span> <span class=na>-e</span> gco
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Global add (persistent)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>abbr</span> <span class=na>-a</span> <span class=na>-g</span> dc <span class=s2>&#34;docker compose&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Conditional abbreviation (chỉ expand ở đầu line)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>abbr</span> <span class=na>-a</span> <span class=na>--position</span> <span class=nb>command </span>g <span class=s2>&#34;git&#34;</span></span></span></code></pre></div><h3 class=heading-element id=136-completions-trong-fish><span>13.6 Completions trong Fish</span>
<a href=#136-completions-trong-fish class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># Custom completions cho script
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>complete</span> <span class=na>-c</span> myscript <span class=na>-s</span> h <span class=na>-l</span> <span class=nb>help</span> <span class=na>-d</span> <span class=s2>&#34;Show help&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>complete</span> <span class=na>-c</span> myscript <span class=na>-s</span> v <span class=na>-l</span> verbose <span class=na>-d</span> <span class=s2>&#34;Verbose mode&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>complete</span> <span class=na>-c</span> myscript <span class=na>-s</span> f <span class=na>-l</span> file <span class=na>-r</span> <span class=na>-d</span> <span class=s2>&#34;Input file&#34;</span>   <span class=c># -r = requires argument
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># Completion với dynamic values
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>complete</span> <span class=na>-c</span> myscript <span class=na>-s</span> e <span class=na>-l</span> env <span class=na>-xa</span> <span class=s2>&#34;dev staging prod&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Function-based completion
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>complete</span> <span class=na>-c</span> myscript <span class=na>-l</span> server <span class=na>-xa</span> <span class=s1>&#39;(cat ~/.ssh/config | grep &#34;^Host &#34; | cut -d&#34; &#34; -f2)&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Remove completions
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>complete</span> <span class=na>-c</span> myscript <span class=na>-e</span></span></span></code></pre></div><h3 class=heading-element id=137-fish-configuration><span>13.7 Fish Configuration</span>
<a href=#137-fish-configuration class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># Config file: ~/.config/fish/config.fish
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># Không cần export, dùng set -gx
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-gx</span> <span class=nv>EDITOR</span> vim
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-gx</span> <span class=nv>PATH</span> /usr/local/bin <span class=nv>$PATH</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Prompt customization
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nb>fish_prompt
</span></span></span><span class=line><span class=cl><span class=nb>    set_color </span>green
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=na>-n</span> <span class=o>(</span><span class=nf>whoami</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>set_color </span>normal
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=na>-n</span> <span class=s2>&#34;@&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>set_color </span>blue
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=na>-n</span> <span class=o>(</span><span class=nf>hostname</span> <span class=na>-s</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>set_color </span>normal
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=na>-n</span> <span class=s2>&#34;:&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>set_color </span>yellow
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=na>-n</span> <span class=o>(</span><span class=nb>prompt_pwd</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>set_color </span>normal
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=na>-n</span> <span class=s2>&#34;&gt; &#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Greeting
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nb>fish_greeting
</span></span></span><span class=line><span class=cl><span class=nb>    </span><span class=k>echo</span> <span class=s2>&#34;Welcome to Fish Shell!&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;Today is &#34;</span><span class=o>(</span><span class=nf>date</span> +%A<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Mode indicator (vi mode)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nb>fish_mode_prompt
</span></span></span><span class=line><span class=cl><span class=nb>    </span><span class=k>switch</span> <span class=nv>$fish_bind_mode</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> default
</span></span><span class=line><span class=cl>            <span class=nb>set_color </span>green
</span></span><span class=line><span class=cl>            <span class=k>echo</span> <span class=s2>&#34;[N]&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> insert
</span></span><span class=line><span class=cl>            <span class=nb>set_color </span>blue
</span></span><span class=line><span class=cl>            <span class=k>echo</span> <span class=s2>&#34;[I]&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> visual
</span></span><span class=line><span class=cl>            <span class=nb>set_color </span>magenta
</span></span><span class=line><span class=cl>            <span class=k>echo</span> <span class=s2>&#34;[V]&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>    <span class=nb>set_color </span>normal
</span></span><span class=line><span class=cl><span class=k>end</span></span></span></code></pre></div><hr><h2 class=heading-element id=14-bash-vs-fish-comparison><span>14. BASH VS FISH COMPARISON</span>
<a href=#14-bash-vs-fish-comparison class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=err>┌───────────────────────────────────────────────────────────────────────────────────┐</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w>                         </span><span class=n>BASH</span><span class=w> </span><span class=n>VS</span><span class=w> </span><span class=n>FISH</span><span class=w> </span><span class=n>QUICK</span><span class=w> </span><span class=n>REFERENCE</span><span class=w>                              </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┬──────────────────────────┬───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Feature</span><span class=w>                </span><span class=err>│</span><span class=w> </span><span class=n>Bash</span><span class=w>                     </span><span class=err>│</span><span class=w> </span><span class=n>Fish</span><span class=w>                          </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Variable</span><span class=w> </span><span class=n>assignment</span><span class=w>    </span><span class=err>│</span><span class=w> </span><span class=n>var</span><span class=o>=</span><span class=s2>&#34;value&#34;</span><span class=w>              </span><span class=err>│</span><span class=w> </span><span class=kt>set</span><span class=w> </span><span class=n>var</span><span class=w> </span><span class=s2>&#34;value&#34;</span><span class=w>               </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Variable</span><span class=w> </span><span class=n>access</span><span class=w>        </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=n>var</span><span class=w> </span><span class=n>hoặc</span><span class=w> </span><span class=err>${</span><span class=n>var</span><span class=err>}</span><span class=w>         </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=n>var</span><span class=w>                          </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Export</span><span class=w> </span><span class=n>variable</span><span class=w>        </span><span class=err>│</span><span class=w> </span><span class=n>export</span><span class=w> </span><span class=n>VAR</span><span class=o>=</span><span class=s2>&#34;value&#34;</span><span class=w>       </span><span class=err>│</span><span class=w> </span><span class=kt>set</span><span class=w> </span><span class=o>-</span><span class=n>gx</span><span class=w> </span><span class=n>VAR</span><span class=w> </span><span class=s2>&#34;value&#34;</span><span class=w>           </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Local</span><span class=w> </span><span class=n>variable</span><span class=w>         </span><span class=err>│</span><span class=w> </span><span class=n>local</span><span class=w> </span><span class=n>var</span><span class=o>=</span><span class=s2>&#34;value&#34;</span><span class=w>        </span><span class=err>│</span><span class=w> </span><span class=kt>set</span><span class=w> </span><span class=o>-</span><span class=n>l</span><span class=w> </span><span class=n>var</span><span class=w> </span><span class=s2>&#34;value&#34;</span><span class=w>            </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Unset</span><span class=w> </span><span class=n>variable</span><span class=w>         </span><span class=err>│</span><span class=w> </span><span class=n>unset</span><span class=w> </span><span class=n>var</span><span class=w>                </span><span class=err>│</span><span class=w> </span><span class=kt>set</span><span class=w> </span><span class=o>-</span><span class=n>e</span><span class=w> </span><span class=n>var</span><span class=w>                    </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Command</span><span class=w> </span><span class=n>substitution</span><span class=w>   </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=p>(</span><span class=n>command</span><span class=p>)</span><span class=w> </span><span class=n>hoặc</span><span class=w> </span><span class=o>`</span><span class=n>cmd</span><span class=o>`</span><span class=w>    </span><span class=err>│</span><span class=w> </span><span class=p>(</span><span class=n>command</span><span class=p>)</span><span class=w>                     </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=k>Exit</span><span class=w> </span><span class=n>status</span><span class=w>            </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=o>?</span><span class=w>                       </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=n>status</span><span class=w>                       </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>PID</span><span class=w>                    </span><span class=err>│</span><span class=w> </span><span class=err>$$</span><span class=w>                       </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=n>fish_pid</span><span class=w>                     </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Arguments</span><span class=w>              </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=o>@</span><span class=p>,</span><span class=w> </span><span class=err>$</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=err>$</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=err>$</span><span class=mi>2</span><span class=p>...</span><span class=w>        </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=n>argv</span><span class=p>,</span><span class=w> </span><span class=err>$</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>]...</span><span class=w>            </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=k>declare</span><span class=w>          </span><span class=err>│</span><span class=w> </span><span class=n>arr</span><span class=o>=</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=w> </span><span class=s2>&#34;b&#34;</span><span class=w> </span><span class=s2>&#34;c&#34;</span><span class=p>)</span><span class=w>        </span><span class=err>│</span><span class=w> </span><span class=kt>set</span><span class=w> </span><span class=n>arr</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w>                 </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>access</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=err>${</span><span class=n>arr</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=err>}</span><span class=w> </span><span class=p>(</span><span class=mi>0</span><span class=o>-</span><span class=n>indexed</span><span class=p>)</span><span class=w>    </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=n>arr</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>indexed</span><span class=o>!</span><span class=p>)</span><span class=w>          </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=k>all</span><span class=w>              </span><span class=err>│</span><span class=w> </span><span class=err>${</span><span class=n>arr</span><span class=p>[</span><span class=o>@</span><span class=p>]</span><span class=err>}</span><span class=w>                </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=n>arr</span><span class=w>                          </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>length</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=err>${</span><span class=c1>#arr[@]}               │ (count $arr)                  │
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>│</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>append</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=n>arr</span><span class=o>+=</span><span class=p>(</span><span class=s2>&#34;d&#34;</span><span class=p>)</span><span class=w>               </span><span class=err>│</span><span class=w> </span><span class=kt>set</span><span class=w> </span><span class=o>-</span><span class=n>a</span><span class=w> </span><span class=n>arr</span><span class=w> </span><span class=n>d</span><span class=w>                  </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>length</span><span class=w>          </span><span class=err>│</span><span class=w> </span><span class=err>${</span><span class=c1>#var}                  │ (string length $var)          │
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>│</span><span class=w> </span><span class=n>Substring</span><span class=w>              </span><span class=err>│</span><span class=w> </span><span class=err>${</span><span class=n>var</span><span class=p>:</span><span class=mi>0</span><span class=p>:</span><span class=mi>5</span><span class=err>}</span><span class=w>               </span><span class=err>│</span><span class=w> </span><span class=p>(</span><span class=n>string</span><span class=w> </span><span class=n>sub</span><span class=w> </span><span class=o>-</span><span class=n>l</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=err>$</span><span class=n>var</span><span class=p>)</span><span class=w>        </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=k>Replace</span><span class=w>                </span><span class=err>│</span><span class=w> </span><span class=err>${</span><span class=n>var</span><span class=o>//</span><span class=n>old</span><span class=o>/</span><span class=n>new</span><span class=err>}</span><span class=w>          </span><span class=err>│</span><span class=w> </span><span class=p>(</span><span class=n>string</span><span class=w> </span><span class=k>replace</span><span class=w> </span><span class=o>-</span><span class=n>a</span><span class=w> </span><span class=n>old</span><span class=w> </span><span class=n>new</span><span class=p>)</span><span class=w>   </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Split</span><span class=w>                  </span><span class=err>│</span><span class=w> </span><span class=n>IFS</span><span class=o>=</span><span class=p>,</span><span class=w> </span><span class=k>read</span><span class=w> </span><span class=o>-</span><span class=n>ra</span><span class=w> </span><span class=n>arr</span><span class=o>&lt;&lt;&lt;</span><span class=err>$</span><span class=n>s</span><span class=w>  </span><span class=err>│</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>split</span><span class=w> </span><span class=s2>&#34;,&#34;</span><span class=w> </span><span class=err>$</span><span class=n>s</span><span class=w>           </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Uppercase</span><span class=w>              </span><span class=err>│</span><span class=w> </span><span class=err>${</span><span class=n>var</span><span class=o>^^</span><span class=err>}</span><span class=w>                 </span><span class=err>│</span><span class=w> </span><span class=p>(</span><span class=n>string</span><span class=w> </span><span class=n>upper</span><span class=w> </span><span class=err>$</span><span class=n>var</span><span class=p>)</span><span class=w>           </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=k>If</span><span class=w> </span><span class=n>syntax</span><span class=w>              </span><span class=err>│</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>[[</span><span class=w> </span><span class=p>]];</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=n>fi</span><span class=w>    </span><span class=err>│</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=p>...;</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=n>end</span><span class=w>          </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Test</span><span class=w> </span><span class=n>file</span><span class=w>              </span><span class=err>│</span><span class=w> </span><span class=p>[[</span><span class=w> </span><span class=o>-</span><span class=n>f</span><span class=w> </span><span class=err>$</span><span class=n>file</span><span class=w> </span><span class=p>]]</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=o>-</span><span class=n>f</span><span class=w> </span><span class=err>$</span><span class=n>file</span><span class=w>                 </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Test</span><span class=w> </span><span class=n>string</span><span class=w>            </span><span class=err>│</span><span class=w> </span><span class=p>[[</span><span class=w> </span><span class=err>$</span><span class=n>a</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=err>$</span><span class=n>b</span><span class=w> </span><span class=p>]]</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=err>$</span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>$</span><span class=n>b</span><span class=w>                  </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Test</span><span class=w> </span><span class=n>number</span><span class=w>            </span><span class=err>│</span><span class=w> </span><span class=p>((</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=p>))</span><span class=w>              </span><span class=err>│</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=err>$</span><span class=n>a</span><span class=w> </span><span class=o>-</span><span class=n>gt</span><span class=w> </span><span class=err>$</span><span class=n>b</span><span class=w>                </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=k>And</span><span class=o>/</span><span class=k>Or</span><span class=w>                 </span><span class=err>│</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=o>||</span><span class=w>                    </span><span class=err>│</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=k>and</span><span class=w>   </span><span class=p>;</span><span class=w> </span><span class=k>or</span><span class=w>                  </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=k>For</span><span class=w> </span><span class=k>loop</span><span class=w>               </span><span class=err>│</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>list</span><span class=p>;</span><span class=w> </span><span class=n>do</span><span class=p>...</span><span class=n>done</span><span class=w> </span><span class=err>│</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>list</span><span class=p>;</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=n>end</span><span class=w>        </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=k>While</span><span class=w> </span><span class=k>loop</span><span class=w>             </span><span class=err>│</span><span class=w> </span><span class=k>while</span><span class=w> </span><span class=p>...;</span><span class=w> </span><span class=n>do</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=n>done</span><span class=w>   </span><span class=err>│</span><span class=w> </span><span class=k>while</span><span class=w> </span><span class=p>...;</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=n>end</span><span class=w>            </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=k>Case</span><span class=o>/</span><span class=n>Switch</span><span class=w>            </span><span class=err>│</span><span class=w> </span><span class=k>case</span><span class=w> </span><span class=err>$</span><span class=n>v</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=p>;;</span><span class=w> </span><span class=n>esac</span><span class=w>  </span><span class=err>│</span><span class=w> </span><span class=n>switch</span><span class=w> </span><span class=err>$</span><span class=n>v</span><span class=p>;</span><span class=w> </span><span class=k>case</span><span class=w> </span><span class=p>...;</span><span class=w> </span><span class=n>end</span><span class=w>      </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Function</span><span class=w> </span><span class=n>define</span><span class=w>        </span><span class=err>│</span><span class=w> </span><span class=nf>func</span><span class=p>()</span><span class=w> </span><span class=err>{</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=err>}</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=n>function</span><span class=w> </span><span class=n>func</span><span class=p>;</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=n>end</span><span class=w>        </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Function</span><span class=w> </span><span class=n>args</span><span class=w>          </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=err>$</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=err>$</span><span class=o>@</span><span class=w>               </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span><span class=w> </span><span class=err>$</span><span class=n>argv</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span><span class=w> </span><span class=err>$</span><span class=n>argv</span><span class=w>     </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=k>Return</span><span class=w> </span><span class=n>value</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=n>echo</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>capture</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=n>echo</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nf>capture</span><span class=w> </span><span class=p>(</span><span class=n>same</span><span class=p>)</span><span class=w>         </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Arithmetic</span><span class=w>             </span><span class=err>│</span><span class=w> </span><span class=err>$</span><span class=p>((</span><span class=n>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>b</span><span class=p>))</span><span class=w>               </span><span class=err>│</span><span class=w> </span><span class=p>(</span><span class=n>math</span><span class=w> </span><span class=err>$</span><span class=n>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>$</span><span class=n>b</span><span class=p>)</span><span class=w>                </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Redirect</span><span class=w> </span><span class=n>stderr</span><span class=w>        </span><span class=err>│</span><span class=w> </span><span class=mi>2</span><span class=o>&gt;&amp;</span><span class=mi>1</span><span class=w>                     </span><span class=err>│</span><span class=w> </span><span class=mi>2</span><span class=o>&gt;&amp;</span><span class=mi>1</span><span class=w> </span><span class=p>(</span><span class=n>same</span><span class=p>)</span><span class=w>                   </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Pipe</span><span class=w> </span><span class=n>stderr</span><span class=w>            </span><span class=err>│</span><span class=w> </span><span class=o>|&amp;</span><span class=w>                       </span><span class=err>│</span><span class=w> </span><span class=mi>2</span><span class=o>&gt;&amp;</span><span class=mi>1</span><span class=w> </span><span class=o>|</span><span class=w>                        </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Process</span><span class=w> </span><span class=n>substitution</span><span class=w>   </span><span class=err>│</span><span class=w> </span><span class=o>&lt;</span><span class=p>(</span><span class=n>command</span><span class=p>)</span><span class=w>               </span><span class=err>│</span><span class=w> </span><span class=p>(</span><span class=n>command</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>psub</span><span class=p>)</span><span class=w>              </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>├────────────────────────┼──────────────────────────┼───────────────────────────────┤</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Alias</span><span class=w>                  </span><span class=err>│</span><span class=w> </span><span class=n>alias</span><span class=w> </span><span class=n>ll</span><span class=o>=</span><span class=s1>&#39;ls -la&#39;</span><span class=w>        </span><span class=err>│</span><span class=w> </span><span class=n>alias</span><span class=w> </span><span class=n>ll</span><span class=w> </span><span class=s1>&#39;ls -la&#39;</span><span class=w>             </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Abbreviation</span><span class=w>           </span><span class=err>│</span><span class=w> </span><span class=n>N</span><span class=o>/</span><span class=n>A</span><span class=w>                      </span><span class=err>│</span><span class=w> </span><span class=n>abbr</span><span class=w> </span><span class=o>-</span><span class=n>a</span><span class=w> </span><span class=n>gst</span><span class=w> </span><span class=s1>&#39;git status&#39;</span><span class=w>      </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>│</span><span class=w> </span><span class=n>Config</span><span class=w> </span><span class=n>file</span><span class=w>            </span><span class=err>│</span><span class=w> </span><span class=o>~/</span><span class=p>.</span><span class=n>bashrc</span><span class=w>                </span><span class=err>│</span><span class=w> </span><span class=o>~/</span><span class=p>.</span><span class=n>config</span><span class=o>/</span><span class=n>fish</span><span class=o>/</span><span class=n>config</span><span class=p>.</span><span class=n>fish</span><span class=w>    </span><span class=err>│</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>└────────────────────────┴──────────────────────────┴───────────────────────────────┘</span></span></span></code></pre></div><h3 class=heading-element id=141-migration-examples><span>14.1 Migration Examples</span>
<a href=#141-migration-examples class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Bash → Fish migration</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bash: Variable với default</span>
</span></span><span class=line><span class=cl><span class=nv>name</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>1</span><span class=k>:-</span><span class=nv>default</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Fish:</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> name <span class=o>(</span><span class=k>if</span> <span class=nb>set</span> -q argv<span class=o>[</span>1<span class=o>]</span><span class=p>;</span> <span class=nb>echo</span> <span class=nv>$argv</span><span class=o>[</span>1<span class=o>]</span><span class=p>;</span> <span class=k>else</span><span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;default&#34;</span><span class=p>;</span> end<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=c1># Hoặc đơn giản:</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> name <span class=nv>$argv</span><span class=o>[</span>1<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nb>test</span> -z <span class=s2>&#34;</span><span class=nv>$name</span><span class=s2>&#34;</span><span class=p>;</span> and <span class=nb>set</span> name <span class=s2>&#34;default&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bash: Read file</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span> <span class=nb>read</span> -r line<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$line</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span> &lt; file.txt
</span></span><span class=line><span class=cl><span class=c1># Fish:</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nb>read</span> -l line
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=nv>$line</span>
</span></span><span class=line><span class=cl>end &lt; file.txt
</span></span><span class=line><span class=cl><span class=c1># Hoặc dùng cat:</span>
</span></span><span class=line><span class=cl>cat file.txt <span class=p>|</span> <span class=k>while</span> <span class=nb>read</span> line
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=nv>$line</span>
</span></span><span class=line><span class=cl>end
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bash: Check command exists</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>command</span> -v docker <span class=p>&amp;</span>&gt;/dev/null<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Docker installed&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=c1># Fish:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>command</span> -v docker &gt;/dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Docker installed&#34;</span>
</span></span><span class=line><span class=cl>end
</span></span><span class=line><span class=cl><span class=c1># Hoặc:</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>type</span> -q docker
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Docker installed&#34;</span>
</span></span><span class=line><span class=cl>end
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bash: Arithmetic</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$((</span>a <span class=o>+</span> b <span class=o>*</span> <span class=m>2</span><span class=k>))</span>
</span></span><span class=line><span class=cl><span class=c1># Fish:</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> result <span class=o>(</span>math <span class=s2>&#34;</span><span class=nv>$a</span><span class=s2> + </span><span class=nv>$b</span><span class=s2> * 2&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bash: Here document</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>Hello $name
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=c1># Fish: Không có heredoc, dùng echo hoặc printf</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hello </span><span class=nv>$name</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># Hoặc multiline:</span>
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s1>&#39;%s\n&#39;</span> <span class=s2>&#34;Line 1&#34;</span> <span class=s2>&#34;Line 2&#34;</span> <span class=s2>&#34;Line 3&#34;</span></span></span></code></pre></div><hr><h2 class=heading-element id=15-production-script-templates><span>15. PRODUCTION SCRIPT TEMPLATES</span>
<a href=#15-production-script-templates class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=151-bash-production-template><span>15.1 Bash Production Template</span>
<a href=#151-bash-production-template class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>#===============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># Script: production-template.sh</span>
</span></span><span class=line><span class=cl><span class=c1># Description: Template cho production scripts</span>
</span></span><span class=line><span class=cl><span class=c1># Author: Your Name</span>
</span></span><span class=line><span class=cl><span class=c1># Version: 1.0.0</span>
</span></span><span class=line><span class=cl><span class=c1>#===============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>set</span> -euo pipefail
</span></span><span class=line><span class=cl><span class=nv>IFS</span><span class=o>=</span><span class=s1>$&#39;\n\t&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== CONFIGURATION ============================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>SCRIPT_NAME</span><span class=o>=</span><span class=k>$(</span>basename <span class=s2>&#34;</span><span class=nv>$0</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>SCRIPT_DIR</span><span class=o>=</span><span class=k>$(</span><span class=nb>cd</span> <span class=s2>&#34;</span><span class=k>$(</span>dirname <span class=s2>&#34;</span><span class=nv>$0</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>&#34;</span> <span class=o>&amp;&amp;</span> <span class=nb>pwd</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>LOG_DIR</span><span class=o>=</span><span class=s2>&#34;/var/log/scripts&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>LOG_FILE</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>LOG_DIR</span><span class=si>}</span><span class=s2>/</span><span class=si>${</span><span class=nv>SCRIPT_NAME</span><span class=p>%.*</span><span class=si>}</span><span class=s2>_</span><span class=k>$(</span>date +%Y%m%d<span class=k>)</span><span class=s2>.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Colors</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>RED</span><span class=o>=</span><span class=s1>&#39;\033[0;31m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>GREEN</span><span class=o>=</span><span class=s1>&#39;\033[0;32m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>YELLOW</span><span class=o>=</span><span class=s1>&#39;\033[1;33m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>BLUE</span><span class=o>=</span><span class=s1>&#39;\033[0;34m&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>readonly</span> <span class=nv>NC</span><span class=o>=</span><span class=s1>&#39;\033[0m&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Defaults</span>
</span></span><span class=line><span class=cl><span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>DRY_RUN</span><span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=nv>ENVIRONMENT</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== LOGGING ==================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>setup_logging<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    mkdir -p <span class=s2>&#34;</span><span class=nv>$LOG_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exec</span> 3&gt;<span class=p>&amp;</span><span class=m>1</span> 4&gt;<span class=p>&amp;</span><span class=m>2</span>  <span class=c1># Save original stdout/stderr</span>
</span></span><span class=line><span class=cl>    <span class=nb>exec</span> 1&gt; &gt;<span class=o>(</span>tee -a <span class=s2>&#34;</span><span class=nv>$LOG_FILE</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>exec</span> 2&gt; &gt;<span class=o>(</span>tee -a <span class=s2>&#34;</span><span class=nv>$LOG_FILE</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span>2<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>log<span class=o>()</span> <span class=o>{</span> <span class=nb>echo</span> <span class=s2>&#34;[</span><span class=k>$(</span>date <span class=s1>&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class=k>)</span><span class=s2>] </span><span class=nv>$*</span><span class=s2>&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_info<span class=o>()</span>  <span class=o>{</span> log <span class=s2>&#34;</span><span class=si>${</span><span class=nv>GREEN</span><span class=si>}</span><span class=s2>[INFO]</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_warn<span class=o>()</span>  <span class=o>{</span> log <span class=s2>&#34;</span><span class=si>${</span><span class=nv>YELLOW</span><span class=si>}</span><span class=s2>[WARN]</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_error<span class=o>()</span> <span class=o>{</span> log <span class=s2>&#34;</span><span class=si>${</span><span class=nv>RED</span><span class=si>}</span><span class=s2>[ERROR]</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>log_debug<span class=o>()</span> <span class=o>{</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$VERBOSE</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=nb>true</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> log <span class=s2>&#34;</span><span class=si>${</span><span class=nv>BLUE</span><span class=si>}</span><span class=s2>[DEBUG]</span><span class=si>${</span><span class=nv>NC</span><span class=si>}</span><span class=s2> </span><span class=nv>$*</span><span class=s2>&#34;</span> <span class=o>||</span> true<span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>die<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    log_error <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>2</span><span class=k>:-</span><span class=nv>1</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== VALIDATION ===============================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>validate_requirements<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>missing</span><span class=o>=()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> cmd in curl jq rsync<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=nb>command</span> -v <span class=s2>&#34;</span><span class=nv>$cmd</span><span class=s2>&#34;</span> <span class=p>&amp;</span>&gt;/dev/null <span class=o>||</span> <span class=nv>missing</span><span class=o>+=(</span><span class=s2>&#34;</span><span class=nv>$cmd</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> <span class=si>${#</span><span class=nv>missing</span><span class=p>[@]</span><span class=si>}</span> -gt <span class=m>0</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> die <span class=s2>&#34;Missing required commands: </span><span class=si>${</span><span class=nv>missing</span><span class=p>[*]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> -n <span class=s2>&#34;</span><span class=nv>$ENVIRONMENT</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>||</span> die <span class=s2>&#34;Environment must be specified&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$ENVIRONMENT</span><span class=s2>&#34;</span> <span class=o>=</span>~ ^<span class=o>(</span>dev<span class=p>|</span>staging<span class=p>|</span>prod<span class=o>)</span>$ <span class=o>]]</span> <span class=o>||</span> die <span class=s2>&#34;Invalid environment: </span><span class=nv>$ENVIRONMENT</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== CLEANUP ==================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>CLEANUP_ITEMS</span><span class=o>=()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cleanup<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>exit_code</span><span class=o>=</span><span class=nv>$?</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    log_debug <span class=s2>&#34;Running cleanup...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> item in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>CLEANUP_ITEMS</span><span class=p>[@]</span><span class=k>:-</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>[[</span> -d <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            rm -rf <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            log_debug <span class=s2>&#34;Removed directory: </span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=o>[[</span> -f <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            rm -f <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            log_debug <span class=s2>&#34;Removed file: </span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Kill background jobs</span>
</span></span><span class=line><span class=cl>    <span class=nb>jobs</span> -p 2&gt;/dev/null <span class=p>|</span> xargs -r <span class=nb>kill</span> 2&gt;/dev/null <span class=o>||</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    log_debug <span class=s2>&#34;Cleanup completed&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=nv>$exit_code</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== MAIN LOGIC ===============================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>do_deploy<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> <span class=nv>env</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    log_info <span class=s2>&#34;Starting deployment to </span><span class=nv>$env</span><span class=s2>...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$DRY_RUN</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=nb>true</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        log_info <span class=s2>&#34;[DRY-RUN] Would deploy to </span><span class=nv>$env</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Create temp directory</span>
</span></span><span class=line><span class=cl>    <span class=nb>local</span> temp_dir
</span></span><span class=line><span class=cl>    <span class=nv>temp_dir</span><span class=o>=</span><span class=k>$(</span>mktemp -d<span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=nv>CLEANUP_ITEMS</span><span class=o>+=(</span><span class=s2>&#34;</span><span class=nv>$temp_dir</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    log_debug <span class=s2>&#34;Using temp directory: </span><span class=nv>$temp_dir</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Your deployment logic here</span>
</span></span><span class=line><span class=cl>    <span class=c1># ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    log_info <span class=s2>&#34;Deployment to </span><span class=nv>$env</span><span class=s2> completed successfully&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== ARGUMENT PARSING =========================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>usage<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    cat <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>Usage: $SCRIPT_NAME [OPTIONS] -e &lt;environment&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Deploy application to specified environment.
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Options:
</span></span></span><span class=line><span class=cl><span class=s>    -e, --env ENV       Target environment (dev|staging|prod) [required]
</span></span></span><span class=line><span class=cl><span class=s>    -v, --verbose       Enable verbose output
</span></span></span><span class=line><span class=cl><span class=s>    -d, --dry-run       Show what would be done without executing
</span></span></span><span class=line><span class=cl><span class=s>    -h, --help          Show this help message
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Examples:
</span></span></span><span class=line><span class=cl><span class=s>    $SCRIPT_NAME -e staging
</span></span></span><span class=line><span class=cl><span class=s>    $SCRIPT_NAME --env prod --verbose
</span></span></span><span class=line><span class=cl><span class=s>    $SCRIPT_NAME -e dev --dry-run
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>parse_args<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=o>[[</span> <span class=nv>$#</span> -gt <span class=m>0</span> <span class=o>]]</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=nv>$1</span> in
</span></span><span class=line><span class=cl>            -e<span class=p>|</span>--env<span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=nv>ENVIRONMENT</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$2</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=nb>shift</span> <span class=m>2</span>
</span></span><span class=line><span class=cl>                <span class=p>;;</span>
</span></span><span class=line><span class=cl>            -v<span class=p>|</span>--verbose<span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=nv>VERBOSE</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>                <span class=nb>shift</span>
</span></span><span class=line><span class=cl>                <span class=p>;;</span>
</span></span><span class=line><span class=cl>            -d<span class=p>|</span>--dry-run<span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=nv>DRY_RUN</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>                <span class=nb>shift</span>
</span></span><span class=line><span class=cl>                <span class=p>;;</span>
</span></span><span class=line><span class=cl>            -h<span class=p>|</span>--help<span class=o>)</span>
</span></span><span class=line><span class=cl>                usage
</span></span><span class=line><span class=cl>                <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>                <span class=p>;;</span>
</span></span><span class=line><span class=cl>            -*<span class=o>)</span>
</span></span><span class=line><span class=cl>                die <span class=s2>&#34;Unknown option: </span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>;;</span>
</span></span><span class=line><span class=cl>            *<span class=o>)</span>
</span></span><span class=line><span class=cl>                die <span class=s2>&#34;Unexpected argument: </span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>;;</span>
</span></span><span class=line><span class=cl>        <span class=k>esac</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#=== ENTRY POINT ==============================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    parse_args <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    setup_logging
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    log_info <span class=s2>&#34;=== </span><span class=nv>$SCRIPT_NAME</span><span class=s2> started ===&#34;</span>
</span></span><span class=line><span class=cl>    log_debug <span class=s2>&#34;Script directory: </span><span class=nv>$SCRIPT_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    log_debug <span class=s2>&#34;Environment: </span><span class=nv>$ENVIRONMENT</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    log_debug <span class=s2>&#34;Dry run: </span><span class=nv>$DRY_RUN</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    log_debug <span class=s2>&#34;Verbose: </span><span class=nv>$VERBOSE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    validate_requirements
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    do_deploy <span class=s2>&#34;</span><span class=nv>$ENVIRONMENT</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    log_info <span class=s2>&#34;=== </span><span class=nv>$SCRIPT_NAME</span><span class=s2> completed ===&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>trap</span> cleanup EXIT
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s1>&#39;die &#34;Interrupted by user&#34; 130&#39;</span> INT TERM
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span></span></span></code></pre></div><h3 class=heading-element id=152-fish-production-template><span>15.2 Fish Production Template</span>
<a href=#152-fish-production-template class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=ch>#!/usr/bin/env fish
</span></span></span><span class=line><span class=cl><span class=ch></span><span class=c>#===============================================================================
</span></span></span><span class=line><span class=cl><span class=c># Script: production-template.fish
</span></span></span><span class=line><span class=cl><span class=c># Description: Template cho production scripts trong Fish
</span></span></span><span class=line><span class=cl><span class=c># Author: Your Name
</span></span></span><span class=line><span class=cl><span class=c># Version: 1.0.0
</span></span></span><span class=line><span class=cl><span class=c>#===============================================================================
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c>#=== CONFIGURATION ============================================================
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>SCRIPT_NAME</span> <span class=o>(</span><span class=nf>basename</span> <span class=o>(</span><span class=nb>status</span> <span class=na>-f</span><span class=o>))</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>SCRIPT_DIR</span> <span class=o>(</span><span class=nf>dirname</span> <span class=o>(</span><span class=nb>status</span> <span class=na>-f</span><span class=o>))</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>LOG_DIR</span> <span class=s2>&#34;/var/log/scripts&#34;</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>LOG_FILE</span> <span class=s2>&#34;</span><span class=nv>$LOG_DIR</span><span class=s2>/&#34;</span><span class=o>(</span><span class=nb>string </span>replace <span class=na>-r</span> <span class=s1>&#39;\.fish$&#39;</span> <span class=s1>&#39;&#39;</span> <span class=nv>$SCRIPT_NAME</span><span class=o>)</span><span class=s2>&#34;_&#34;</span><span class=o>(</span><span class=nf>date</span> +%Y%m%d<span class=o>)</span><span class=s2>&#34;.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Colors (fish built-in set_color)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-g</span> <span class=nv>C_RED</span> <span class=o>(</span><span class=nb>set_color </span>red<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>C_GREEN</span> <span class=o>(</span><span class=nb>set_color </span>green<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>C_YELLOW</span> <span class=o>(</span><span class=nb>set_color </span>yellow<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>C_BLUE</span> <span class=o>(</span><span class=nb>set_color </span>blue<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>C_NORMAL</span> <span class=o>(</span><span class=nb>set_color </span>normal<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Defaults
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-g</span> <span class=nv>VERBOSE</span> false
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>DRY_RUN</span> false
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-g</span> <span class=nv>ENVIRONMENT</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Cleanup items
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=na>-g</span> <span class=nv>CLEANUP_ITEMS</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>#=== LOGGING ==================================================================
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>log</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;[&#34;</span><span class=o>(</span><span class=nf>date</span> <span class=s1>&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class=o>)</span><span class=s2>&#34;] </span><span class=nv>$argv</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>log_info</span>
</span></span><span class=line><span class=cl>    <span class=nf>log</span> <span class=nv>$C_GREEN</span><span class=s2>&#34;[INFO]&#34;</span><span class=nv>$C_NORMAL</span> <span class=nv>$argv</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>log_warn</span>
</span></span><span class=line><span class=cl>    <span class=nf>log</span> <span class=nv>$C_YELLOW</span><span class=s2>&#34;[WARN]&#34;</span><span class=nv>$C_NORMAL</span> <span class=nv>$argv</span> <span class=o>&gt;&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>log_error</span>
</span></span><span class=line><span class=cl>    <span class=nf>log</span> <span class=nv>$C_RED</span><span class=s2>&#34;[ERROR]&#34;</span><span class=nv>$C_NORMAL</span> <span class=nv>$argv</span> <span class=o>&gt;&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>log_debug</span>
</span></span><span class=line><span class=cl>    <span class=k>test</span> <span class=s2>&#34;</span><span class=nv>$VERBOSE</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;true&#34;</span><span class=p>;</span> <span class=k>and</span> <span class=nf>log</span> <span class=nv>$C_BLUE</span><span class=s2>&#34;[DEBUG]&#34;</span><span class=nv>$C_NORMAL</span> <span class=nv>$argv</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>die</span>
</span></span><span class=line><span class=cl>    <span class=nf>log_error</span> <span class=nv>$argv</span><span class=o>[</span><span class=m>1</span><span class=o>]</span>
</span></span><span class=line><span class=cl>    <span class=k>exit</span> <span class=o>(</span><span class=nf>test</span> <span class=na>-n</span> <span class=s2>&#34;</span><span class=nv>$argv</span><span class=s2>[2]&#34;</span><span class=p>;</span> <span class=k>and</span> <span class=k>echo</span> <span class=nv>$argv</span><span class=o>[</span><span class=m>2</span><span class=o>]</span><span class=p>;</span> <span class=k>or</span> <span class=k>echo</span> <span class=m>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>#=== VALIDATION ===============================================================
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>validate_requirements</span>
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=na>-l</span> <span class=nv>missing</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nv>cmd</span> <span class=k>in</span> curl jq rsync
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=k>not</span> <span class=nb>type</span> <span class=na>-q</span> <span class=nv>$cmd</span>
</span></span><span class=line><span class=cl>            <span class=k>set</span> <span class=na>-a</span> <span class=nv>missing</span> <span class=nv>$cmd</span>
</span></span><span class=line><span class=cl>        <span class=k>end</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>test</span> <span class=o>(</span><span class=nf>count</span> <span class=nv>$missing</span><span class=o>)</span> <span class=na>-gt</span> <span class=m>0</span><span class=p>;</span> <span class=k>and</span> <span class=nf>die</span> <span class=s2>&#34;Missing required commands: </span><span class=nv>$missing</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>test</span> <span class=na>-z</span> <span class=s2>&#34;</span><span class=nv>$ENVIRONMENT</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>and</span> <span class=nf>die</span> <span class=s2>&#34;Environment must be specified&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=k>not</span> <span class=nb>string </span>match <span class=na>-qr</span> <span class=s1>&#39;^(dev|staging|prod)$&#39;</span> <span class=nv>$ENVIRONMENT</span>
</span></span><span class=line><span class=cl>        <span class=nf>die</span> <span class=s2>&#34;Invalid environment: </span><span class=nv>$ENVIRONMENT</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>#=== CLEANUP ==================================================================
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>cleanup</span> <span class=na>--on-event</span> fish_exit
</span></span><span class=line><span class=cl>    <span class=nf>log_debug</span> <span class=s2>&#34;Running cleanup...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nv>item</span> <span class=k>in</span> <span class=nv>$CLEANUP_ITEMS</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=k>test</span> <span class=na>-d</span> <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nf>rm</span> <span class=na>-rf</span> <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nf>log_debug</span> <span class=s2>&#34;Removed directory: </span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span> <span class=k>test</span> <span class=na>-f</span> <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nf>rm</span> <span class=na>-f</span> <span class=s2>&#34;</span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nf>log_debug</span> <span class=s2>&#34;Removed file: </span><span class=nv>$item</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>end</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>log_debug</span> <span class=s2>&#34;Cleanup completed&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>#=== MAIN LOGIC ===============================================================
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>do_deploy</span>
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=na>-l</span> <span class=nv>env</span> <span class=nv>$argv</span><span class=o>[</span><span class=m>1</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>log_info</span> <span class=s2>&#34;Starting deployment to </span><span class=nv>$env</span><span class=s2>...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=k>test</span> <span class=s2>&#34;</span><span class=nv>$DRY_RUN</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;true&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nf>log_info</span> <span class=s2>&#34;[DRY-RUN] Would deploy to </span><span class=nv>$env</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c># Create temp directory
</span></span></span><span class=line><span class=cl><span class=c></span>    <span class=k>set</span> <span class=na>-l</span> <span class=nv>temp_dir</span> <span class=o>(</span><span class=nf>mktemp</span> <span class=na>-d</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=na>-a</span> <span class=nv>CLEANUP_ITEMS</span> <span class=nv>$temp_dir</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>log_debug</span> <span class=s2>&#34;Using temp directory: </span><span class=nv>$temp_dir</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c># Your deployment logic here
</span></span></span><span class=line><span class=cl><span class=c></span>    <span class=c># ...
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl>    <span class=nf>log_info</span> <span class=s2>&#34;Deployment to </span><span class=nv>$env</span><span class=s2> completed successfully&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>#=== ARGUMENT PARSING =========================================================
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>usage</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=s2>&#34;Usage: </span><span class=nv>$SCRIPT_NAME</span><span class=s2> [OPTIONS] -e &lt;environment&gt;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>Deploy application to specified environment.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>Options:
</span></span></span><span class=line><span class=cl><span class=s2>    -e, --env ENV       Target environment (dev|staging|prod) [required]
</span></span></span><span class=line><span class=cl><span class=s2>    -v, --verbose       Enable verbose output
</span></span></span><span class=line><span class=cl><span class=s2>    -d, --dry-run       Show what would be done without executing
</span></span></span><span class=line><span class=cl><span class=s2>    -h, --help          Show this help message
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>Examples:
</span></span></span><span class=line><span class=cl><span class=s2>    </span><span class=nv>$SCRIPT_NAME</span><span class=s2> -e staging
</span></span></span><span class=line><span class=cl><span class=s2>    </span><span class=nv>$SCRIPT_NAME</span><span class=s2> --env prod --verbose
</span></span></span><span class=line><span class=cl><span class=s2>    </span><span class=nv>$SCRIPT_NAME</span><span class=s2> -e dev --dry-run
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>parse_args</span>
</span></span><span class=line><span class=cl>    <span class=c># Use fish&#39;s argparse
</span></span></span><span class=line><span class=cl><span class=c></span>    <span class=nb>argparse</span> <span class=s1>&#39;e/env=&#39;</span> <span class=s1>&#39;v/verbose&#39;</span> <span class=s1>&#39;d/dry-run&#39;</span> <span class=s1>&#39;h/help&#39;</span> <span class=na>-- </span><span class=nv>$argv</span>
</span></span><span class=line><span class=cl>    <span class=k>or</span> <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=nf>usage</span>
</span></span><span class=line><span class=cl>        <span class=k>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=k>set</span> <span class=na>-q</span> <span class=nv>_flag_help</span>
</span></span><span class=line><span class=cl>        <span class=nf>usage</span>
</span></span><span class=line><span class=cl>        <span class=k>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=na>-q</span> <span class=nv>_flag_verbose</span><span class=p>;</span> <span class=k>and</span> <span class=k>set</span> <span class=na>-g</span> <span class=nv>VERBOSE</span> true
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=na>-q</span> <span class=nv>_flag_dry_run</span><span class=p>;</span> <span class=k>and</span> <span class=k>set</span> <span class=na>-g</span> <span class=nv>DRY_RUN</span> true
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=na>-q</span> <span class=nv>_flag_env</span><span class=p>;</span> <span class=k>and</span> <span class=k>set</span> <span class=na>-g</span> <span class=nv>ENVIRONMENT</span> <span class=nv>$_flag_env</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>#=== ENTRY POINT ==============================================================
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>main</span>
</span></span><span class=line><span class=cl>    <span class=nf>parse_args</span> <span class=nv>$argv</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c># Setup logging
</span></span></span><span class=line><span class=cl><span class=c></span>    <span class=nf>mkdir</span> <span class=na>-p</span> <span class=nv>$LOG_DIR</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>log_info</span> <span class=s2>&#34;=== </span><span class=nv>$SCRIPT_NAME</span><span class=s2> started ===&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nf>log_debug</span> <span class=s2>&#34;Script directory: </span><span class=nv>$SCRIPT_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nf>log_debug</span> <span class=s2>&#34;Environment: </span><span class=nv>$ENVIRONMENT</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nf>log_debug</span> <span class=s2>&#34;Dry run: </span><span class=nv>$DRY_RUN</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nf>log_debug</span> <span class=s2>&#34;Verbose: </span><span class=nv>$VERBOSE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>validate_requirements</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>do_deploy</span> <span class=nv>$ENVIRONMENT</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>log_info</span> <span class=s2>&#34;=== </span><span class=nv>$SCRIPT_NAME</span><span class=s2> completed ===&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Handle interrupts
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nf>on_interrupt</span> <span class=na>--on-signal</span> INT <span class=na>--on-signal</span> TERM
</span></span><span class=line><span class=cl>    <span class=nf>die</span> <span class=s2>&#34;Interrupted by user&#34;</span> <span class=m>130</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>main</span> <span class=nv>$argv</span></span></span></code></pre></div><hr><h2 class=heading-element id=tóm-tắt-nhanh><span>TÓM TẮT NHANH</span>
<a href=#t%c3%b3m-t%e1%ba%aft-nhanh class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=bash-essentials><span>Bash Essentials</span>
<a href=#bash-essentials class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Script header</span>
</span></span><span class=line><span class=cl><span class=c1>#!/usr/bin/env bash</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -euo pipefail
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Function</span>
</span></span><span class=line><span class=cl>func<span class=o>()</span> <span class=o>{</span> <span class=nb>local</span> <span class=nv>var</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span><span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$var</span><span class=s2>&#34;</span><span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Array</span>
</span></span><span class=line><span class=cl><span class=nv>arr</span><span class=o>=(</span><span class=s2>&#34;a&#34;</span> <span class=s2>&#34;b&#34;</span><span class=o>)</span><span class=p>;</span> <span class=nv>arr</span><span class=o>+=(</span><span class=s2>&#34;c&#34;</span><span class=o>)</span><span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>arr</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Associative array</span>
</span></span><span class=line><span class=cl><span class=nb>declare</span> -A map<span class=p>;</span> map<span class=o>[</span>key<span class=o>]=</span><span class=s2>&#34;value&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># String manipulation</span>
</span></span><span class=line><span class=cl><span class=si>${</span><span class=nv>var</span><span class=k>:-</span><span class=nv>default</span><span class=si>}</span>  <span class=si>${</span><span class=nv>var</span><span class=p>#pattern</span><span class=si>}</span>  <span class=si>${</span><span class=nv>var</span><span class=p>%pattern</span><span class=si>}</span>
</span></span><span class=line><span class=cl><span class=si>${</span><span class=nv>var</span><span class=p>/old/new</span><span class=si>}</span>   <span class=si>${</span><span class=nv>var</span><span class=p>^^</span><span class=si>}</span>        <span class=si>${#</span><span class=nv>var</span><span class=si>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Trap</span>
</span></span><span class=line><span class=cl><span class=nb>trap</span> cleanup EXIT<span class=p>;</span> <span class=nb>trap</span> <span class=s1>&#39;exit 130&#39;</span> INT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Debug</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -x  <span class=c1># enable</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> +x  <span class=c1># disable</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># getopts</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nb>getopts</span> <span class=s2>&#34;:vf:h&#34;</span> opt<span class=p>;</span> <span class=k>do</span> <span class=k>case</span> <span class=nv>$opt</span> in ... <span class=k>esac</span><span class=p>;</span> <span class=k>done</span></span></span></code></pre></div><h3 class=heading-element id=fish-essentials><span>Fish Essentials</span>
<a href=#fish-essentials class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=c># Variable
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=nv>var</span> <span class=s2>&#34;value&#34;</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-l</span> <span class=nv>local</span> <span class=s2>&#34;local&#34;</span>
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-gx</span> <span class=nv>EXPORTED</span> <span class=s2>&#34;value&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Array (1-indexed!)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>set</span> <span class=nv>arr</span> a b c
</span></span><span class=line><span class=cl><span class=k>set</span> <span class=na>-a</span> <span class=nv>arr</span> d      <span class=c># append
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>echo</span> <span class=nv>$arr</span><span class=o>[</span><span class=m>1</span><span class=o>]</span>      <span class=c># first element
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># Control flow
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>if</span> <span class=k>test</span> <span class=na>-f</span> <span class=nv>$file</span><span class=p>;</span> ... end
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=nv>item</span> <span class=k>in</span> <span class=nv>$list</span><span class=p>;</span> ... end
</span></span><span class=line><span class=cl><span class=k>switch</span> <span class=nv>$var</span><span class=p>;</span> <span class=k>case</span> pattern<span class=p>;</span> ... end
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Function
</span></span></span><span class=line><span class=cl><span class=c></span><span class=k>function</span> <span class=nf>name; ... end</span>
</span></span><span class=line><span class=cl><span class=nb>funcsave </span>name     <span class=c># persist
</span></span></span><span class=line><span class=cl><span class=c></span>
</span></span><span class=line><span class=cl><span class=c># String (built-in)
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>string </span>match/replace/split/join/upper/lower/trim
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Argument parsing
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>argparse</span> <span class=s1>&#39;v/verbose&#39;</span> <span class=s1>&#39;f/file=&#39;</span> <span class=na>-- </span><span class=nv>$argv</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Abbreviation
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nb>abbr</span> <span class=na>-a</span> gst <span class=s1>&#39;git status&#39;</span></span></span></code></pre></div><hr><h2 class=heading-element id=references><span>REFERENCES</span>
<a href=#references class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=bash-resources><span>Bash Resources</span>
<a href=#bash-resources class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><ul><li><a href=https://www.gnu.org/software/bash/manual/ target=_blank rel="external nofollow noopener noreferrer">Bash Reference Manual (GNU)</a></li><li><a href=https://tldp.org/LDP/abs/html/ target=_blank rel="external nofollow noopener noreferrer">Advanced Bash-Scripting Guide</a></li><li><a href=https://wiki.bash-hackers.org/ target=_blank rel="external nofollow noopener noreferrer">Bash Hackers Wiki</a></li><li><a href=https://www.shellcheck.net/ target=_blank rel="external nofollow noopener noreferrer">ShellCheck</a> - Linter</li></ul><h3 class=heading-element id=fish-resources><span>Fish Resources</span>
<a href=#fish-resources class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><ul><li><a href=https://fishshell.com/docs/current/ target=_blank rel="external nofollow noopener noreferrer">Fish Shell Documentation</a></li><li><a href=https://fishshell.com/docs/current/tutorial.html target=_blank rel="external nofollow noopener noreferrer">Fish Shell Tutorial</a></li><li><a href=https://github.com/jorgebucaran/awesome-fish target=_blank rel="external nofollow noopener noreferrer">Awesome Fish</a></li></ul><h3 class=heading-element id=tools><span>Tools</span>
<a href=#tools class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><ul><li><code>shellcheck</code> - Static analysis cho bash scripts</li><li><code>shfmt</code> - Formatter cho shell scripts</li><li><code>bats</code> - Bash Automated Testing System</li></ul></div><div class=collection-card><div class="collection-title text-secondary">Trong <a href=/collections/linux-cli/><i class="fa-solid fa-layer-group fa-fw" aria-hidden=true></i> <span>Bộ sưu tập・Linux Cli</span></span></a> 12</div><div class=collection-nav><a href=/bai-viet/khoa-hoc-may-tinh/linux-cli/grep-diff-sort/ class=collection-nav-item rel=next title="Grep, Sort, Diff - Hướng Dẫn Chuyên Sâu"><span>Grep, Sort, Diff - Hướng Dẫn Chuyên Sâu</span><i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Cập nhật ngày 2025-12-19 20:48:32">Cập nhật ngày 2025-12-19&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Chia sẻ trên X" data-sharer=twitter data-url=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/shell-co-ban/ data-title="Những Điều Cơ Bản Về Bash & Fish Shell Trong Linux" data-hashtags="ai generated post"><i class="fa-brands fa-x-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Chia sẻ trên Facebook" data-sharer=facebook data-url=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/shell-co-ban/ data-hashtag="ai generated post"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Chia sẻ trên 微博" data-sharer=weibo data-url=https://vanvuvuong.github.io/bai-viet/khoa-hoc-may-tinh/linux-cli/shell-co-ban/ data-title="Những Điều Cơ Bản Về Bash & Fish Shell Trong Linux"><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/ai-generated-post/ class=post-tag title="Nhãn - Ai Generated Post">Ai Generated Post</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Quay lại</a></span>&nbsp;|&nbsp;<span><a href=/>Trang chủ</a></span></section></div><div class=post-nav><a href=/bai-viet/khoa-hoc-may-tinh/gpg-co-ban/ class=post-nav-item rel=prev title="GPG Cơ Bản"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>GPG Cơ Bản</a><a href=/bai-viet/khoa-hoc-may-tinh/10x-terminal/ class=post-nav-item rel=next title="Sử Dụng Cửa Sổ Câu Lệnh (Terminal) Linux Nhanh Gấp 10 Lần Người Bình Thường">Sử Dụng Cửa Sổ Câu Lệnh (Terminal) Linux Nhanh Gấp 10 Lần Người Bình Thường<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article><aside class=toc id=toc-auto aria-label="Nội dung"><h2 class=toc-title>Nội dung&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><dialog id=toc-dialog aria-labelledby=toc-dialog-title role=dialog><div class=toc><h2 class=toc-title>Nội dung</h2><div class=toc-content id=toc-content-drawer><nav><ul><li><ul><li><a href=#1-script-structure--best-practices>1. SCRIPT STRUCTURE & BEST PRACTICES</a><ul><li><a href=#11-shebang-và-script-header>1.1 Shebang và Script Header</a></li><li><a href=#12-giải-thích-set-options>1.2 Giải thích set options</a></li><li><a href=#13-script-skeleton-chuẩn>1.3 Script Skeleton chuẩn</a></li></ul></li><li><a href=#2-functions>2. FUNCTIONS</a><ul><li><a href=#21-cú-pháp-định-nghĩa-function>2.1 Cú pháp định nghĩa Function</a></li><li><a href=#22-arguments-trong-function>2.2 Arguments trong Function</a></li><li><a href=#23-return-values>2.3 Return Values</a></li><li><a href=#24-local-variables>2.4 Local Variables</a></li><li><a href=#25-recursion>2.5 Recursion</a></li><li><a href=#26-function-library-pattern>2.6 Function Library Pattern</a></li></ul></li><li><a href=#3-arrays>3. ARRAYS</a><ul><li><a href=#31-indexed-arrays>3.1 Indexed Arrays</a></li><li><a href=#32-associative-arrays-bash-40>3.2 Associative Arrays (Bash 4.0+)</a></li><li><a href=#33-array-operations>3.3 Array Operations</a></li><li><a href=#34-array-patterns-thực-tế>3.4 Array Patterns thực tế</a></li></ul></li><li><a href=#4-string-manipulation>4. STRING MANIPULATION</a><ul><li><a href=#41-parameter-expansion>4.1 Parameter Expansion</a></li><li><a href=#42-pattern-removal>4.2 Pattern Removal</a></li><li><a href=#43-pattern-replacement>4.3 Pattern Replacement</a></li><li><a href=#44-case-modification-bash-40>4.4 Case Modification (Bash 4.0+)</a></li><li><a href=#45-string-operations-thực-tế>4.5 String Operations thực tế</a></li></ul></li><li><a href=#5-arithmetic-operations>5. ARITHMETIC OPERATIONS</a><ul><li><a href=#51-arithmetic-expansion>5.1 Arithmetic Expansion</a></li><li><a href=#52-operators>5.2 Operators</a></li><li><a href=#53-floating-point>5.3 Floating Point</a></li></ul></li><li><a href=#6-command--process-substitution>6. COMMAND & PROCESS SUBSTITUTION</a><ul><li><a href=#61-command-substitution>6.1 Command Substitution</a></li><li><a href=#62-process-substitution>6.2 Process Substitution</a></li><li><a href=#63-here-documents--here-strings>6.3 Here Documents & Here Strings</a></li></ul></li><li><a href=#7-traps--signal-handling>7. TRAPS & SIGNAL HANDLING</a><ul><li><a href=#71-signals-thường-gặp>7.1 Signals thường gặp</a></li><li><a href=#72-trap-syntax>7.2 Trap Syntax</a></li><li><a href=#73-cleanup-pattern>7.3 Cleanup Pattern</a></li><li><a href=#74-error-handling-pattern>7.4 Error Handling Pattern</a></li><li><a href=#75-graceful-shutdown>7.5 Graceful Shutdown</a></li></ul></li><li><a href=#8-debugging-techniques>8. DEBUGGING TECHNIQUES</a><ul><li><a href=#81-debug-options>8.1 Debug Options</a></li><li><a href=#82-debug-functions>8.2 Debug Functions</a></li><li><a href=#83-debugging-patterns>8.3 Debugging Patterns</a></li><li><a href=#84-common-issues--debug-tips>8.4 Common Issues & Debug Tips</a></li></ul></li><li><a href=#9-argument-parsing---getopts>9. ARGUMENT PARSING - GETOPTS</a><ul><li><a href=#91-getopts-cơ-bản>9.1 getopts cơ bản</a></li><li><a href=#92-long-options-với-getopt>9.2 Long Options với getopt</a></li><li><a href=#93-manual-parsing-flexible-nhất>9.3 Manual Parsing (flexible nhất)</a></li></ul></li><li><a href=#10-pattern-matching>10. PATTERN MATCHING</a><ul><li><a href=#101-glob-patterns>10.1 Glob Patterns</a></li><li><a href=#102-extended-globs-extglob>10.2 Extended Globs (extglob)</a></li><li><a href=#103-regex-trong-bash>10.3 Regex trong Bash</a></li><li><a href=#104-case-statement-patterns>10.4 Case Statement Patterns</a></li></ul></li><li><a href=#11-job-control>11. JOB CONTROL</a><ul><li><a href=#111-background-jobs>11.1 Background Jobs</a></li><li><a href=#112-wait-và-process-management>11.2 Wait và Process Management</a></li><li><a href=#113-disown-và-nohup>11.3 Disown và Nohup</a></li></ul></li><li><a href=#12-input-handling>12. INPUT HANDLING</a><ul><li><a href=#121-read-command>12.1 Read Command</a></li><li><a href=#122-select-menu>12.2 Select Menu</a></li><li><a href=#123-confirmation-prompts>12.3 Confirmation Prompts</a></li></ul></li><li><a href=#13-fish-shell-specifics>13. FISH SHELL SPECIFICS</a><ul><li><a href=#131-variables-trong-fish>13.1 Variables trong Fish</a></li><li><a href=#132-functions-trong-fish>13.2 Functions trong Fish</a></li><li><a href=#133-control-flow-trong-fish>13.3 Control Flow trong Fish</a></li><li><a href=#134-command-substitution-trong-fish>13.4 Command Substitution trong Fish</a></li><li><a href=#135-abbreviations-fish-unique-feature>13.5 Abbreviations (Fish Unique Feature)</a></li><li><a href=#136-completions-trong-fish>13.6 Completions trong Fish</a></li><li><a href=#137-fish-configuration>13.7 Fish Configuration</a></li></ul></li><li><a href=#14-bash-vs-fish-comparison>14. BASH VS FISH COMPARISON</a><ul><li><a href=#141-migration-examples>14.1 Migration Examples</a></li></ul></li><li><a href=#15-production-script-templates>15. PRODUCTION SCRIPT TEMPLATES</a><ul><li><a href=#151-bash-production-template>15.1 Bash Production Template</a></li><li><a href=#152-fish-production-template>15.2 Fish Production Template</a></li></ul></li><li><a href=#tóm-tắt-nhanh>TÓM TẮT NHANH</a><ul><li><a href=#bash-essentials>Bash Essentials</a></li><li><a href=#fish-essentials>Fish Essentials</a></li></ul></li><li><a href=#references>REFERENCES</a><ul><li><a href=#bash-resources>Bash Resources</a></li><li><a href=#fish-resources>Fish Resources</a></li><li><a href=#tools>Tools</a></li></ul></li></ul></li></ul></nav></div></div></dialog></main><footer class=footer><div class=footer-container><div class="footer-line powered">Cung cấp bởi <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.152.0"><img class=hugo-icon src=/images/hugo.min.svg alt="Hugo logo"> Hugo</a> | Chủ đề - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.4.0-alpha.2"><img class=fixit-icon src=/images/fixit.min.svg alt="FixIt logo"> FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2025</span></div></div></footer></div><div class=widgets><div class=fixed-buttons><div class="fixed-button back-to-top animate__faster" role=button aria-label="Lên trên"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><svg viewBox="0 0 100 100"><circle class="bg" cx="50" cy="50" r="50"/><circle class="progress" cx="50" cy="50" r="50"/></svg></div><div id=toc-drawer-button class="fixed-button toc-drawer-button" role=button aria-label="Nội dung"><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></div></div><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#000;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>Trang web này hoạt động tốt nhất khi JavaScript được kích hoạt.</div></noscript></div><link rel=preload href=/lib/katex/katex.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/katex/katex.min.css></noscript><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/instant-page/instantpage.min.js async defer type=module></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pace/pace.min.js async defer></script><script src=/bai-viet/khoa-hoc-may-tinh/linux-cli/shell-co-ban/config/page.js defer></script><script src=/js/theme.min.js defer></script></body></html>